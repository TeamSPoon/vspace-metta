<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta")
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta')
1=[]
2=[()]
3=[]
4=[GroundingSpace-0x55fb90f8d9f8]
5=[(Error (Error (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) Exception caught:
6=OperationalError: connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "musicbrainz"
6=connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "musicbrainz"
6=
6=
6=At:
6=  /usr/lib/python3/dist-packages/psycopg2/__init__.py(122): connect
6=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space.py(134): __init__
6=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space.py(230): <lambda>
6=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/atoms.py(320): execute
6=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/atoms.py(167): _priv_call_execute_on_grounded_atom
6=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/runner.py(31): run_step
6=  (18): run_step
6=) BadType)]
6=0.14user 0.03system 0:00.18elapsed 95%CPU (0avgtext+0avgdata 47052maxresident)k
6=960inputs+32outputs (4major+4628minor)pagefaults 0swaps
:- dynamic file_answers/3.

file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta', 1, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta', 2, [[]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta', 3, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta', 4, ['GroundingSpace-0x55fb90f8d9f8']).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta', 5, "[(Error (Error (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) Exception caught:").

<span class="ansi38-000068000">!(extend-py! sql_space)

</span>      -->(0,'&self',['extend-py!',sql_space],depth(1))
<span class="ansi33">  (extend-py! sql_space)

</span>; database can be installed with use of   https://github.com/metabrainz/musicbrainz-docker#publish-ports-of-all-services
; the description https://musicbrainz.org/doc/MusicBrainz_Database
<span class="ansi38-000068000">!(bind! &sql_space 
  (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432))

</span>      -->(1,'&self',['bind!','&sql_space',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432]],depth(1))
          -->(2,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(3))
      <--(1,retval('Empty'))
<span class="ansi33"> Empty

</span>; save sql query results into given space
<span class="ansi38-000068000">!(sql.save-query-result &sql_space &self 
  (and 
    (musicbrainz.artist 
      (id $Id) 
      (name $Name)) 
    (musicbrainz.artist 
      (id $Id) 
      (begin_date_year 1977)) 
    (limit 3)))

</span>      -->(3,'&self',['sql.save-query-result','&sql_space','&self',[',',['musicbrainz.artist',[id,_390460],[name,_390766]],['musicbrainz.artist',[id,_390460],[begin_date_year,1977]],[limit,3]]],depth(1))
          -->(4,'&self',[begin_date_year,1977],depth(3))
          -->(5,'&self','&sql_space',depth(3))
          <--(5,retval(['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432]))
            -->(6,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(4))
          -->(7,'&self',[',',['musicbrainz.artist',[id,_390460],[name,_390766]],['musicbrainz.artist',[id,_390460],[begin_date_year,1977]],[limit,3]],depth(3))
              -->(8,'&self',['musicbrainz.artist',[id,_390460],[name,_390766]],depth(5))
                  -->(9,'&self',[id,_390460],depth(7))
                  -->(10,'&self',[name,_390766],depth(7))
%~ catch_warn(apply(name,[_461932,_461938])) -->
%~   error(instantiation_error,context(system:name/2,Context_Kw)).
                  -->(11,'&self',[id,_390460],depth(7))
                  -->(12,'&self',[name,_390766],depth(7))
%~ catch_warn(apply(name,[_484476,_484482])) -->
%~   error(instantiation_error,context(system:name/2,Context_Kw)).
              -->(13,'&self',['musicbrainz.artist',[id,_390460],[begin_date_year,1977]],depth(5))
                  -->(14,'&self',[begin_date_year,1977],depth(7))
                  -->(15,'&self',[id,_390460],depth(7))
                  -->(16,'&self',[begin_date_year,1977],depth(7))
                  -->(17,'&self',[id,_390460],depth(7))
                  -->(18,'&self',[begin_date_year,1977],depth(7))
              -->(19,'&self',[limit,3],depth(5))
%~ catch_warn(apply(limit,[3,_509698])) -->
%~   error(instantiation_error,context(solution_sequences:limit/2,Context_Kw)).
          <--(7,retval('True'))
          -->(20,'&self','&sql_space',depth(3))
          <--(20,retval(['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432]))
            -->(21,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(4))
          -->(22,'&self',[',',['musicbrainz.artist',[id,_390460],[name,_390766]],['musicbrainz.artist',[id,_390460],[begin_date_year,1977]],[limit,3]],depth(3))
              -->(23,'&self',['musicbrainz.artist',[id,_390460],[name,_390766]],depth(5))
                  -->(24,'&self',[id,_390460],depth(7))
                  -->(25,'&self',[name,_390766],depth(7))
%~ catch_warn(apply(name,[_19298,_19304])) -->
%~   error(instantiation_error,context(system:name/2,Context_Kw)).
                  -->(26,'&self',[id,_2270],depth(7))
                  -->(27,'&self',[name,_2300],depth(7))
%~ catch_warn(apply(name,[_41596,_41602])) -->
%~   error(instantiation_error,context(system:name/2,Context_Kw)).
              -->(28,'&self',['musicbrainz.artist',[id,_2270],[begin_date_year,1977]],depth(5))
                  -->(29,'&self',[begin_date_year,1977],depth(7))
                  -->(30,'&self',[id,_2270],depth(7))
                  -->(31,'&self',[begin_date_year,1977],depth(7))
                  -->(32,'&self',[id,_2270],depth(7))
                  -->(33,'&self',[begin_date_year,1977],depth(7))
              -->(34,'&self',[limit,3],depth(5))
%~ catch_warn(apply(limit,[3,_66814])) -->
%~   error(instantiation_error,context(solution_sequences:limit/2,Context_Kw)).
          <--(22,retval('True'))
      <--(3,retval(['sql.save-query-result',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],'&self','True']))
        -->(35,'&self',['sql.save-query-result',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],'&self','True'],depth(2))
            -->(36,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(4))
            -->(37,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(4))
            -->(38,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(4))
<span class="ansi33">  (sql.save-query-result 
    (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) &self True)

</span><span class="ansi31">
! (assertEqualToResult 
    (sql.save-query-result &sql_space &self 
      (and 
        (musicbrainz.artist 
          (id $Id) 
          (name $Name)) 
        (musicbrainz.artist 
          (id $Id) 
          (begin_date_year 1977)) 
        (limit 3))) ())
(@ ! 
  (assertEqual 
    ( (sql.save-query-result 
        (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) &self True)) ()))
write_pass_fail_result("SQL-SPACE.SQL-SPACE-TEST.103",exec,['sql.save-query-result','&sql_space','&self',[',',['musicbrainz.artist',[id,Id],[name,Name]],['musicbrainz.artist',[id,Id],[begin_date_year,1977]],[limit,3]]],'FAIL',[],[['sql.save-query-result',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],'&self','True']])

</span>

--------------------------------------------------------------------------
<span class="ansi38-000068000">!(get-atoms &self)

</span>      -->(39,'&self',['get-atoms','&self'],depth(1))
      <--(39,retval([]))
<span class="ansi33"> ()

</span><span class="ansi31">
! (assertEqualToResult 
    (get-atoms &self) 
    (GroundingSpace-0x55fb90f8d9f8))
(@ ! 
  (assertEqual 
    (()) 
    (GroundingSpace-0x55fb90f8d9f8)))
write_pass_fail_result("SQL-SPACE.SQL-SPACE-TEST.104",exec,['get-atoms','&self'],'FAIL',['GroundingSpace-0x55fb90f8d9f8'],[[]])

</span>

--------------------------------------------------------------------------
;result : [GroundingSpace, ((musicbrainz.artist (id "127482") (name "Kanye West"))), ((musicbrainz.artist (id "127482") (begin_date_year 1977))), ((musicbrainz.artist (id "23366") (name "The Dirty Dozen Brass Band"))), ((musicbrainz.artist (id "23366") (begin_date_year 1977))), ((musicbrainz.artist (id "35629") (name "Fabolous"))), ((musicbrainz.artist (id "35629") (begin_date_year 1977)))]
<span class="ansi38-000068000">!(match &sql_space 
  (and 
    (musicbrainz.artist 
      (id $Id) 
      (name $Name)) 
    (musicbrainz.artist 
      (id $Id) 
      (begin_date_year 1983)) 
    (limit 3)) $Name)

</span>      -->(40,'&self',[match,'&sql_space',[',',['musicbrainz.artist',[id,_144158],[name,_144464]],['musicbrainz.artist',[id,_144158],[begin_date_year,1983]],[limit,3]],_144464],depth(1))
      <--(40,retval(fail))
<span class="ansi31">
! (assertEqualToResult 
    (match &sql_space 
      (and 
        (musicbrainz.artist 
          (id $Id) 
          (name $Name)) 
        (musicbrainz.artist 
          (id $Id) 
          (begin_date_year 1983)) 
        (limit 3)) $Name) "[(Error (Error (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) Exception caught:")
(@ ! 
  (assertEqual () "[(Error (Error (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) Exception caught:"))
write_pass_fail_result("SQL-SPACE.SQL-SPACE-TEST.105",exec,[match,'&sql_space',[',',['musicbrainz.artist',[id,Id],[name,Name]],['musicbrainz.artist',[id,Id],[begin_date_year,1983]],[limit,3]],Name],'FAIL',"[(Error (Error (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) Exception caught:",[])

</span>

--------------------------------------------------------------------------
;result ["NOFX", "Red Hot Chili Peppers", "Bon Jovi"]
<span class="ansi38-000068000">!(sql.insert &sql_space 
  ( (table musicbrainz.artist) 
    (gid "uuid_generate_v4()") 
    (name "some name3") 
    (sort_name "name some3") 
    (begin_date_year 1988) 
    (begin_date_month 1) 
    (begin_date_day 1) 
    (type 1) 
    (area 222) 
    (gender 2)))

</span>      -->(41,'&self',['sql.insert','&sql_space',[[table,'musicbrainz.artist'],[gid,"uuid_generate_v4()"],[name,"some name3"],[sort_name,"name some3"],[begin_date_year,1988],[begin_date_month,1],[begin_date_day,1],[type,1],[area,222],[gender,2]]],depth(1))
          -->(42,'&self',[table,'musicbrainz.artist'],depth(3))
          <--(42,retval('True'))
          -->(43,'&self',['sql.insert','&sql_space',['True',[gid,"uuid_generate_v4()"],[name,"some name3"],[sort_name,"name some3"],[begin_date_year,1988],[begin_date_month,1],[begin_date_day,1],[type,1],[area,222],[gender,2]]],depth(3))
              -->(44,'&self',[gid,"uuid_generate_v4()"],depth(5))
              -->(45,'&self','&sql_space',depth(5))
              <--(45,retval(['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432]))
                -->(46,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(6))
              -->(47,'&self',['True',[gid,"uuid_generate_v4()"],[name,"some name3"],[sort_name,"name some3"],[begin_date_year,1988],[begin_date_month,1],[begin_date_day,1],[type,1],[area,222],[gender,2]],depth(5))
                  -->(48,'&self',[gid,"uuid_generate_v4()"],depth(7))
                  -->(49,'&self',[gid,"uuid_generate_v4()"],depth(7))
                  -->(50,'&self',[name,"some name3"],depth(7))
                  <--(50,retval([115,111,109,101,32,110,97,109,101,51]))
                    -->(51,'&self',[115,111,109,101,32,110,97,109,101,51],depth(8))
                  -->(52,'&self',[sort_name,"name some3"],depth(7))
                  -->(53,'&self',[begin_date_year,1988],depth(7))
                  -->(54,'&self',[begin_date_month,1],depth(7))
                  -->(55,'&self',[begin_date_day,1],depth(7))
                  -->(56,'&self',[type,1],depth(7))
                  -->(57,'&self',[area,222],depth(7))
                  -->(58,'&self',[gender,2],depth(7))
                  -->(59,'&self',[gid,"uuid_generate_v4()"],depth(7))
                  -->(60,'&self',[name,"some name3"],depth(7))
                  <--(60,retval([115,111,109,101,32,110,97,109,101,51]))
                    -->(61,'&self',[115,111,109,101,32,110,97,109,101,51],depth(8))
                  -->(62,'&self',[sort_name,"name some3"],depth(7))
                  -->(63,'&self',[begin_date_year,1988],depth(7))
                  -->(64,'&self',[begin_date_month,1],depth(7))
                  -->(65,'&self',[begin_date_day,1],depth(7))
                  -->(66,'&self',[type,1],depth(7))
                  -->(67,'&self',[area,222],depth(7))
                  -->(68,'&self',[gender,2],depth(7))
              <--(47,retval(['True',[gid,"uuid_generate_v4()"],[115,111,109,101,32,110,97,109,101,51],[sort_name,"name some3"],[begin_date_year,1988],[begin_date_month,1],[begin_date_day,1],[type,1],[area,222],[gender,2]]))
                -->(69,'&self',['True',[gid,"uuid_generate_v4()"],[115,111,109,101,32,110,97,109,101,51],[sort_name,"name some3"],[begin_date_year,1988],[begin_date_month,1],[begin_date_day,1],[type,1],[area,222],[gender,2]],depth(6))
                    -->(70,'&self',[gid,"uuid_generate_v4()"],depth(8))
                    -->(71,'&self',[gid,"uuid_generate_v4()"],depth(8))
                    -->(72,'&self',[115,111,109,101,32,110,97,109,101,51],depth(8))
                    -->(73,'&self',[sort_name,"name some3"],depth(8))
                    -->(74,'&self',[begin_date_year,1988],depth(8))
                    -->(75,'&self',[begin_date_month,1],depth(8))
                    -->(76,'&self',[begin_date_day,1],depth(8))
                    -->(77,'&self',[type,1],depth(8))
                    -->(78,'&self',[area,222],depth(8))
                    -->(79,'&self',[gender,2],depth(8))
                    -->(80,'&self',[gid,"uuid_generate_v4()"],depth(8))
                    -->(81,'&self',[115,111,109,101,32,110,97,109,101,51],depth(8))
                    -->(82,'&self',[sort_name,"name some3"],depth(8))
                    -->(83,'&self',[begin_date_year,1988],depth(8))
                    -->(84,'&self',[begin_date_month,1],depth(8))
                    -->(85,'&self',[begin_date_day,1],depth(8))
                    -->(86,'&self',[type,1],depth(8))
                    -->(87,'&self',[area,222],depth(8))
                    -->(88,'&self',[gender,2],depth(8))
              -->(89,'&self','&sql_space',depth(5))
              <--(89,retval(['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432]))
                -->(90,'&self',['new-sql-space',musicbrainz_db,localhost,musicbrainz,musicbrainz,5432],depth(6))
              -->(91,'&self',['True',[gid,"uuid_generate_v4()"],[name,"some name3"],[sort_name,"name some3"],[begin_date_year,1988],[begin_date_month,1],[begin_date_day,1],[type,1],[area,222],[gender,2]],depth(5))
                  -->(92,'&self',[gid,"uuid_generate_v4()"],depth(7))
                  -->(93,'&self',[gid,"uuid_generate_v4()"],depth(7))
                  -->(94,'&self',[name,"some name3"],depth(7))
                  <--(94,retval([115,111,109,101,32,110,97,109,101,51]))
                    -->(95,'&self',[115,111,109,101,32,110,97,109,101,51],depth(8))
                  -->(96,'&self',[sort_name,"name some3"],depth(7))
                  -->(97,'&self',[begin_date_year,1988],depth(7))
                  -->(98,'&self',[begin_date_month,1],depth(7))
                  -->(99,'&self',[begin_date_day,1],depth(7))
                  -->(100,'&self',[type,1],depth(7))
Switched off tracing. For a longer trace !(pragma! tracelen 101))<span class="ansi33">
  (sql.insert 
    (new-sql-space musicbrainz_db localhost musicbrainz musicbrainz 5432) 
    (True 
      (gid "uuid_generate_v4()") 
      (115 111 109 101 32 110 97 109 101 51) 
      (sort_name "name some3") 
      (begin_date_year 1988) 
      (begin_date_month 1) 
      (begin_date_day 1) 
      (type 1) 
      (area 222) 
      (gender 2)))

</span><span class="ansi32">% 1,359,447 inferences, 0.389 CPU in 0.389 seconds (100% CPU, 3495790 Lips)
</span> (@ = "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.metta" 0)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 0
</span><span class="ansi31">Failures: 3
</span>doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/sql_space/sql_space_test.html" )

</pre>
</body>

</html>
