<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/performance/fibo.metta")
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/performance/fibo.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/performance/fibo.metta')
:- dynamic file_answers/3.


;;!(extend-py! metta_learner)
; these examples actually need the compiler!
<span class="ansi38-000068000">!(pragma! compile full)

</span>; Evaluation took 0.108 ms. (108.10 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-pass False)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_278796):-u_assign('pragma!'('trace-on-pass','False'),_278796)))]
exec(A) :-
    u_assign('pragma!'('trace-on-pass', 'False'), A).

subst_vars(u_assign('pragma!'('trace-on-pass','False'),L38),[],[L38])
; Evaluation took 0.083 ms. (83.00 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-False True)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_355318):-u_assign('pragma!'('trace-on-fail','True'),_355318)))]
exec(A) :-
    u_assign('pragma!'('trace-on-fail', 'True'), A).

subst_vars(u_assign('pragma!'('trace-on-fail','True'),L38),[],[L38])
; Evaluation took 0.072 ms. (72.20 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-overflow True)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_414230):-u_assign('pragma!'('trace-on-overflow','True'),_414230)))]
exec(A) :-
    u_assign('pragma!'('trace-on-overflow', 'True'), A).

subst_vars(u_assign('pragma!'('trace-on-overflow','True'),L38),[],[L38])
; Evaluation took 0.078 ms. (78.00 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-error True)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_472714):-u_assign('pragma!'('trace-on-error','True'),_472714)))]
exec(A) :-
    u_assign('pragma!'('trace-on-error', 'True'), A).

subst_vars(u_assign('pragma!'('trace-on-error','True'),L38),[],[L38])
; Evaluation took 0.128 ms. (128.30 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-length 2)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_17396):-u_assign('pragma!'('trace-length',2),_17396)))]
exec(A) :-
    u_assign('pragma!'('trace-length', 2), A).

subst_vars(u_assign('pragma!'('trace-length',2),L38),[],[L38])
; Evaluation took 0.071 ms. (71.20 microseconds) 
<span class="ansi33"> Empty

</span>; Recursive Fibonacci
%~ [ convert(Convert),
%~   head_preconds_into_body((fib(0,0):-true))]
%~ [convert(_65724),head_preconds_into_body((fib(0,0):-true))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,0],0)
</span><span class="ansi38-255165000">  (= 
    (fib 0) 0)
</span><span class="ansi38-000082136">  :- dynamic fib/2.

  fib(0, 0).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body((fib(1,1):-true))]
%~ [convert(_112326),head_preconds_into_body((fib(1,1):-true))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,1],1)
</span><span class="ansi38-255165000">  (= 
    (fib 1) 1)
</span><span class="ansi38-000082136">
  fib(1, 1).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( fib(N,Assign_Fib_N) :-
%~                              u_assign([-,N,2],Assign) ,
%~                              u_assign([fib,Assign],Assign3) ,
%~                              u_assign([-,N,1],Assign4) ,
%~                              u_assign([fib,Assign4],Assign5) ,
%~                              u_assign(Assign5+Assign3,Assign_Fib_N))]
%~ [convert(_162166),head_preconds_into_body((fib(N,_160754):-u_assign([-,N,2],_163036),u_assign([fib,_163036],_164096),u_assign([-,N,1],_165120),u_assign([fib,_165120],_165980),u_assign(_165980+_164096,_160754)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,N],[+,[fib,[-,N,1]],[fib,[-,N,2]]])
</span><span class="ansi38-255165000">  (= 
    (fib $N) 
    (+ 
      (fib 
        (- $N 1)) 
      (fib 
        (- $N 2))))
</span><span class="ansi38-000082136">
  fib(N, A) :-
    u_assign([-, N, 2], B),
    u_assign([fib, B], C),
    u_assign([-, N, 1], D),
    u_assign([fib, D], E),
    u_assign(E+C, A).

</span>

; Tail-Recursive Fibonacci
%~ [ convert(Convert),
%~   head_preconds_into_body(('fib-tail'(N,_271992):-u_assign('fib-tail-helper'(N,0,1),_271992)))]
%~ [convert(_273412),head_preconds_into_body(('fib-tail'(N,_271992):-u_assign('fib-tail-helper'(N,0,1),_271992)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail',N],['fib-tail-helper',N,0,1])
</span><span class="ansi38-255165000">  (= 
    (fib-tail $N) 
    (fib-tail-helper $N 0 1))
</span><span class="ansi38-000082136">  :- dynamic'fib-tail'/2.

  'fib-tail'(N, A) :-
    u_assign('fib-tail-helper'(N, 0, 1), A).

</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail-helper',0,A,_],A)
</span><span class="ansi38-255165000">  (= 
    (fib-tail-helper 0 $A $_) $A)
</span><span class="ansi38-000082136">  :- dynamic'fib-tail-helper'/4.

  'fib-tail-helper'(0, A, _, A) :-
    u_assign(A, A).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( 'fib-tail-helper'(N,A,B,Assign_B) :-
%~                              u_assign([+,A,B],Fib_tail_helper_Assign) ,
%~                              u_assign([-,N,1],Assign_B1) ,
%~                              u_assign('fib-tail-helper'(Assign_B1,B,Fib_tail_helper_Assign),Assign_B))]
%~ [convert(_364528),head_preconds_into_body(('fib-tail-helper'(N,A,B,_363006):-u_assign([+,A,B],_365410),u_assign([-,N,1],_366434),u_assign('fib-tail-helper'(_366434,B,_365410),_363006)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail-helper',N,A,B],['fib-tail-helper',[-,N,1],B,[+,A,B]])
</span><span class="ansi38-255165000">  (= 
    (fib-tail-helper $N $A $B) 
    (fib-tail-helper 
      (- $N 1) $B 
      (+ $A $B)))
</span><span class="ansi38-000082136">
  'fib-tail-helper'(N, A, B, A) :-
    u_assign([+, A, B], B),
    u_assign([-, N, 1], C),
    u_assign('fib-tail-helper'(C, B, B), A).

</span>

; Fibonacci Using Accumulators
%~ [ convert(Convert),
%~   head_preconds_into_body(('fib-acc'(N,_455126):-u_assign('fib-acc-helper'(N,(0,1)),_455126)))]
%~ [convert(_456546),head_preconds_into_body(('fib-acc'(N,_455126):-u_assign('fib-acc-helper'(N,(0,1)),_455126)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc',N],['fib-acc-helper',N,[',',0,1]])
</span><span class="ansi38-255165000">  (= 
    (fib-acc $N) 
    (fib-acc-helper $N 
      (and 0 1)))
</span><span class="ansi38-000082136">  :- dynamic'fib-acc'/2.

  'fib-acc'(N, A) :-
    u_assign('fib-acc-helper'(N, (0, 1)), A).

</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc-helper',0,[',',A,_]],A)
</span><span class="ansi38-255165000">  (= 
    (fib-acc-helper 0 
      (and $A $_)) $A)
</span><span class="ansi38-000082136">  :- dynamic'fib-acc-helper'/3.

  'fib-acc-helper'(0, (A, _), A) :-
    u_assign(A, A).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( 'fib-acc-helper'(N,(A,B),Fib_acc_helper) :-
%~                              u_assign([+,A,B],Assign_B) ,
%~                              u_assign([-,N,1],Assign) ,
%~                              u_assign('fib-acc-helper'(Assign,(B,Assign_B)),Fib_acc_helper))]
%~ [convert(_29456),head_preconds_into_body(('fib-acc-helper'(N,(A,B),_27896):-u_assign([+,A,B],_30402),u_assign([-,N,1],_31482),u_assign('fib-acc-helper'(_31482,(B,_30402)),_27896)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc-helper',N,[',',A,B]],['fib-acc-helper',[-,N,1],[',',B,[+,A,B]]])
</span><span class="ansi38-255165000">  (= 
    (fib-acc-helper $N 
      (and $A $B)) 
    (fib-acc-helper 
      (- $N 1) 
      (and $B 
        (+ $A $B))))
</span><span class="ansi38-000082136">
  'fib-acc-helper'(N, (A, B), A) :-
    u_assign([+, A, B], B),
    u_assign([-, N, 1], C),
    u_assign('fib-acc-helper'(C, (B, B)), A).

</span>

;!(assertEqual (fib 0) 0)
;!(assertEqual (fib-tail 0) 0)
;!(assertEqual (fib-acc 0) 0)
;!(assertEqual (fib 1) 1)
;!(assertEqual (fib-tail 1) 1)
;!(assertEqual (fib-acc 1) 1)
;!(assertEqual (fib 2) 1)
;!(assertEqual (fib-tail 2) 1)
;!(assertEqual (fib-acc 2) 1)

[assertEqual,[fib,3],2]
<span class="ansi38-000068000">!(assertEqual 
  (fib 3) 2)

</span><span class="ansi32">% 2,180,749 inferences, 0.569 CPU in 0.569 seconds (100% CPU, 3832678 Lips)
</span> (@ = "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/performance/fibo.metta" 0)
doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/performance/fibo.html" )

</pre>
</body>

</html>
