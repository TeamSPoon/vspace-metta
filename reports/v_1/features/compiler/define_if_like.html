<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi36 { color: #00aaaa; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta")
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta')
1=[()]
2=[()]
3=[(), ()]
4=[(Error (assertEqual :fail :pass) 
5=Expected: [:pass]
5=Got: [:fail]
5=Missed result: :pass)]
5=0.17user 0.00system 0:00.18elapsed 100%CPU (0avgtext+0avgdata 33132maxresident)k
5=0inputs+0outputs (0major+3463minor)pagefaults 0swaps
:- dynamic file_answers/3.

file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta', 1, [[]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta', 2, [[]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta', 3, [[], ',', []]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta', 4, "[(Error (assertEqual :fail :pass) ").

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['if-like','True',Then,Else],Then)
</span><span class="ansi38-255165000">  (= 
    (if-like True $Then $Else) $Then)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['if-like','False',Then,Else],Else)
</span><span class="ansi38-255165000">  (= 
    (if-like False $Then $Else) $Else)
</span>

<span class="ansi38-000068000">!(bind! &pass 
  (new-state :uncalled))

</span>      -->(0,'&self',['bind!','&pass',['new-state',':uncalled']],depth(1))
          -->(1,'&self',['new-state',':uncalled'],depth(3))
          <--(1,retval('State'(':uncalled',_348912)))
      <--(0,retval('Empty'))
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(bind! &fail 
  (new-state :uncalled))

</span>      -->(2,'&self',['bind!','&fail',['new-state',':uncalled']],depth(1))
          -->(3,'&self',['new-state',':uncalled'],depth(3))
          <--(3,retval('State'(':uncalled',_369782)))
      <--(2,retval('Empty'))
<span class="ansi33"> Empty

</span><span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['set-pass'],[let,__,['update-state!','&pass',':called'],':pass'])
</span><span class="ansi38-255165000">  (= 
    (set-pass) 
    (let $__ 
      (update-state! &pass :called) :pass))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['set-pass'],[let,__,['update-state!','&fail',':called'],':fail'])
</span><span class="ansi38-255165000">  (= 
    (set-pass) 
    (let $__ 
      (update-state! &fail :called) :fail))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['is-true'],'True')
</span><span class="ansi38-255165000">  (= 
    (is-True) True)
</span>

<span class="ansi38-000068000">!(bind! pass-or-False 
  (if-like 
    (is-True) 
    (set-pass) 
    (set-False)))

</span>      -->(4,'&self',['bind!','pass-or-fail',['if-like',['is-true'],['set-pass'],['set-fail']]],depth(1))
          -->(5,'&self',['if-like',['is-true'],['set-pass'],['set-fail']],depth(3))
              -->(6,'&self',['is-true'],depth(5))
              -->(7,'&self',['if-like','True',['set-pass'],['set-fail']],depth(5))
                  -->(8,'&self',['set-pass'],depth(7))
                    -->(9,'&self',[let,_427434,['update-state!','&pass',':called'],':pass'],depth(8))
                        -->(10,'&self',['update-state!','&pass',':called'],depth(10))
                            -->(11,'&self','&pass',depth(12))
                            <--(11,retval('State'(':uncalled',_428654)))
                            -->(12,'&self','&pass',depth(12))
                            <--(12,retval('State'(':uncalled',_429442)))
                        <--(10,retval(['update-state!','State'(':uncalled',_429802),':called']))
                          -->(13,'&self',['update-state!','State'(':uncalled',_349040),':called'],depth(11))
                    <--(9,retval(':pass'))
                  -->(14,'&self',['if-like','True',':pass',['set-fail']],depth(7))
                      -->(15,'&self',['set-fail'],depth(9))
<span class="ansi33"> Empty

</span>                  <--(14,retval(':pass'))
                    -->(16,'&self',[let,_433038,['update-state!','&fail',':called'],':fail'],depth(8))
                        -->(17,'&self',['update-state!','&fail',':called'],depth(10))
                            -->(18,'&self','&fail',depth(12))
                            <--(18,retval('State'(':uncalled',_434306)))
                            -->(19,'&self','&fail',depth(12))
                            <--(19,retval('State'(':uncalled',_435094)))
                        <--(17,retval(['update-state!','State'(':uncalled',_435454),':called']))
                          -->(20,'&self',['update-state!','State'(':uncalled',_369910),':called'],depth(11))
                    <--(16,retval(':fail'))
                  -->(21,'&self',['if-like','True',':fail',['set-fail']],depth(7))
                      -->(22,'&self',['set-fail'],depth(9))
                  <--(21,retval(':fail'))
                  <--(8,retval([let,_433212,['update-state!','&fail',':called'],':fail']))
                -->(23,'&self',['set-pass'],depth(6))
                  -->(24,'&self',[let,_438768,['update-state!','&pass',':called'],':pass'],depth(7))
                      -->(25,'&self',['update-state!','&pass',':called'],depth(9))
                          -->(26,'&self','&pass',depth(11))
                          <--(26,retval('State'(':uncalled',_439988)))
                          -->(27,'&self','&pass',depth(11))
                          <--(27,retval('State'(':uncalled',_440776)))
                      <--(25,retval(['update-state!','State'(':uncalled',_441136),':called']))
                        -->(28,'&self',['update-state!','State'(':uncalled',_349040),':called'],depth(10))
                  <--(24,retval(':pass'))
                  -->(29,'&self',[let,_442334,['update-state!','&fail',':called'],':fail'],depth(7))
                      -->(30,'&self',['update-state!','&fail',':called'],depth(9))
                          -->(31,'&self','&fail',depth(11))
                          <--(31,retval('State'(':uncalled',_443602)))
                          -->(32,'&self','&fail',depth(11))
                          <--(32,retval('State'(':uncalled',_444390)))
                      <--(30,retval(['update-state!','State'(':uncalled',_444750),':called']))
                        -->(33,'&self',['update-state!','State'(':uncalled',_369910),':called'],depth(10))
                  <--(29,retval(':fail'))
                <--(23,retval([let,_442508,['update-state!','&fail',':called'],':fail']))
              <--(7,retval(['set-pass']))
              <--(6,retval('True'))
              -->(34,'&self',['is-true'],depth(5))
            -->(35,'&self',['set-pass'],depth(4))
              -->(36,'&self',[let,_447412,['update-state!','&pass',':called'],':pass'],depth(5))
                  -->(37,'&self',['update-state!','&pass',':called'],depth(7))
                      -->(38,'&self','&pass',depth(9))
                      <--(38,retval('State'(':uncalled',_448632)))
                      -->(39,'&self','&pass',depth(9))
                      <--(39,retval('State'(':uncalled',_449420)))
                  <--(37,retval(['update-state!','State'(':uncalled',_449780),':called']))
                    -->(40,'&self',['update-state!','State'(':uncalled',_349040),':called'],depth(8))
              <--(36,retval(':pass'))
              -->(41,'&self',[let,_450978,['update-state!','&fail',':called'],':fail'],depth(5))
                  -->(42,'&self',['update-state!','&fail',':called'],depth(7))
                      -->(43,'&self','&fail',depth(9))
                      <--(43,retval('State'(':uncalled',_452246)))
                      -->(44,'&self','&fail',depth(9))
                      <--(44,retval('State'(':uncalled',_453034)))
                  <--(42,retval(['update-state!','State'(':uncalled',_453394),':called']))
                    -->(45,'&self',['update-state!','State'(':uncalled',_369910),':called'],depth(8))
              <--(41,retval(':fail'))
            <--(35,retval([let,_451152,['update-state!','&fail',':called'],':fail']))
              <--(34,retval('True'))
              -->(46,'&self',['set-pass'],depth(5))
                -->(47,'&self',[let,_455050,['update-state!','&pass',':called'],':pass'],depth(6))
                    -->(48,'&self',['update-state!','&pass',':called'],depth(8))
                        -->(49,'&self','&pass',depth(10))
                        <--(49,retval('State'(':uncalled',_456270)))
                        -->(50,'&self','&pass',depth(10))
                        <--(50,retval('State'(':uncalled',_457058)))
                    <--(48,retval(['update-state!','State'(':uncalled',_457418),':called']))
                      -->(51,'&self',['update-state!','State'(':uncalled',_349040),':called'],depth(9))
                <--(47,retval(':pass'))
              -->(52,'&self',['is-true'],depth(5))
              <--(52,retval('True'))
              -->(53,'&self',['set-fail'],depth(5))
                -->(54,'&self',[let,_460250,['update-state!','&fail',':called'],':fail'],depth(6))
                    -->(55,'&self',['update-state!','&fail',':called'],depth(8))
                        -->(56,'&self','&fail',depth(10))
                        <--(56,retval('State'(':uncalled',_461518)))
                        -->(57,'&self','&fail',depth(10))
                        <--(57,retval('State'(':uncalled',_462306)))
                    <--(55,retval(['update-state!','State'(':uncalled',_462666),':called']))
                      -->(58,'&self',['update-state!','State'(':uncalled',_369910),':called'],depth(9))
                <--(54,retval(':fail'))
              -->(59,'&self',['is-true'],depth(5))
              <--(59,retval('True'))
              -->(60,'&self',['set-fail'],depth(5))
              <--(46,retval([let,_460424,['update-state!','&fail',':called'],':fail']))
              -->(61,'&self',['set-fail'],depth(5))
          <--(5,retval(['set-pass']))
      <--(4,retval('Empty'))
<span class="ansi38-000068000">!(assertEqual pass-or-False :pass)

</span>      -->(62,'&self',[assertEqual,'pass-or-fail',':pass'],depth(1))
<h3 id="COMPILER.DEFINE-IF-LIKE.01">;; COMPILER.DEFINE-IF-LIKE.01</h3>
          -->(63,'&self','pass-or-fail',depth(3))
          <--(63,retval(':fail'))
; 
; EVAL TEST
; took 0.383 ms. (383.20 microseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    (:fail) 
    (:pass)))
</span>      <--(62,retval([got,[':fail'],expected,[':pass']]))
        -->(64,'&self',[got,[':fail'],expected,[':pass']],depth(2))
            -->(65,'&self',[':fail'],depth(4))
            -->(66,'&self',[':fail'],depth(4))
            -->(67,'&self',[':pass'],depth(4))
            -->(68,'&self',[':fail'],depth(4))
            -->(69,'&self',[':pass'],depth(4))
<span class="ansi33">  (got 
    (:fail) expected 
    (:pass))

</span><span class="ansi38-000068000">!(assertEqual 
  (get-state &pass) :called)

</span>      -->(70,'&self',[assertEqual,['get-state','&pass'],':called'],depth(1))
<h3 id="COMPILER.DEFINE-IF-LIKE.02">;; COMPILER.DEFINE-IF-LIKE.02</h3>
          -->(71,'&self',['get-state','&pass'],depth(3))
              -->(72,'&self','&pass',depth(5))
              <--(72,retval('State'(':uncalled',_510824)))
          <--(71,retval(':uncalled'))
; 
; EVAL TEST
; took 0.255 ms. (255.40 microseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    (:uncalled) 
    (:called)))
</span>      <--(70,retval([got,[':uncalled'],expected,[':called']]))
        -->(73,'&self',[got,[':uncalled'],expected,[':called']],depth(2))
            -->(74,'&self',[':uncalled'],depth(4))
            -->(75,'&self',[':uncalled'],depth(4))
            -->(76,'&self',[':called'],depth(4))
            -->(77,'&self',[':uncalled'],depth(4))
            -->(78,'&self',[':called'],depth(4))
<span class="ansi33">  (got 
    (:uncalled) expected 
    (:called))

</span><span class="ansi38-000068000">!(assertEqual 
  (get-state &fail) :uncalled)

</span>      -->(79,'&self',[assertEqual,['get-state','&fail'],':uncalled'],depth(1))
<h3 id="COMPILER.DEFINE-IF-LIKE.03">;; COMPILER.DEFINE-IF-LIKE.03</h3>
          -->(80,'&self',['get-state','&fail'],depth(3))
              -->(81,'&self','&fail',depth(5))
              <--(81,retval('State'(':uncalled',_15338)))
          <--(80,retval(':uncalled'))
; 
; EVAL TEST
; took 0.321 ms. (321.00 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough_for_test  
    (:uncalled) 
    (:uncalled)))
</span>      <--(79,retval('Empty'))
<span class="ansi33"> Empty

</span>;; we need to not be too eager to eval arguements
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self','pass-or-fail-f',['if-like',['is-true'],['set-pass'],[superpose,['set-fail']]])
</span><span class="ansi38-255165000">  (= pass-or-False-f 
    (if-like 
      (is-True) 
      (set-pass) 
      (superpose 
        (set-False))))
</span>

<span class="ansi38-000068000">!(update-state! &pass :uncalled)

</span>      -->(82,'&self',['update-state!','&pass',':uncalled'],depth(1))
          -->(83,'&self','&pass',depth(3))
          <--(83,retval('State'(':uncalled',_43840)))
          -->(84,'&self','&pass',depth(3))
          <--(84,retval('State'(':uncalled',_44628)))
      <--(82,retval(['update-state!','State'(':uncalled',_44988),':uncalled']))
        -->(85,'&self',['update-state!','State'(':uncalled',_1050),':uncalled'],depth(2))
<span class="ansi33">  (update-state! 
    (State  :uncalled $_1050) :uncalled)

</span><span class="ansi38-000068000">!(update-state! &fail :uncalled)

</span>      -->(86,'&self',['update-state!','&fail',':uncalled'],depth(1))
          -->(87,'&self','&fail',depth(3))
          <--(87,retval('State'(':uncalled',_58810)))
          -->(88,'&self','&fail',depth(3))
          <--(88,retval('State'(':uncalled',_59598)))
      <--(86,retval(['update-state!','State'(':uncalled',_59958),':uncalled']))
        -->(89,'&self',['update-state!','State'(':uncalled',_1070),':uncalled'],depth(2))
<span class="ansi33">  (update-state! 
    (State  :uncalled $_1070) :uncalled)

</span><span class="ansi38-000068000">!(assertEqual 
  (pass-or-False-f) :pass)

</span>      -->(90,'&self',[assertEqual,['pass-or-fail-f'],':pass'],depth(1))
<h3 id="COMPILER.DEFINE-IF-LIKE.04">;; COMPILER.DEFINE-IF-LIKE.04</h3>
          -->(91,'&self',['pass-or-fail-f'],depth(3))
; 
; EVAL TEST
; took 0.612 ms. (612.30 microseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    ( (pass-or-False-f)) 
    (:pass)))
</span>      <--(90,retval([got,[['pass-or-fail-f']],expected,[':pass']]))
        -->(92,'&self',[got,[['pass-or-fail-f']],expected,[':pass']],depth(2))
            -->(93,'&self',['pass-or-fail-f'],depth(4))
            -->(94,'&self',[['pass-or-fail-f']],depth(4))
                -->(95,'&self',['pass-or-fail-f'],depth(6))
            -->(96,'&self',[':pass'],depth(4))
            -->(97,'&self',[['pass-or-fail-f']],depth(4))
                -->(98,'&self',['pass-or-fail-f'],depth(6))
            -->(99,'&self',[':pass'],depth(4))
<span class="ansi33">  (got 
    ( (pass-or-False-f)) expected 
    (:pass))

</span><span class="ansi38-000068000">!(assertEqual 
  (get-state &pass) :uncalled)

</span>      -->(100,'&self',[assertEqual,['get-state','&pass'],':uncalled'],depth(1))
<h3 id="COMPILER.DEFINE-IF-LIKE.05">;; COMPILER.DEFINE-IF-LIKE.05</h3>
Switched off tracing. For a longer trace !(pragma! tracelen 101)); 
; EVAL TEST
; took 0.422 ms. (422.10 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough_for_test  
    (:uncalled) 
    (:uncalled)))
</span><span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(assertEqual 
  (get-state &fail) :uncalled)

</span>      -->(0,'&self',[assertEqual,['get-state','&fail'],':uncalled'],depth(1))
<h3 id="COMPILER.DEFINE-IF-LIKE.06">;; COMPILER.DEFINE-IF-LIKE.06</h3>
          -->(1,'&self',['get-state','&fail'],depth(3))
              -->(2,'&self','&fail',depth(5))
              <--(2,retval('State'(':uncalled',_116862)))
          <--(1,retval(':uncalled'))
; 
; EVAL TEST
; took 1.08 ms.
<span class="ansi36">(@ loonit_success 
  (equal_enough_for_test  
    (:uncalled) 
    (:uncalled)))
</span>      <--(0,retval('Empty'))
<span class="ansi33"> Empty

</span><span class="ansi32">% 374,530 inferences, 0.202 CPU in 0.202 seconds (100% CPU, 1856980 Lips)
</span> (@ = "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.metta" 0)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 3
</span><span class="ansi31">Failures: 3
</span>doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/features/compiler/define_if_like.html" )

</pre>
</body>

</html>
