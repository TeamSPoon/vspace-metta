<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi36 { color: #00aaaa; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-218112214 { color: #DA70D6; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta")
%~ /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta:1 
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta')
1=[()]
2=[(evalExpr (mapExpr (cata mapExpr evalExpr) (unFix (Fix (Plus (Fix (Plus (Fix (Var X)) (Fix (Const 2)))) (Fix (Const 40)))))))]
3=[(Fix (Plus (Fix (Const 2)) (Fix (Const 2))))]
4=[9]
5=[(diff (mapExpr (para_pair mapExpr diff) (unFix (Fix (Plus (Fix (Var X)) (Fix (Const 1)))))))]
6=[(Fix $Y), (2t $x#534), (1p $x#535)]
7=[(Fix (Plus (Fix (Plus (Fix (Const 1)) (Fix (Var X)))) (Fix (Plus (Fix (Const 1)) (Fix (Var X))))))]
8=1.20user 0.00system 0:01.21elapsed 100%CPU (0avgtext+0avgdata 34056maxresident)k
8=0inputs+0outputs (0major+3707minor)pagefaults 0swaps
:- dynamic file_answers/3.

file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta', 1, [[]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta', 2, [[evalExpr, [mapExpr, [cata, mapExpr, evalExpr], [unFix, ['Fix', ['Plus', ['Fix', ['Plus', ['Fix', ['Var', 'X']], ['Fix', ['Const', 2]]]], ['Fix', ['Const', 40]]]]]]]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta', 3, [['Fix', ['Plus', ['Fix', ['Const', 2]], ['Fix', ['Const', 2]]]]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta', 4, [9]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta', 5, [[diff, [mapExpr, [para_pair, mapExpr, diff], [unFix, ['Fix', ['Plus', ['Fix', ['Var', 'X']], ['Fix', ['Const', 1]]]]]]]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta', 6, [['Fix', Y], [2, t, X_C35_534], [1, p, X_C35_535]]).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta', 7, [['Fix', ['Plus', ['Fix', ['Plus', ['Fix', ['Const', 1]], ['Fix', ['Var', 'X']]]], ['Fix', ['Plus', ['Fix', ['Const', 1]], ['Fix', ['Var', 'X']]]]]]]).

;; !(import! &self "../schemes.metta")
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!(import! &self "../schemes.metta")
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  (import! &self "../schemes.metta") 
  (()))

</span><span class="ansi38-250144246">; !(import! &self "../schemes.metta")
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',['import!','&self','../schemes.metta'],OUT).

</span>      -->(0,eval('&self',[assertEqualToResult,['import!','&self','../schemes.metta'],[[]]],RET),depth(1))
<h3 id="EXAMPLES.EXPRESSION.01">;; EXAMPLES.EXPRESSION.01</h3>
          -->(1,eval('&self',['import!','&self','../schemes.metta'],RET),depth(3))
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/schemes.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/schemes.metta')
;; How to apply a function to the slots, a Functor's map
;; For references see https://github.com/passy/awesome-recursion-schemes
;; For my typed Scala implementation see https://github.com/Adam-Vandervorst/RecursionSchemes
<span class="ansi38-013099040">!(transfer! base.metta)

</span><span class="ansi38-250144246">; !(transfer! base.metta)
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',['transfer!','base.metta'],OUT).

</span>      -->(2,eval('&self',['transfer!','base.metta'],RET),depth(1))
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/base.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/base.metta')
;; folds
;; Wrapping and unwrapping for the recursion
;; Fix F = F (Fix F)
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[unFix,['Fix',X]],X])
</span><span class="ansi38-255165000">  (= 
    (unFix 
      (Fix $X)) $X)
</span>

;; identity function, useful in the combinators due to lack of
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[identity,X],X])
</span><span class="ansi38-255165000">  (= 
    (identity $X) $X)
</span>

      <--(2,retval('Empty'))
Deterministic: <span class="ansi33">Empty

</span><span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[cata,F,Alg],A],[Alg,[F,[cata,F,Alg],[unFix,A]]]])
</span><span class="ansi38-255165000">  (= 
    ( (cata $F $Alg) $A) 
    ($Alg 
      ($F 
        (cata $F $Alg) 
        (unFix $A))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[para_pair,F,Alg],A],[',',[[para,F,Alg],A],A]])
</span><span class="ansi38-255165000">  (= 
    ( (para_pair $F $Alg) $A) 
    (and 
      ( (para $F $Alg) $A) $A))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[para,F,Alg],A],[Alg,[F,[para_pair,F,Alg],[unFix,A]]]])
</span><span class="ansi38-255165000">  (= 
    ( (para $F $Alg) $A) 
    ($Alg 
      ($F 
        (para_pair $F $Alg) 
        (unFix $A))))
</span>

;; unfolds
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[ana,F,Coalg],S],['Fix',[F,[ana,F,Coalg],[Coalg,S]]]])
</span><span class="ansi38-255165000">  (= 
    ( (ana $F $Coalg) $S) 
    (Fix 
      ($F 
        (ana $F $Coalg) 
        ($Coalg $S))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[futu_picking,F,Coalg],['Pure',A]],[[futu,F,Coalg],A]])
</span><span class="ansi38-255165000">  (= 
    ( (futu_picking $F $Coalg) 
      (Pure $A)) 
    ( (futu $F $Coalg) $A))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[futu_picking,F,Coalg],['Bind',F]],['Fix',[F,[futu_picking,F,Coalg],F]]])
</span><span class="ansi38-255165000">  (= 
    ( (futu_picking $F $Coalg) 
      (Bind $F)) 
    (Fix 
      ($F 
        (futu_picking $F $Coalg) $F)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[futu,F,Coalg],S],['Fix',[F,[futu_picking,F,Coalg],[Coalg,S]]]])
</span><span class="ansi38-255165000">  (= 
    ( (futu $F $Coalg) $S) 
    (Fix 
      ($F 
        (futu_picking $F $Coalg) 
        ($Coalg $S))))
</span>

;; combinations
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[[hylo,F,Alg,Coalg],S],[Alg,[F,[hylo,F,Alg,Coalg],[Coalg,S]]]])
</span><span class="ansi38-255165000">  (= 
    ( (hylo $F $Alg $Coalg) $S) 
    ($Alg 
      ($F 
        (hylo $F $Alg $Coalg) 
        ($Coalg $S))))
</span>

          <--(1,retval('Empty'))
; 
; EVAL TEST
; took 0.041 secs. (41.16 milliseconds) 
      <--(0,retval(fail))
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[mapExpr,F,['Plus',X,Y]],['Plus',[F,X],[F,Y]]])
</span><span class="ansi38-255165000">  (= 
    (mapExpr $F 
      (Plus $X $Y)) 
    (Plus 
      ($F $X) 
      ($F $Y)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[mapExpr,F,['Const',X]],['Const',X]])
</span><span class="ansi38-255165000">  (= 
    (mapExpr $F 
      (Const $X)) 
    (Const $X))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[mapExpr,F,['Var',X]],['Var',X]])
</span><span class="ansi38-255165000">  (= 
    (mapExpr $F 
      (Var $X)) 
    (Var $X))
</span>

;; How to evaluate the structure to some value, a single step, an algebra
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[evalExpr,['Plus',X,Y]],[+,X,Y]])
</span><span class="ansi38-255165000">  (= 
    (evalExpr 
      (Plus $X $Y)) 
    (+ $X $Y))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[evalExpr,['Const',X]],X])
</span><span class="ansi38-255165000">  (= 
    (evalExpr 
      (Const $X)) $X)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[evalExpr,['Var',X]],[valueOf,X]])
</span><span class="ansi38-255165000">  (= 
    (evalExpr 
      (Var $X)) 
    (valueOf $X))
</span>

;; Dictionary we can use during evaluation
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[valueOf,'X'],0])
</span><span class="ansi38-255165000">  (= 
    (valueOf X) 0)
</span>

;; A fold, with the Functor and algebra, applied to the Fix tree
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!((cata mapExpr evalExpr) 
  (Fix 
    (Plus 
      (Fix 
        (Plus 
          (Fix 
            (Var X)) 
          (Fix 
            (Const 2)))) 
      (Fix 
        (Const 40)))))
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  ( (cata mapExpr evalExpr) 
    (Fix 
      (Plus 
        (Fix 
          (Plus 
            (Fix 
              (Var X)) 
            (Fix 
              (Const 2)))) 
        (Fix 
          (Const 40))))) 
  ( (evalExpr 
      (mapExpr 
        (cata mapExpr evalExpr) 
        (unFix 
          (Fix 
            (Plus 
              (Fix 
                (Plus 
                  (Fix 
                    (Var X)) 
                  (Fix 
                    (Const 2)))) 
              (Fix 
                (Const 40)))))))))

</span><span class="ansi38-250144246">; !(
  (cata mapExpr evalExpr) 
  (Fix 
    (Plus 
      (Fix 
        (Plus 
          (Fix 
            (Var X)) 
          (Fix 
            (Const 2)))) 
      (Fix 
        (Const 40)))))
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',[[cata,mapExpr,evalExpr],['Fix',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]]]],OUT).

</span>      -->(0,eval('&self',[assertEqualToResult,[[cata,mapExpr,evalExpr],['Fix',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]]]],[[evalExpr,[mapExpr,[cata,mapExpr,evalExpr],[unFix,['Fix',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]]]]]]]],RET),depth(1))
<h3 id="EXAMPLES.EXPRESSION.02">;; EXAMPLES.EXPRESSION.02</h3>
          -->(1,eval('&self',[[cata,mapExpr,evalExpr],['Fix',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]]]],RET),depth(3))
            -->(2,eval('&self',[evalExpr,[mapExpr,[cata,mapExpr,evalExpr],[unFix,['Fix',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]]]]]],RET),depth(4))
                -->(3,eval('&self',[cata,mapExpr,evalExpr],RET),depth(6))
                -->(4,eval('&self',['Var','X'],RET),depth(6))
                -->(5,eval('&self',['Const',2],RET),depth(6))
                -->(6,eval('&self',['Const',40],RET),depth(6))
                -->(7,eval('&self',[mapExpr,[cata,mapExpr,evalExpr],[unFix,['Fix',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]]]]],RET),depth(6))
                    -->(8,eval('&self',[cata,mapExpr,evalExpr],RET),depth(8))
                    -->(9,eval('&self',['Var','X'],RET),depth(8))
                    -->(10,eval('&self',['Const',2],RET),depth(8))
                    -->(11,eval('&self',['Const',40],RET),depth(8))
                    -->(12,eval('&self',[cata,mapExpr,evalExpr],RET),depth(8))
                    -->(13,eval('&self',[unFix,['Fix',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]]]],RET),depth(8))
                      -->(14,eval('&self',['Plus',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],['Fix',['Const',40]]],RET),depth(9))
                          -->(15,eval('&self',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],RET),depth(11))
                              -->(16,eval('&self',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]],RET),depth(13))
                                  -->(17,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(18,eval('&self',['Var','X'],RET),depth(17))
                                      -->(19,eval('&self',['Var','X'],RET),depth(17))
                                  -->(20,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(21,eval('&self',['Const',2],RET),depth(17))
                                      -->(22,eval('&self',['Const',2],RET),depth(17))
                                  -->(23,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(24,eval('&self',['Var','X'],RET),depth(17))
                                      -->(25,eval('&self',['Var','X'],RET),depth(17))
                                  -->(26,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(27,eval('&self',['Const',2],RET),depth(17))
                                      -->(28,eval('&self',['Const',2],RET),depth(17))
                              -->(29,eval('&self',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]],RET),depth(13))
                                  -->(30,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(31,eval('&self',['Var','X'],RET),depth(17))
                                      -->(32,eval('&self',['Var','X'],RET),depth(17))
                                  -->(33,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(34,eval('&self',['Const',2],RET),depth(17))
                                      -->(35,eval('&self',['Const',2],RET),depth(17))
                                  -->(36,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(37,eval('&self',['Var','X'],RET),depth(17))
                                      -->(38,eval('&self',['Var','X'],RET),depth(17))
                                  -->(39,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(40,eval('&self',['Const',2],RET),depth(17))
                                      -->(41,eval('&self',['Const',2],RET),depth(17))
                          -->(42,eval('&self',['Fix',['Const',40]],RET),depth(11))
                              -->(43,eval('&self',['Const',40],RET),depth(13))
                              -->(44,eval('&self',['Const',40],RET),depth(13))
                          -->(45,eval('&self',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],RET),depth(11))
                              -->(46,eval('&self',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]],RET),depth(13))
                                  -->(47,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(48,eval('&self',['Var','X'],RET),depth(17))
                                      -->(49,eval('&self',['Var','X'],RET),depth(17))
                                  -->(50,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(51,eval('&self',['Const',2],RET),depth(17))
                                      -->(52,eval('&self',['Const',2],RET),depth(17))
                                  -->(53,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(54,eval('&self',['Var','X'],RET),depth(17))
                                      -->(55,eval('&self',['Var','X'],RET),depth(17))
                                  -->(56,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(57,eval('&self',['Const',2],RET),depth(17))
                                      -->(58,eval('&self',['Const',2],RET),depth(17))
                              -->(59,eval('&self',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]],RET),depth(13))
                                  -->(60,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(61,eval('&self',['Var','X'],RET),depth(17))
                                      -->(62,eval('&self',['Var','X'],RET),depth(17))
                                  -->(63,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(64,eval('&self',['Const',2],RET),depth(17))
                                      -->(65,eval('&self',['Const',2],RET),depth(17))
                                  -->(66,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(67,eval('&self',['Var','X'],RET),depth(17))
                                      -->(68,eval('&self',['Var','X'],RET),depth(17))
                                  -->(69,eval('&self',['Fix',['Const',2]],RET),depth(15))
                                      -->(70,eval('&self',['Const',2],RET),depth(17))
                                      -->(71,eval('&self',['Const',2],RET),depth(17))
                          -->(72,eval('&self',['Fix',['Const',40]],RET),depth(11))
                              -->(73,eval('&self',['Const',40],RET),depth(13))
                              -->(74,eval('&self',['Const',40],RET),depth(13))
                        -->(75,eval('&self',['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]]],RET),depth(10))
                            -->(76,eval('&self',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]],RET),depth(12))
                                -->(77,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(78,eval('&self',['Var','X'],RET),depth(16))
                                    -->(79,eval('&self',['Var','X'],RET),depth(16))
                                -->(80,eval('&self',['Fix',['Const',2]],RET),depth(14))
                                    -->(81,eval('&self',['Const',2],RET),depth(16))
                                    -->(82,eval('&self',['Const',2],RET),depth(16))
                                -->(83,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(84,eval('&self',['Var','X'],RET),depth(16))
                                    -->(85,eval('&self',['Var','X'],RET),depth(16))
                                -->(86,eval('&self',['Fix',['Const',2]],RET),depth(14))
                                    -->(87,eval('&self',['Const',2],RET),depth(16))
                                    -->(88,eval('&self',['Const',2],RET),depth(16))
                            -->(89,eval('&self',['Plus',['Fix',['Var','X']],['Fix',['Const',2]]],RET),depth(12))
                                -->(90,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(91,eval('&self',['Var','X'],RET),depth(16))
                                    -->(92,eval('&self',['Var','X'],RET),depth(16))
                                -->(93,eval('&self',['Fix',['Const',2]],RET),depth(14))
                                    -->(94,eval('&self',['Const',2],RET),depth(16))
                                    -->(95,eval('&self',['Const',2],RET),depth(16))
                                -->(96,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(97,eval('&self',['Var','X'],RET),depth(16))
                                    -->(98,eval('&self',['Var','X'],RET),depth(16))
                                -->(99,eval('&self',['Fix',['Const',2]],RET),depth(14))
                                    -->(100,eval('&self',['Const',2],RET),depth(16))
Switched off tracing. For a longer trace !(pragma! tracelen 101)); 
; EVAL TEST
; took 0.124 secs. (124.47 milliseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    (42) 
    ( (evalExpr 
        (mapExpr 
          (cata mapExpr evalExpr) 
          (unFix 
            (Fix 
              (Plus 
                (Fix 
                  (Plus 
                    (Fix 
                      (Var X)) 
                    (Fix 
                      (Const 2)))) 
                (Fix 
                  (Const 40))))))))))
</span>NDet Result(0): <span class="ansi33">
  (got 
    (42) expected 
    (42))

</span>;; How to generate the structure based on some value, a single step, a co-algebra
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[nTimes,[',',X,['S',['S',N]]]],['Plus',[',',X,['S','Z']],[',',X,['S',N]]]])
</span><span class="ansi38-255165000">  (= 
    (nTimes 
      (and $X 
        (S 
          (S $N)))) 
    (Plus 
      (and $X 
        (S Z)) 
      (and $X 
        (S $N))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[nTimes,[',',X,['S','Z']]],['Const',X]])
</span><span class="ansi38-255165000">  (= 
    (nTimes 
      (and $X 
        (S Z))) 
    (Const $X))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[nTimes,[',',_,'Z']],['Const',0]])
</span><span class="ansi38-255165000">  (= 
    (nTimes 
      (and $_ Z)) 
    (Const 0))
</span>

;; An unfold, with the Functor and co-algebra, applied to some seed value
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!((ana mapExpr nTimes) 
  (and 2 
    (S 
      (S Z))))
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  ( (ana mapExpr nTimes) 
    (and 2 
      (S 
        (S Z)))) 
  ( (Fix 
      (Plus 
        (Fix 
          (Const 2)) 
        (Fix 
          (Const 2))))))

</span><span class="ansi38-250144246">; !(
  (ana mapExpr nTimes) 
  (and 2 
    (S 
      (S Z))))
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',[[ana,mapExpr,nTimes],[',',2,['S',['S','Z']]]],OUT).

</span>      -->(0,eval('&self',[assertEqualToResult,[[ana,mapExpr,nTimes],[',',2,['S',['S','Z']]]],[['Fix',['Plus',['Fix',['Const',2]],['Fix',['Const',2]]]]]],RET),depth(1))
<h3 id="EXAMPLES.EXPRESSION.03">;; EXAMPLES.EXPRESSION.03</h3>
          -->(1,eval('&self',[[ana,mapExpr,nTimes],[',',2,['S',['S','Z']]]],RET),depth(3))
            -->(2,eval('&self',['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,[',',2,['S',['S','Z']]]]]],RET),depth(4))
                -->(3,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,[',',2,['S',['S','Z']]]]],RET),depth(6))
                    -->(4,eval('&self',[ana,mapExpr,nTimes],RET),depth(8))
                    -->(5,eval('&self',['S','Z'],RET),depth(8))
                    -->(6,eval('&self',[ana,mapExpr,nTimes],RET),depth(8))
                    -->(7,eval('&self',[nTimes,[',',2,['S',['S','Z']]]],RET),depth(8))
                      -->(8,eval('&self',['Plus',[',',2,['S','Z']],[',',2,['S','Z']]],RET),depth(9))
                          -->(9,eval('&self',[',',2,['S','Z']],RET),depth(11))
                              -->(10,eval('&self',['S','Z'],RET),depth(13))
                          <--(9,retval('True'))
                          -->(11,eval('&self',[',',2,['S','Z']],RET),depth(11))
                              -->(12,eval('&self',['S','Z'],RET),depth(13))
                          <--(11,retval('True'))
                      <--(8,retval(['Plus','True','True']))
                        -->(13,eval('&self',['Plus','True','True'],RET),depth(10))
                  -->(14,eval('&self',[mapExpr,[ana,mapExpr,nTimes],['Plus','True','True']],RET),depth(7))
                    -->(15,eval('&self',['Plus',[[ana,mapExpr,nTimes],'True'],[[ana,mapExpr,nTimes],'True']],RET),depth(8))
                        -->(16,eval('&self',[[ana,mapExpr,nTimes],'True'],RET),depth(10))
                          -->(17,eval('&self',['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(18,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(19,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(20,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(21,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(22,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(23,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(24,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(25,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(26,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(27,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(28,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(29,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(30,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(31,eval('&self',[nTimes,'True'],RET),depth(15))
                            -->(32,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(12))
                                -->(33,eval('&self',[ana,mapExpr,nTimes],RET),depth(14))
                                -->(34,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(35,eval('&self',[ana,mapExpr,nTimes],RET),depth(14))
                                -->(36,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(37,eval('&self',[ana,mapExpr,nTimes],RET),depth(14))
                                -->(38,eval('&self',[nTimes,'True'],RET),depth(14))
                        -->(39,eval('&self',[[ana,mapExpr,nTimes],'True'],RET),depth(10))
                          -->(40,eval('&self',['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(41,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(42,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(43,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(44,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(45,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(46,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(47,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(48,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(49,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(50,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(51,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(52,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(53,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(54,eval('&self',[nTimes,'True'],RET),depth(15))
                            -->(55,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(12))
                                -->(56,eval('&self',[ana,mapExpr,nTimes],RET),depth(14))
                                -->(57,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(58,eval('&self',[ana,mapExpr,nTimes],RET),depth(14))
                                -->(59,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(60,eval('&self',[ana,mapExpr,nTimes],RET),depth(14))
                                -->(61,eval('&self',[nTimes,'True'],RET),depth(14))
                      -->(62,eval('&self',['Plus',['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']]],['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']]]],RET),depth(9))
                          -->(63,eval('&self',['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(64,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(65,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(66,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(67,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(68,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(69,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(70,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(71,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(72,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(73,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(74,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(75,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(76,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(77,eval('&self',[nTimes,'True'],RET),depth(15))
                          -->(78,eval('&self',['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(79,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(80,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(81,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(82,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(83,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(84,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(85,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(86,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(87,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(88,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(89,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(90,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(91,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(92,eval('&self',[nTimes,'True'],RET),depth(15))
                          -->(93,eval('&self',['Fix',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(94,eval('&self',[mapExpr,[ana,mapExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(95,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(96,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(97,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(98,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(99,eval('&self',[ana,mapExpr,nTimes],RET),depth(15))
                                  -->(100,eval('&self',[nTimes,'True'],RET),depth(15))
Switched off tracing. For a longer trace !(pragma! tracelen 101)); 
; EVAL TEST
; took 0.498 secs. (498.05 milliseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    ( (Fix 
        (Plus 
          (Fix 
            (mapExpr 
              (ana mapExpr nTimes) 
              (nTimes True))) 
          (Fix 
            (mapExpr 
              (ana mapExpr nTimes) 
              (nTimes True)))))) 
    ( (Fix 
        (Plus 
          (Fix 
            (Const 2)) 
          (Fix 
            (Const 2)))))))
</span>Deterministic: <span class="ansi33">
  (got 
    ( (Fix 
        (Plus 
          (Fix 
            (mapExpr 
              (ana mapExpr nTimes) 
              (nTimes True))) 
          (Fix 
            (mapExpr 
              (ana mapExpr nTimes) 
              (nTimes True)))))) expected 
    ( (Fix 
        (Plus 
          (Fix 
            (Const 2)) 
          (Fix 
            (Const 2))))))

</span>;; Combining both into a "re-fold", starting with a (co-algebra) seed value, ending with a (algebra) result value
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!((hylo mapExpr evalExpr nTimes) 
  (and 3 
    (S 
      (S 
        (S Z)))))
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  ( (hylo mapExpr evalExpr nTimes) 
    (and 3 
      (S 
        (S 
          (S Z))))) 
  (9))

</span><span class="ansi38-250144246">; !(
  (hylo mapExpr evalExpr nTimes) 
  (and 3 
    (S 
      (S 
        (S Z)))))
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',[[hylo,mapExpr,evalExpr,nTimes],[',',3,['S',['S',['S','Z']]]]],OUT).

</span>      -->(0,eval('&self',[assertEqualToResult,[[hylo,mapExpr,evalExpr,nTimes],[',',3,['S',['S',['S','Z']]]]],[9]],RET),depth(1))
<h3 id="EXAMPLES.EXPRESSION.04">;; EXAMPLES.EXPRESSION.04</h3>
          -->(1,eval('&self',[[hylo,mapExpr,evalExpr,nTimes],[',',3,['S',['S',['S','Z']]]]],RET),depth(3))
            -->(2,eval('&self',[evalExpr,[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,[',',3,['S',['S',['S','Z']]]]]]],RET),depth(4))
                -->(3,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(6))
                -->(4,eval('&self',['S','Z'],RET),depth(6))
                -->(5,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,[',',3,['S',['S',['S','Z']]]]]],RET),depth(6))
                    -->(6,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(8))
                    -->(7,eval('&self',['S','Z'],RET),depth(8))
                    -->(8,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(8))
                    -->(9,eval('&self',[nTimes,[',',3,['S',['S',['S','Z']]]]],RET),depth(8))
                      -->(10,eval('&self',['Plus',[',',3,['S','Z']],[',',3,['S',['S','Z']]]],RET),depth(9))
                          -->(11,eval('&self',[',',3,['S','Z']],RET),depth(11))
                              -->(12,eval('&self',['S','Z'],RET),depth(13))
                          <--(11,retval('True'))
                          -->(13,eval('&self',[',',3,['S',['S','Z']]],RET),depth(11))
                              -->(14,eval('&self',['S',['S','Z']],RET),depth(13))
                                  -->(15,eval('&self',['S','Z'],RET),depth(15))
                                  -->(16,eval('&self',['S','Z'],RET),depth(15))
                          <--(13,retval('True'))
                      <--(10,retval(['Plus','True','True']))
                        -->(17,eval('&self',['Plus','True','True'],RET),depth(10))
                  -->(18,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],['Plus','True','True']],RET),depth(7))
                    -->(19,eval('&self',['Plus',[[hylo,mapExpr,evalExpr,nTimes],'True'],[[hylo,mapExpr,evalExpr,nTimes],'True']],RET),depth(8))
                        -->(20,eval('&self',[[hylo,mapExpr,evalExpr,nTimes],'True'],RET),depth(10))
                          -->(21,eval('&self',[evalExpr,[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(22,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(13))
                              -->(23,eval('&self',[nTimes,'True'],RET),depth(13))
                              -->(24,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(25,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(26,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(27,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(28,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(29,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(30,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(31,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(32,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(33,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(34,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(35,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(36,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(37,eval('&self',[nTimes,'True'],RET),depth(15))
                            -->(38,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(12))
                                -->(39,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(14))
                                -->(40,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(41,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(14))
                                -->(42,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(43,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(14))
                                -->(44,eval('&self',[nTimes,'True'],RET),depth(14))
                        -->(45,eval('&self',[[hylo,mapExpr,evalExpr,nTimes],'True'],RET),depth(10))
                          -->(46,eval('&self',[evalExpr,[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(47,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(13))
                              -->(48,eval('&self',[nTimes,'True'],RET),depth(13))
                              -->(49,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(50,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(51,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(52,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(53,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(54,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(55,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(56,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(57,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(58,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(59,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(60,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(61,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(62,eval('&self',[nTimes,'True'],RET),depth(15))
                            -->(63,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(12))
                                -->(64,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(14))
                                -->(65,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(66,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(14))
                                -->(67,eval('&self',[nTimes,'True'],RET),depth(14))
                                -->(68,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(14))
                                -->(69,eval('&self',[nTimes,'True'],RET),depth(14))
                      -->(70,eval('&self',['Plus',[evalExpr,[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']]],[evalExpr,[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']]]],RET),depth(9))
                          -->(71,eval('&self',[evalExpr,[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(72,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(13))
                              -->(73,eval('&self',[nTimes,'True'],RET),depth(13))
                              -->(74,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(75,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(76,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(77,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(78,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(79,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(80,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(81,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(82,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(83,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(84,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(85,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(86,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(87,eval('&self',[nTimes,'True'],RET),depth(15))
                          -->(88,eval('&self',[evalExpr,[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']]],RET),depth(11))
                              -->(89,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(13))
                              -->(90,eval('&self',[nTimes,'True'],RET),depth(13))
                              -->(91,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(92,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(93,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(94,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(95,eval('&self',[nTimes,'True'],RET),depth(15))
                                  -->(96,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(97,eval('&self',[nTimes,'True'],RET),depth(15))
                              -->(98,eval('&self',[mapExpr,[hylo,mapExpr,evalExpr,nTimes],[nTimes,'True']],RET),depth(13))
                                  -->(99,eval('&self',[hylo,mapExpr,evalExpr,nTimes],RET),depth(15))
                                  -->(100,eval('&self',[nTimes,'True'],RET),depth(15))
Switched off tracing. For a longer trace !(pragma! tracelen 101)); 
; EVAL TEST
; took 0.615 secs. (614.89 milliseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    ( (+ 
        (evalExpr 
          (mapExpr 
            (hylo mapExpr evalExpr nTimes) 
            (nTimes True))) 
        (evalExpr 
          (mapExpr 
            (hylo mapExpr evalExpr nTimes) 
            (nTimes True))))) 
    (9)))
</span>Deterministic: <span class="ansi33">
  (got 
    ( (+ 
        (evalExpr 
          (mapExpr 
            (hylo mapExpr evalExpr nTimes) 
            (nTimes True))) 
        (evalExpr 
          (mapExpr 
            (hylo mapExpr evalExpr nTimes) 
            (nTimes True))))) expected 
    (9))

</span>;; How to evaluate the structure, with access to the original expression (on top of the processed value)
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[diff,['Const',_]],['Fix',['Const',0]]])
</span><span class="ansi38-255165000">  (= 
    (diff 
      (Const $_)) 
    (Fix 
      (Const 0)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[diff,['Var',_]],['Fix',['Const',1]]])
</span><span class="ansi38-255165000">  (= 
    (diff 
      (Var $_)) 
    (Fix 
      (Const 1)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[diff,['Plus',[',',Dx,X],[',',Dy,Y]]],['Fix',['Plus',Dx,Dy]]])
</span><span class="ansi38-255165000">  (= 
    (diff 
      (Plus 
        (and $Dx $X) 
        (and $Dy $Y))) 
    (Fix 
      (Plus $Dx $Dy)))
</span>

;; (= (diff (Times (, $dx $x) (, $dy $y))) (Fix (Plus (Fix (Times $dx $y)) (Fix (Times $dy $x)))))
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!((para mapExpr diff) 
  (Fix 
    (Plus 
      (Fix 
        (Var X)) 
      (Fix 
        (Const 1)))))
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  ( (para mapExpr diff) 
    (Fix 
      (Plus 
        (Fix 
          (Var X)) 
        (Fix 
          (Const 1))))) 
  ( (diff 
      (mapExpr 
        (para_pair mapExpr diff) 
        (unFix 
          (Fix 
            (Plus 
              (Fix 
                (Var X)) 
              (Fix 
                (Const 1)))))))))

</span><span class="ansi38-250144246">; !(
  (para mapExpr diff) 
  (Fix 
    (Plus 
      (Fix 
        (Var X)) 
      (Fix 
        (Const 1)))))
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',[[para,mapExpr,diff],['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]],OUT).

</span>      -->(0,eval('&self',[assertEqualToResult,[[para,mapExpr,diff],['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]],[[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]]]]],RET),depth(1))
<h3 id="EXAMPLES.EXPRESSION.05">;; EXAMPLES.EXPRESSION.05</h3>
          -->(1,eval('&self',[[para,mapExpr,diff],['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]],RET),depth(3))
            -->(2,eval('&self',[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]]],RET),depth(4))
                -->(3,eval('&self',[para_pair,mapExpr,diff],RET),depth(6))
                -->(4,eval('&self',['Var','X'],RET),depth(6))
                -->(5,eval('&self',['Const',1],RET),depth(6))
                -->(6,eval('&self',[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]],RET),depth(6))
                    -->(7,eval('&self',[para_pair,mapExpr,diff],RET),depth(8))
                    -->(8,eval('&self',['Var','X'],RET),depth(8))
                    -->(9,eval('&self',['Const',1],RET),depth(8))
                    -->(10,eval('&self',[para_pair,mapExpr,diff],RET),depth(8))
                    -->(11,eval('&self',[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]],RET),depth(8))
                      -->(12,eval('&self',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]],RET),depth(9))
                          -->(13,eval('&self',['Fix',['Var','X']],RET),depth(11))
                              -->(14,eval('&self',['Var','X'],RET),depth(13))
                              -->(15,eval('&self',['Var','X'],RET),depth(13))
                          -->(16,eval('&self',['Fix',['Const',1]],RET),depth(11))
                              -->(17,eval('&self',['Const',1],RET),depth(13))
                              -->(18,eval('&self',['Const',1],RET),depth(13))
                          -->(19,eval('&self',['Fix',['Var','X']],RET),depth(11))
                              -->(20,eval('&self',['Var','X'],RET),depth(13))
                              -->(21,eval('&self',['Var','X'],RET),depth(13))
                          -->(22,eval('&self',['Fix',['Const',1]],RET),depth(11))
                              -->(23,eval('&self',['Const',1],RET),depth(13))
                              -->(24,eval('&self',['Const',1],RET),depth(13))
                        -->(25,eval('&self',['Fix',['Var','X']],RET),depth(10))
                            -->(26,eval('&self',['Var','X'],RET),depth(12))
                            -->(27,eval('&self',['Var','X'],RET),depth(12))
                        -->(28,eval('&self',['Fix',['Const',1]],RET),depth(10))
                            -->(29,eval('&self',['Const',1],RET),depth(12))
                            -->(30,eval('&self',['Const',1],RET),depth(12))
                  -->(31,eval('&self',[mapExpr,[para_pair,mapExpr,diff],['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]],RET),depth(7))
                    -->(32,eval('&self',['Plus',[[para_pair,mapExpr,diff],['Fix',['Var','X']]],[[para_pair,mapExpr,diff],['Fix',['Const',1]]]],RET),depth(8))
                        -->(33,eval('&self',[[para_pair,mapExpr,diff],['Fix',['Var','X']]],RET),depth(10))
                          -->(34,eval('&self',[',',[[para,mapExpr,diff],['Fix',['Var','X']]],['Fix',['Var','X']]],RET),depth(11))
                              -->(35,eval('&self',[[para,mapExpr,diff],['Fix',['Var','X']]],RET),depth(13))
                                -->(36,eval('&self',[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Var','X']]]]],RET),depth(14))
                                    -->(37,eval('&self',[para_pair,mapExpr,diff],RET),depth(16))
                                    -->(38,eval('&self',['Var','X'],RET),depth(16))
                                    -->(39,eval('&self',[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Var','X']]]],RET),depth(16))
                                        -->(40,eval('&self',[para_pair,mapExpr,diff],RET),depth(18))
                                        -->(41,eval('&self',['Var','X'],RET),depth(18))
                                        -->(42,eval('&self',[para_pair,mapExpr,diff],RET),depth(18))
                                        -->(43,eval('&self',[unFix,['Fix',['Var','X']]],RET),depth(18))
                                          -->(44,eval('&self',['Var','X'],RET),depth(19))
                                      -->(45,eval('&self',[mapExpr,[para_pair,mapExpr,diff],['Var','X']],RET),depth(17))
                                        -->(46,eval('&self',['Var','X'],RET),depth(18))
                                  -->(47,eval('&self',[diff,['Var','X']],RET),depth(15))
                                    -->(48,eval('&self',['Fix',['Const',1]],RET),depth(16))
                                        -->(49,eval('&self',['Const',1],RET),depth(18))
                                        -->(50,eval('&self',['Const',1],RET),depth(18))
                                      -->(51,eval('&self',['Const',1],RET),depth(17))
                                    -->(52,eval('&self',['Const',1],RET),depth(16))
                                  -->(53,eval('&self',['Const',1],RET),depth(15))
                              -->(54,eval('&self',['Fix',['Var','X']],RET),depth(13))
                                  -->(55,eval('&self',['Var','X'],RET),depth(15))
                                  -->(56,eval('&self',['Var','X'],RET),depth(15))
                        -->(57,eval('&self',[[para_pair,mapExpr,diff],['Fix',['Const',1]]],RET),depth(10))
                          -->(58,eval('&self',[',',[[para,mapExpr,diff],['Fix',['Const',1]]],['Fix',['Const',1]]],RET),depth(11))
                              -->(59,eval('&self',[[para,mapExpr,diff],['Fix',['Const',1]]],RET),depth(13))
                                -->(60,eval('&self',[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Const',1]]]]],RET),depth(14))
                                    -->(61,eval('&self',[para_pair,mapExpr,diff],RET),depth(16))
                                    -->(62,eval('&self',['Const',1],RET),depth(16))
                                    -->(63,eval('&self',[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Const',1]]]],RET),depth(16))
                                        -->(64,eval('&self',[para_pair,mapExpr,diff],RET),depth(18))
                                        -->(65,eval('&self',['Const',1],RET),depth(18))
                                        -->(66,eval('&self',[para_pair,mapExpr,diff],RET),depth(18))
                                        -->(67,eval('&self',[unFix,['Fix',['Const',1]]],RET),depth(18))
                                          -->(68,eval('&self',['Const',1],RET),depth(19))
                                      -->(69,eval('&self',[mapExpr,[para_pair,mapExpr,diff],['Const',1]],RET),depth(17))
                                        -->(70,eval('&self',['Const',1],RET),depth(18))
                                  -->(71,eval('&self',[diff,['Const',1]],RET),depth(15))
                                    -->(72,eval('&self',['Fix',['Const',0]],RET),depth(16))
                                        -->(73,eval('&self',['Const',0],RET),depth(18))
                                        -->(74,eval('&self',['Const',0],RET),depth(18))
                                      -->(75,eval('&self',['Const',0],RET),depth(17))
                                    -->(76,eval('&self',['Const',0],RET),depth(16))
                                  -->(77,eval('&self',['Const',0],RET),depth(15))
                              -->(78,eval('&self',['Fix',['Const',1]],RET),depth(13))
                                  -->(79,eval('&self',['Const',1],RET),depth(15))
                                  -->(80,eval('&self',['Const',1],RET),depth(15))
                      -->(81,eval('&self',['Plus','True','True'],RET),depth(9))
              -->(82,eval('&self',[diff,['Plus','True','True']],RET),depth(5))
                  -->(83,eval('&self',['Plus','True','True'],RET),depth(7))
                  -->(84,eval('&self',['Plus','True','True'],RET),depth(7))
                  -->(85,eval('&self',['Plus','True','True'],RET),depth(7))
                -->(86,eval('&self',['Plus','True','True'],RET),depth(6))
              -->(87,eval('&self',['Plus','True','True'],RET),depth(5))
                                  <--(71,retval(['Fix',['Const',0]]))
                                      <--(69,retval(['Const',1]))
                                        <--(67,retval(['Const',1]))
                                    <--(63,retval([mapExpr,[para_pair,mapExpr,diff],['Const',1]]))
                                <--(60,retval([diff,['Const',1]]))
                              <--(59,retval([diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Const',1]]]]]))
                          <--(58,retval('True'))
                        <--(57,retval([',',[[para,mapExpr,diff],['Fix',['Const',1]]],['Fix',['Const',1]]]))
                                  <--(47,retval(['Fix',['Const',1]]))
                                      <--(45,retval(['Var','X']))
                                        <--(43,retval(['Var','X']))
                                    <--(39,retval([mapExpr,[para_pair,mapExpr,diff],['Var','X']]))
                                <--(36,retval([diff,['Var','X']]))
                              <--(35,retval([diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Var','X']]]]]))
                          <--(34,retval('True'))
                        <--(33,retval([',',[[para,mapExpr,diff],['Fix',['Var','X']]],['Fix',['Var','X']]]))
                    <--(32,retval(['Plus','True','True']))
                  <--(31,retval(['Plus',[[para_pair,mapExpr,diff],['Fix',['Var','X']]],[[para_pair,mapExpr,diff],['Fix',['Const',1]]]]))
                    <--(11,retval(['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]))
                <--(6,retval([mapExpr,[para_pair,mapExpr,diff],['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]))
            <--(2,retval([diff,['Plus','True','True']]))
          <--(1,retval([diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]]]))
; 
; EVAL TEST
; took 0.084 secs. (83.92 milliseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    ( (diff 
        (Plus True True))) 
    ( (diff 
        (mapExpr 
          (para_pair mapExpr diff) 
          (unFix 
            (Fix 
              (Plus 
                (Fix 
                  (Var X)) 
                (Fix 
                  (Const 1))))))))))
</span>      <--(0,retval([got,[[diff,['Plus','True','True']]],expected,[[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]]]]]))
        -->(88,eval('&self',[got,[[diff,['Plus','True','True']]],expected,[[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]]]]],RET),depth(2))
            -->(89,eval('&self',[[diff,['Plus','True','True']]],RET),depth(4))
                -->(90,eval('&self',[diff,['Plus','True','True']],RET),depth(6))
                    -->(91,eval('&self',['Plus','True','True'],RET),depth(8))
                    -->(92,eval('&self',['Plus','True','True'],RET),depth(8))
                    -->(93,eval('&self',['Plus','True','True'],RET),depth(8))
            -->(94,eval('&self',[[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]]]],RET),depth(4))
                -->(95,eval('&self',[diff,[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]]],RET),depth(6))
                    -->(96,eval('&self',[para_pair,mapExpr,diff],RET),depth(8))
                    -->(97,eval('&self',['Var','X'],RET),depth(8))
                    -->(98,eval('&self',['Const',1],RET),depth(8))
                    -->(99,eval('&self',[mapExpr,[para_pair,mapExpr,diff],[unFix,['Fix',['Plus',['Fix',['Var','X']],['Fix',['Const',1]]]]]],RET),depth(8))
                        -->(100,eval('&self',[para_pair,mapExpr,diff],RET),depth(10))
Switched off tracing. For a longer trace !(pragma! tracelen 101))
NDet Result(0): <span class="ansi33">
  (got 
    ( (diff 
        (Plus True True))) expected 
    ( (diff 
        (Plus True True))))

</span>;; Unfold shorthand definitions like "1p" for "1 + X" into a Bind-Pure tree of expressions
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[expand,[1,p,X]],['Plus',['Bind',['Const',1]],['Pure',X]]])
</span><span class="ansi38-255165000">  (= 
    (expand 
      (1 p $X)) 
    (Plus 
      (Bind 
        (Const 1)) 
      (Pure $X)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[expand,[2,t,X]],['Plus',['Pure',X],['Pure',X]]])
</span><span class="ansi38-255165000">  (= 
    (expand 
      (2 t $X)) 
    (Plus 
      (Pure $X) 
      (Pure $X)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[=,[expand,['Fix',X]],X])
</span><span class="ansi38-255165000">  (= 
    (expand 
      (Fix $X)) $X)
</span>

;; Everything this can process
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!(match &self 
  (= 
    (expand $X) $Y) $X)
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  (match &self 
    (= 
      (expand $X) $Y) $X) 
  ( (Fix $Y) 
    (2 t $X_C35_534) 
    (1 p $X_C35_535)))

</span><span class="ansi38-250144246">; !(match &self 
  (= 
    (expand $X) $Y) $X)
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',[match,'&self',[=,[expand,X],Y],X],OUT).

</span>      -->(0,eval('&self',[assertEqualToResult,[match,'&self',[=,[expand,_178902],_179186],_178902],[['Fix',_179186],[2,t,_180078],[1,p,_180434]]],RET),depth(1))
<h3 id="EXAMPLES.EXPRESSION.06">;; EXAMPLES.EXPRESSION.06</h3>
          -->(1,eval('&self',[match,'&self',[=,[expand,_178902],_179186],_178902],RET),depth(3))
              -->(2,eval('&self',[1,p,_191740],RET),depth(5))
            -->(3,eval('&self',[1,p,_191740],RET),depth(4))
              -->(4,eval('&self',[2,t,_191980],RET),depth(5))
            -->(5,eval('&self',[2,t,_191980],RET),depth(4))
              -->(6,eval('&self',['Fix',_179186],RET),depth(5))
          <--(1,retval(['Fix',_287238]))
            -->(7,eval('&self',['Fix',_179186],RET),depth(4))
; 
; EVAL TEST
; took 0.005 secs. (4.71 milliseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough_for_test  
    ( (1 p $_180434) 
      (2 t $_180078) 
      (Fix $_179186)) 
    ( (1 p $_180434) 
      (2 t $_180078) 
      (Fix $_179186))))
</span>      <--(0,retval('Empty'))
Deterministic: <span class="ansi33">Empty

</span>;; Expand the definition
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!((futu mapExpr expand) 
  (2 t 
    (1 p 
      (Fix 
        (Var X)))))
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  ( (futu mapExpr expand) 
    (2 t 
      (1 p 
        (Fix 
          (Var X))))) 
  ( (Fix 
      (Plus 
        (Fix 
          (Plus 
            (Fix 
              (Const 1)) 
            (Fix 
              (Var X)))) 
        (Fix 
          (Plus 
            (Fix 
              (Const 1)) 
            (Fix 
              (Var X))))))))

</span><span class="ansi38-250144246">; !(
  (futu mapExpr expand) 
  (2 t 
    (1 p 
      (Fix 
        (Var X)))))
</span><span class="ansi38-218112214">% DEBUG: eval_args(100,'&self',[[futu,mapExpr,expand],[2,t,[1,p,['Fix',['Var','X']]]]],OUT).

</span>      -->(0,eval('&self',[assertEqualToResult,[[futu,mapExpr,expand],[2,t,[1,p,['Fix',['Var','X']]]]],[['Fix',['Plus',['Fix',['Plus',['Fix',['Const',1]],['Fix',['Var','X']]]],['Fix',['Plus',['Fix',['Const',1]],['Fix',['Var','X']]]]]]]],RET),depth(1))
<h3 id="EXAMPLES.EXPRESSION.07">;; EXAMPLES.EXPRESSION.07</h3>
          -->(1,eval('&self',[[futu,mapExpr,expand],[2,t,[1,p,['Fix',['Var','X']]]]],RET),depth(3))
            -->(2,eval('&self',['Fix',[mapExpr,[futu_picking,mapExpr,expand],[expand,[2,t,[1,p,['Fix',['Var','X']]]]]]],RET),depth(4))
                -->(3,eval('&self',[mapExpr,[futu_picking,mapExpr,expand],[expand,[2,t,[1,p,['Fix',['Var','X']]]]]],RET),depth(6))
                    -->(4,eval('&self',[futu_picking,mapExpr,expand],RET),depth(8))
                    -->(5,eval('&self',['Var','X'],RET),depth(8))
                    -->(6,eval('&self',[futu_picking,mapExpr,expand],RET),depth(8))
                    -->(7,eval('&self',[expand,[2,t,[1,p,['Fix',['Var','X']]]]],RET),depth(8))
                      -->(8,eval('&self',['Plus',['Pure',[1,p,['Fix',['Var','X']]]],['Pure',[1,p,['Fix',['Var','X']]]]],RET),depth(9))
                          -->(9,eval('&self',['Pure',[1,p,['Fix',['Var','X']]]],RET),depth(11))
                              -->(10,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(11,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(12,eval('&self',['Var','X'],RET),depth(17))
                                      -->(13,eval('&self',['Var','X'],RET),depth(17))
                                  -->(14,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(15,eval('&self',['Var','X'],RET),depth(17))
                                      -->(16,eval('&self',['Var','X'],RET),depth(17))
                              -->(17,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(18,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(19,eval('&self',['Var','X'],RET),depth(17))
                                      -->(20,eval('&self',['Var','X'],RET),depth(17))
                                  -->(21,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(22,eval('&self',['Var','X'],RET),depth(17))
                                      -->(23,eval('&self',['Var','X'],RET),depth(17))
                          -->(24,eval('&self',['Pure',[1,p,['Fix',['Var','X']]]],RET),depth(11))
                              -->(25,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(26,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(27,eval('&self',['Var','X'],RET),depth(17))
                                      -->(28,eval('&self',['Var','X'],RET),depth(17))
                                  -->(29,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(30,eval('&self',['Var','X'],RET),depth(17))
                                      -->(31,eval('&self',['Var','X'],RET),depth(17))
                              -->(32,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(33,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(34,eval('&self',['Var','X'],RET),depth(17))
                                      -->(35,eval('&self',['Var','X'],RET),depth(17))
                                  -->(36,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(37,eval('&self',['Var','X'],RET),depth(17))
                                      -->(38,eval('&self',['Var','X'],RET),depth(17))
                          -->(39,eval('&self',['Pure',[1,p,['Fix',['Var','X']]]],RET),depth(11))
                              -->(40,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(41,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(42,eval('&self',['Var','X'],RET),depth(17))
                                      -->(43,eval('&self',['Var','X'],RET),depth(17))
                                  -->(44,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(45,eval('&self',['Var','X'],RET),depth(17))
                                      -->(46,eval('&self',['Var','X'],RET),depth(17))
                              -->(47,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(48,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(49,eval('&self',['Var','X'],RET),depth(17))
                                      -->(50,eval('&self',['Var','X'],RET),depth(17))
                                  -->(51,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(52,eval('&self',['Var','X'],RET),depth(17))
                                      -->(53,eval('&self',['Var','X'],RET),depth(17))
                          -->(54,eval('&self',['Pure',[1,p,['Fix',['Var','X']]]],RET),depth(11))
                              -->(55,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(56,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(57,eval('&self',['Var','X'],RET),depth(17))
                                      -->(58,eval('&self',['Var','X'],RET),depth(17))
                                  -->(59,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(60,eval('&self',['Var','X'],RET),depth(17))
                                      -->(61,eval('&self',['Var','X'],RET),depth(17))
                              -->(62,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(13))
                                  -->(63,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(64,eval('&self',['Var','X'],RET),depth(17))
                                      -->(65,eval('&self',['Var','X'],RET),depth(17))
                                  -->(66,eval('&self',['Fix',['Var','X']],RET),depth(15))
                                      -->(67,eval('&self',['Var','X'],RET),depth(17))
                                      -->(68,eval('&self',['Var','X'],RET),depth(17))
                        -->(69,eval('&self',['Pure',[1,p,['Fix',['Var','X']]]],RET),depth(10))
                            -->(70,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(12))
                                -->(71,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(72,eval('&self',['Var','X'],RET),depth(16))
                                    -->(73,eval('&self',['Var','X'],RET),depth(16))
                                -->(74,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(75,eval('&self',['Var','X'],RET),depth(16))
                                    -->(76,eval('&self',['Var','X'],RET),depth(16))
                            -->(77,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(12))
                                -->(78,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(79,eval('&self',['Var','X'],RET),depth(16))
                                    -->(80,eval('&self',['Var','X'],RET),depth(16))
                                -->(81,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(82,eval('&self',['Var','X'],RET),depth(16))
                                    -->(83,eval('&self',['Var','X'],RET),depth(16))
                        -->(84,eval('&self',['Pure',[1,p,['Fix',['Var','X']]]],RET),depth(10))
                            -->(85,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(12))
                                -->(86,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(87,eval('&self',['Var','X'],RET),depth(16))
                                    -->(88,eval('&self',['Var','X'],RET),depth(16))
                                -->(89,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(90,eval('&self',['Var','X'],RET),depth(16))
                                    -->(91,eval('&self',['Var','X'],RET),depth(16))
                            -->(92,eval('&self',[1,p,['Fix',['Var','X']]],RET),depth(12))
                                -->(93,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(94,eval('&self',['Var','X'],RET),depth(16))
                                    -->(95,eval('&self',['Var','X'],RET),depth(16))
                                -->(96,eval('&self',['Fix',['Var','X']],RET),depth(14))
                                    -->(97,eval('&self',['Var','X'],RET),depth(16))
                                    -->(98,eval('&self',['Var','X'],RET),depth(16))
                  -->(99,eval('&self',[mapExpr,[futu_picking,mapExpr,expand],['Plus',['Pure',[1,p,['Fix',['Var','X']]]],['Pure',[1,p,['Fix',['Var','X']]]]]],RET),depth(7))
                    -->(100,eval('&self',['Plus',[[futu_picking,mapExpr,expand],['Pure',[1,p,['Fix',['Var','X']]]]],[[futu_picking,mapExpr,expand],['Pure',[1,p,['Fix',['Var','X']]]]]],RET),depth(8))
Switched off tracing. For a longer trace !(pragma! tracelen 101)); 
; EVAL TEST
; took 1.324 secs. (1323.72 milliseconds) 
<span class="ansi31">(@ loonit_failureR 
  (equal_enough_for_test  
    ( (Fix 
        (Plus 
          (Fix 
            (Plus 
              ( (futu_picking mapExpr expand) 
                (Bind 
                  (Const 1))) 
              (Fix 
                (Var X)))) 
          (Fix 
            (Plus 
              ( (futu_picking mapExpr expand) 
                (Bind 
                  (Const 1))) 
              (Fix 
                (Var X))))))) 
    ( (Fix 
        (Plus 
          (Fix 
            (Plus 
              (Fix 
                (Const 1)) 
              (Fix 
                (Var X)))) 
          (Fix 
            (Plus 
              (Fix 
                (Const 1)) 
              (Fix 
                (Var X)))))))))
</span>Deterministic: <span class="ansi33">
  (got 
    ( (Fix 
        (Plus 
          (Fix 
            (Plus 
              ( (futu_picking mapExpr expand) 
                (Bind 
                  (Const 1))) 
              (Fix 
                (Var X)))) 
          (Fix 
            (Plus 
              ( (futu_picking mapExpr expand) 
                (Bind 
                  (Const 1))) 
              (Fix 
                (Var X))))))) expected 
    ( (Fix 
        (Plus 
          (Fix 
            (Plus 
              (Fix 
                (Const 1)) 
              (Fix 
                (Var X)))) 
          (Fix 
            (Plus 
              (Fix 
                (Const 1)) 
              (Fix 
                (Var X))))))))

</span><span class="ansi32">% 35,272,615 inferences, 5.247 CPU in 5.247 seconds (100% CPU, 6722004 Lips)
</span> (@ = "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta" 0)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 1
</span><span class="ansi31">Failures: 5
</span><br/><a href="https://github.com/logicmoo/vspace-metta/blob/main/MeTTaLog.md">Return to Summaries</a><br/>
doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/metta-examples/recursion-schemes/src/examples/expression.metta.html" )

</pre>
</body>

</html>
