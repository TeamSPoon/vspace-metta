<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi36 { color: #00aaaa; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-250144246 { color: #FA90F6; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
Script started on 2024-01-09 15:26:26-08:00 [TERM="xterm" TTY="/dev/pts/0" COLUMNS="152" LINES="150"]
; init_why(before_boot,after('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/metta_vspace/pyswip/metta_interp.pl')).
; init_phase(after_load).
; init_phase(restore_state).
; libswipl: [/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/Sav.godlike.MeTTaLog,--,--python=enable,--timeout=10,--html,--repl=false,examples/extended_compat/hyperon-miner/utils/MinerUtils.metta,--halt=true]
;     (compiled_loon default)
%~   (run_vspace_server 3023)
;     (compiled_loon restore)
;    (compiled_loon goal)
; init_why(after_boot,program).
;    (compiled_loon program)
;   (began_loon toplevel)
;      (is_cmd_option python --python=enable enable)
;      (is_cmd_option timeout --timeout=10 10)
;       (is_cmd_option html --html True)
;       (is_cmd_option repl --repl=false False)

; (: user 
  (load_metta_file  &self examples/extended_compat/hyperon-miner/utils/MinerUtils.metta))
;                (track_load_into_file /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/hyperon-miner/utils/MinerUtils.metta)
;                              (load_answer_file /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/hyperon-miner/utils/MinerUtils.metta.answers /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/hyperon-miner/utils/MinerUtils.metta)
;                              (= 1 "[()]")
;                               (= 2 "[()]")
;                               (= 3 "[()]")
;                                (= 4 "0.13user 0.01system 0:00.15elapsed 98%CPU (0avgtext+0avgdata 33836maxresident)k")
;                                (= 4 "0inputs+0outputs (0major+3617minor)pagefaults 0swaps")
;;; Import Num
;; !(import! &self ../common/Num.metta)
;;; Define max
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[:,max,[->,'$VAR'(a),'$VAR'(a),'$VAR'(a)]])
</span><span class="ansi38-255165000">(: max 
  (-> $a $a $a))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[max,'$VAR'(x),'$VAR'(y)],[if,[>,'$VAR'(x),'$VAR'(y)],'$VAR'(x),'$VAR'(y)]])
</span><span class="ansi38-255165000">(= 
  (max $x $y) 
  (if 
    (> $x $y) $x $y))
</span>

;;; Define min
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[:,min,[->,'$VAR'(a),'$VAR'(a),'$VAR'(a)]])
</span><span class="ansi38-255165000">(: min 
  (-> $a $a $a))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[min,'$VAR'(x),'$VAR'(y)],[if,[<,'$VAR'(x),'$VAR'(y)],'$VAR'(x),'$VAR'(y)]])
</span><span class="ansi38-255165000">(= 
  (min $x $y) 
  (if 
    (< $x $y) $x $y))
</span>

;;; Tuple count grounded python function
;; !(extend-py! ../utils/helper)
;;; This is very slow, use the grounded python function instead
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['tuple-count','$VAR'(tuple)],[if,[==,'$VAR'(tuple),[]],0,[+,1,['tuple-count',['cdr-atom','$VAR'(tuple)]]]]])
</span><span class="ansi38-255165000">(= 
  (tuple-count $tuple) 
  (if 
    (== $tuple ()) 0 
    (+ 1 
      (tuple-count 
        (cdr-atom $tuple)))))
</span>

;;; 
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['new-named-space','$VAR'(name)],[let,'$VAR'(space),['new-space'],['add-atom','&self',[=,['named-space','$VAR'(name)],'$VAR'(space)]]]])
</span><span class="ansi38-255165000">(= 
  (new-named-space $name) 
  (let $space 
    (new-space) 
    (add-atom &self 
      (= 
        (named-space $name) $space))))
</span>

<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!(new-named-space Xspace)
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  (new-named-space Xspace) 
  (()))

</span><span class="ansi38-250144246">; !(new-named-space Xspace)
</span>;<h3 id="UTILS.MINERUTILS.01">;; UTILS.MINERUTILS.01</h3>
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['named-space','Xspace'],'Space'([])])
</span><span class="ansi38-255165000">(= 
  (named-space Xspace) 
  (Space  ()))
</span>

; 
; EVAL TEST
; took 0.000315 secs. (314.83 microseconds) 
<span class="ansi36">(loonit_success 
  (equal_enough_for_test  () 
    (())))
</span>Deterministic: <span class="ansi33">Empty

</span>; Execution took 0.000669 secs. (668.70 microseconds) 
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!(new-named-space Yspace)
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  (new-named-space Yspace) 
  (()))

</span><span class="ansi38-250144246">; !(new-named-space Yspace)
</span>;<h3 id="UTILS.MINERUTILS.02">;; UTILS.MINERUTILS.02</h3>
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['named-space','Yspace'],'Space'([])])
</span><span class="ansi38-255165000">(= 
  (named-space Yspace) 
  (Space  ()))
</span>

; 
; EVAL TEST
; took 0.000254 secs. (254.04 microseconds) 
<span class="ansi36">(loonit_success 
  (equal_enough_for_test  () 
    (())))
</span>Deterministic: <span class="ansi33">Empty

</span>; Execution took 0.000485 secs. (484.94 microseconds) 
<span class="ansi38-255165000">;; In file as:  
</span><span class="ansi1 ansi38-255238088">!(new-named-space Linkspace)
</span>;; To unit test case:
<span class="ansi38-013099040">!(assertEqualToResult 
  (new-named-space Linkspace) 
  (()))

</span><span class="ansi38-250144246">; !(new-named-space Linkspace)
</span>;<h3 id="UTILS.MINERUTILS.03">;; UTILS.MINERUTILS.03</h3>
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['named-space','Linkspace'],'Space'([])])
</span><span class="ansi38-255165000">(= 
  (named-space Linkspace) 
  (Space  ()))
</span>

; 
; EVAL TEST
; took 0.000250 secs. (249.98 microseconds) 
<span class="ansi36">(loonit_success 
  (equal_enough_for_test  () 
    (())))
</span>Deterministic: <span class="ansi33">Empty

</span>; Execution took 0.000487 secs. (487.13 microseconds) 
;;; Gathers unique valuation sets on a separate space. For instance, 
;;; given the input (Inheritance Allen man):
;;;    Linkspace contains Inheritance
;;;    Xspace contains (Inheritance Allen)
;;;    Yspace contains (Inheritance man)
;;; The X and Y values are linked to their respective link types to avoid 
;;; creating patterns (during specialization) that do not exist in the space.
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['add-valuation','$VAR'(link),'$VAR'(x),'$VAR'(y)],[case,[match,['named-space','Xspace'],'$VAR'(x),'$VAR'(x)],[['%void%',['add-atom',['named-space','Xspace'],['$VAR'(link),'$VAR'(x)]]]]]])
</span><span class="ansi38-255165000">(= 
  (add-valuation $link $x $y) 
  (case 
    (match 
      (named-space Xspace) $x $x) 
    ( (%void% 
        (add-atom 
          (named-space Xspace) 
          ($link $x))))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['add-valuation','$VAR'(link),'$VAR'(x),'$VAR'(y)],[case,[match,['named-space','Yspace'],'$VAR'(y),'$VAR'(y)],[['%void%',['add-atom',['named-space','Yspace'],['$VAR'(link),'$VAR'(y)]]]]]])
</span><span class="ansi38-255165000">(= 
  (add-valuation $link $x $y) 
  (case 
    (match 
      (named-space Yspace) $y $y) 
    ( (%void% 
        (add-atom 
          (named-space Yspace) 
          ($link $y))))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['add-valuation','$VAR'(link),'$VAR'(x),'$VAR'(y)],[case,[match,['named-space','Linkspace'],'$VAR'(link),'$VAR'(link)],[['%void%',['add-atom',['named-space','Linkspace'],'$VAR'(link)]]]]])
</span><span class="ansi38-255165000">(= 
  (add-valuation $link $x $y) 
  (case 
    (match 
      (named-space Linkspace) $link $link) 
    ( (%void% 
        (add-atom 
          (named-space Linkspace) $link)))))
</span>

;;; Extract the valuation sets of a given db
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['extract-valuation','$VAR'(dbspace)],[match,'$VAR'(dbspace),['$VAR'(link),X,Y],['add-valuation','$VAR'(link),X,Y]]])
</span><span class="ansi38-255165000">(= 
  (extract-valuation $dbspace) 
  (match $dbspace 
    ($link $X $Y) 
    (add-valuation $link $X $Y)))
</span>

;;; Get unique link typess
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['get-links'],[match,['named-space','Linkspace'],'$VAR'(link),'$VAR'(link)]])
</span><span class="ansi38-255165000">(= 
  (get-links) 
  (match 
    (named-space Linkspace) $link $link))
</span>

;;; Specialize a pattern
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[specialize,'$VAR'(link),Xvar,Yvar],[case,[match,['named-space','Yspace'],['$VAR'(link),'$VAR'(y)],'$VAR'(y)],[['$VAR'(r),['$VAR'(link),Xvar,'$VAR'(r)]],['%void%',[superpose,[]]]]]])
</span><span class="ansi38-255165000">(= 
  (specialize $link $Xvar $Yvar) 
  (case 
    (match 
      (named-space Yspace) 
      ($link $y) $y) 
    ( ($r 
        ($link $Xvar $r)) 
      (%void% 
        (superpose ())))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[specialize,'$VAR'(link),Xvar,Yvar],[case,[match,['named-space','Xspace'],['$VAR'(link),'$VAR'(x)],'$VAR'(x)],[['$VAR'(r),['$VAR'(link),'$VAR'(r),Yvar]],['%void%',[superpose,[]]]]]])
</span><span class="ansi38-255165000">(= 
  (specialize $link $Xvar $Yvar) 
  (case 
    (match 
      (named-space Xspace) 
      ($link $x) $x) 
    ( ($r 
        ($link $r $Yvar)) 
      (%void% 
        (superpose ())))))
</span>

;;; Ignore non-strongly connected components
;;; e.g (, (Inheritance $Xvar "Concept man") (Inheritance "Concept Abe" $Yvar))
;;; is not strongly connected
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['get-var',['$VAR'(link),'$VAR'(a),'$VAR'(b)],Xvar,Yvar],[if,[==,'$VAR'(link),','],[superpose,[]],1]])
</span><span class="ansi38-255165000">(= 
  (get-var 
    ($link $a $b) $Xvar $Yvar) 
  (if 
    (== $link ,) 
    (superpose ()) 1))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['get-var',[',',['$VAR'(link),'$VAR'(a),'$VAR'(b)],['$VAR'(link),'$VAR'(c),'$VAR'(d)]],Xvar,Yvar],[if,[and,[==,'$VAR'(a),'$VAR'(c)],[==,'$VAR'(b),'$VAR'(d)]],'None',[if,[and,[==,'$VAR'(a),Xvar],[==,'$VAR'(c),Xvar]],Xvar,[if,[and,[==,'$VAR'(b),Yvar],[==,'$VAR'(d),Yvar]],Yvar,'None']]]])
</span><span class="ansi38-255165000">(= 
  (get-var 
    (, 
      ($link $a $b) 
      ($link $c $d)) $Xvar $Yvar) 
  (if 
    (and 
      (== $a $c) 
      (== $b $d)) None 
    (if 
      (and 
        (== $a $Xvar) 
        (== $c $Xvar)) $Xvar 
      (if 
        (and 
          (== $b $Yvar) 
          (== $d $Yvar)) $Yvar None))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['get-var',[',',['$VAR'(link),'$VAR'(a),'$VAR'(b)],['$VAR'(link),'$VAR'(c),'$VAR'(d)],['$VAR'(link),'$VAR'(e),'$VAR'(f)]],Xvar,Yvar],[if,[or,[and,[==,'$VAR'(a),'$VAR'(e)],[==,'$VAR'(b),'$VAR'(f)]],[and,[==,'$VAR'(c),'$VAR'(e)],[==,'$VAR'(d),'$VAR'(f)]]],'None',['let*',[['$VAR'(p1p3),['get-var',[',',['$VAR'(link),'$VAR'(a),'$VAR'(b)],['$VAR'(link),'$VAR'(e),'$VAR'(f)]],Xvar,Yvar]],['$VAR'(p2p3),['get-var',[',',['$VAR'(link),'$VAR'(c),'$VAR'(d)],['$VAR'(link),'$VAR'(e),'$VAR'(f)]],Xvar,Yvar]]],[if,[or,[==,'$VAR'(p1p3),'None'],[==,'$VAR'(p2p3),'None']],'None','$VAR'(p1p3)]]]])
</span><span class="ansi38-255165000">(= 
  (get-var 
    (, 
      ($link $a $b) 
      ($link $c $d) 
      ($link $e $f)) $Xvar $Yvar) 
  (if 
    (or 
      (and 
        (== $a $e) 
        (== $b $f)) 
      (and 
        (== $c $e) 
        (== $d $f))) None 
    (let* 
      ( ($p1p3 
          (get-var 
            (, 
              ($link $a $b) 
              ($link $e $f)) $Xvar $Yvar)) 
        ($p2p3 
          (get-var 
            (, 
              ($link $c $d) 
              ($link $e $f)) $Xvar $Yvar))) 
      (if 
        (or 
          (== $p1p3 None) 
          (== $p2p3 None)) None $p1p3))))
</span>

;;; Count the number of instances of a given pattern
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[count,'$VAR'(pattern),'$VAR'(dbspace),Xvar,Yvar],[let,'$VAR'(result),[let,'$VAR'(var),['get-var','$VAR'(pattern),Xvar,Yvar],[if,[==,'$VAR'(var),'None'],[],[collapse,[match,'$VAR'(dbspace),'$VAR'(pattern),'$VAR'(var)]]]],['tuple-count','$VAR'(result)]]])
</span><span class="ansi38-255165000">(= 
  (count $pattern $dbspace $Xvar $Yvar) 
  (let $result 
    (let $var 
      (get-var $pattern $Xvar $Yvar) 
      (if 
        (== $var None) () 
        (collapse 
          (match $dbspace $pattern $var)))) 
    (tuple-count $result)))
</span>

;;; Return candidate patterns in the format (candidate pattern, count) 
;;; for patterns with a support value >= the minimum support.
;;; the count here will later be used for calculating surprisingness.
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[support,'$VAR'(pattern),'$VAR'(dbspace),'$VAR'(minsup),Xvar,Yvar],[let,'$VAR'(cnt),[count,'$VAR'(pattern),'$VAR'(dbspace),Xvar,Yvar],[if,[>,[+,'$VAR'(cnt),1],'$VAR'(minsup)],[candidate,'$VAR'(pattern),'$VAR'(cnt)],[superpose,[]]]]])
</span><span class="ansi38-255165000">(= 
  (support $pattern $dbspace $minsup $Xvar $Yvar) 
  (let $cnt 
    (count $pattern $dbspace $Xvar $Yvar) 
    (if 
      (> 
        (+ $cnt 1) $minsup) 
      (candidate $pattern $cnt) 
      (superpose ()))))
</span>

;;; Extract a pattern from a Candidate pattern of form
;;; (candidate pattern count)
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['get-pattern','$VAR'(cnpattern)],[let,[candidate,'$VAR'(pattern),'$VAR'(cnt)],'$VAR'(cnpattern),'$VAR'(pattern)]])
</span><span class="ansi38-255165000">(= 
  (get-pattern $cnpattern) 
  (let 
    (candidate $pattern $cnt) $cnpattern $pattern))
</span>

;;; flatten combination
;;; TODO: apply reduction rule
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[',',[',','$VAR'(a),'$VAR'(b)],'$VAR'(c)],[',','$VAR'(a),'$VAR'(b),'$VAR'(c)]])
</span><span class="ansi38-255165000">(= 
  (, 
    (, $a $b) $c) 
  (, $a $b $c))
</span>

;;; Get universe size of a given db
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,['get-universe-size','$VAR'(dbspace)],['add-atom','&self',[=,['universe-size'],[let,'$VAR'(u),[collapse,[match,'$VAR'(dbspace),'$VAR'(x),1]],['tuple-count','$VAR'(u)]]]]])
</span><span class="ansi38-255165000">(= 
  (get-universe-size $dbspace) 
  (add-atom &self 
    (= 
      (universe-size) 
      (let $u 
        (collapse 
          (match $dbspace $x 1)) 
        (tuple-count $u)))))
</span>

;;; Probability formula
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[prob,'$VAR'(count)],[/,'$VAR'(count),['universe-size']]])
</span><span class="ansi38-255165000">(= 
  (prob $count) 
  (/ $count 
    (universe-size)))
</span>

;;; iSurprisingness formula
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=asserted_metta_atom('&self',[=,[iSurprisingness,'$VAR'(pattern),'$VAR'(dbspace)],[case,'$VAR'(pattern),[[[candidate,[',','$VAR'(p1),'$VAR'(p2)],'$VAR'(cnt)],['let*',[['$VAR'(pp1),[prob,[count,'$VAR'(p1),'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(pp2),[prob,[count,'$VAR'(p2),'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(p1p2),[*,'$VAR'(pp1),'$VAR'(pp2)]],['$VAR'(p),[prob,'$VAR'(cnt)]]],[/,[max,[-,'$VAR'(p),'$VAR'(p1p2)],[-,'$VAR'(p1p2),'$VAR'(p)]],'$VAR'(p)]]],[[candidate,[',','$VAR'(p1),'$VAR'(p2),'$VAR'(p3)],'$VAR'(cnt)],['let*',[['$VAR'(pp1),[prob,[count,'$VAR'(p1),'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(pp2),[prob,[count,'$VAR'(p2),'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(pp3),[prob,[count,'$VAR'(p3),'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(pp1p2),[prob,[count,[',','$VAR'(p1),'$VAR'(p2)],'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(pp1p3),[prob,[count,[',','$VAR'(p1),'$VAR'(p3)],'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(pp2p3),[prob,[count,[',','$VAR'(p2),'$VAR'(p3)],'$VAR'(dbspace),Xvar,Yvar]]],['$VAR'(maxP),[max,[*,'$VAR'(pp1p2),'$VAR'(pp3)],[max,[*,'$VAR'(pp1p3),'$VAR'(pp2)],[max,[*,'$VAR'(pp2p3),'$VAR'(pp1)],[*,'$VAR'(pp1),[*,'$VAR'(pp2),'$VAR'(pp3)]]]]]],['$VAR'(minP),[min,[*,'$VAR'(pp1p2),'$VAR'(pp3)],[min,[*,'$VAR'(pp1p3),'$VAR'(pp2)],[min,[*,'$VAR'(pp2p3),'$VAR'(pp1)],[*,'$VAR'(pp1),[*,'$VAR'(pp2),'$VAR'(pp3)]]]]]],['$VAR'(p),[prob,'$VAR'(cnt)]]],[/,[max,[-,'$VAR'(p),'$VAR'(maxP)],[-,'$VAR'(minP),'$VAR'(p)]],'$VAR'(p)]]],[_,0]]]])
</span><span class="ansi38-255165000">(= 
  (iSurprisingness $pattern $dbspace) 
  (case $pattern 
    ( ( (candidate 
          (, $p1 $p2) $cnt) 
        (let* 
          ( ($pp1 
              (prob 
                (count $p1 $dbspace $Xvar $Yvar))) 
            ($pp2 
              (prob 
                (count $p2 $dbspace $Xvar $Yvar))) 
            ($p1p2 
              (* $pp1 $pp2)) 
            ($p 
              (prob $cnt))) 
          (/ 
            (max 
              (- $p $p1p2) 
              (- $p1p2 $p)) $p))) 
      ( (candidate 
          (, $p1 $p2 $p3) $cnt) 
        (let* 
          ( ($pp1 
              (prob 
                (count $p1 $dbspace $Xvar $Yvar))) 
            ($pp2 
              (prob 
                (count $p2 $dbspace $Xvar $Yvar))) 
            ($pp3 
              (prob 
                (count $p3 $dbspace $Xvar $Yvar))) 
            ($pp1p2 
              (prob 
                (count 
                  (, $p1 $p2) $dbspace $Xvar $Yvar))) 
            ($pp1p3 
              (prob 
                (count 
                  (, $p1 $p3) $dbspace $Xvar $Yvar))) 
            ($pp2p3 
              (prob 
                (count 
                  (, $p2 $p3) $dbspace $Xvar $Yvar))) 
            ($maxP 
              (max 
                (* $pp1p2 $pp3) 
                (max 
                  (* $pp1p3 $pp2) 
                  (max 
                    (* $pp2p3 $pp1) 
                    (* $pp1 
                      (* $pp2 $pp3)))))) 
            ($minP 
              (min 
                (* $pp1p2 $pp3) 
                (min 
                  (* $pp1p3 $pp2) 
                  (min 
                    (* $pp2p3 $pp1) 
                    (* $pp1 
                      (* $pp2 $pp3)))))) 
            ($p 
              (prob $cnt))) 
          (/ 
            (max 
              (- $p $maxP) 
              (- $minP $p)) $p))) 
      ($_ 0))))
</span>

<span class="ansi32">% 380,571 inferences, 0.264 CPU in 0.264 seconds (100% CPU, 1440583 Lips)
</span>;                (= /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/extended_compat/hyperon-miner/utils/MinerUtils.metta 0)
<br/><a href="https://github.com/logicmoo/vspace-metta/blob/main/MeTTaLog.md">Return to Summaries</a><br/>
;       (is_cmd_option halt --halt=true True)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 3
</span><span class="ansi32">Failures: 0
</span><span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 3
</span><span class="ansi32">Failures: 0
</span>
Script done on 2024-01-09 15:26:27-08:00 [COMMAND_EXIT_CODE="7"]

</pre>
</body>

</html>
