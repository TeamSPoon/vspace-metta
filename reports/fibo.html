<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi38-000068000 { color: #004400; }
.ansi38-017068017 { color: #114411; }
.ansi38-000068000 { color: #004400; }
.ansi38-017068017 { color: #114411; }
.ansi38-000068000 { color: #004400; }
.ansi38-017068017 { color: #114411; }
.ansi38-000068000 { color: #004400; }
.ansi38-017068017 { color: #114411; }
.ansi38-000068000 { color: #004400; }
.ansi38-017068017 { color: #114411; }
.ansi38-000068000 { color: #004400; }
.ansi38-017068017 { color: #114411; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-000068000 { color: #004400; }
.ansi38-017068017 { color: #114411; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.metta")
;!(extend-py! metta_learner)
; these examples actually need the compiler!
<span class="ansi38-000068000">!(pragma! compile full)

</span><span class="ansi38-017068017">exec(A) :-
    true,
    u_assign(['pragma!', compile, full], A).

</span>; Evaluation took 0.071 ms. (71.40 microseconds) 
<span class="ansi33"> full

</span><span class="ansi38-000068000">!(pragma! trace-on-pass False)

</span><span class="ansi38-017068017">exec(Exec) :- 
  u_assign(['pragma!','trace-on-pass','False'],_250692)
</span>
; Evaluation took 0.075 ms. (74.70 microseconds) 
<span class="ansi33"> False

</span><span class="ansi38-000068000">!(pragma! trace-on-False True)

</span><span class="ansi38-017068017">exec(Exec) :- 
  is_True(_287204) , 
  u_assign(['pragma!','trace-on-fail',_287204],_286604)
</span>
; Evaluation took 0.046 ms. (45.50 microseconds) 
<span class="ansi33"> $_286586

</span><span class="ansi38-000068000">!(pragma! trace-on-overflow True)

</span><span class="ansi38-017068017">exec(Exec) :- 
  is_True(_320592) , 
  u_assign(['pragma!','trace-on-overflow',_320592],_319992)
</span>
; Evaluation took 0.047 ms. (46.60 microseconds) 
<span class="ansi33"> $_319974

</span><span class="ansi38-000068000">!(pragma! trace-on-error True)

</span><span class="ansi38-017068017">exec(Exec) :- 
  is_True(_353544) , 
  u_assign(['pragma!','trace-on-error',_353544],_352944)
</span>
; Evaluation took 0.045 ms. (45.30 microseconds) 
<span class="ansi33"> $_352926

</span><span class="ansi38-000068000">!(pragma! trace-length 2)

</span><span class="ansi38-017068017">exec(Exec) :- 
  u_assign(['pragma!','trace-length',2],_385844)
</span>
; Evaluation took 0.045 ms. (44.90 microseconds) 
<span class="ansi33"> 2

</span>; Recursive Fibonacci
%~ [ convert(Convert),
%~   head_preconds_into_body((u_assign([fib,0],0):-true))]
%~ [convert(_410792),head_preconds_into_body((u_assign([fib,0],0):-true))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,0],0)
</span><span class="ansi38-255165000">  (= 
    (fib 0) 0)
</span><span class="ansi38-000082136">
  u_assign([fib, 0], 0).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body((u_assign([fib,1],1):-true))]
%~ [convert(_453316),head_preconds_into_body((u_assign([fib,1],1):-true))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,1],1)
</span><span class="ansi38-255165000">  (= 
    (fib 1) 1)
</span><span class="ansi38-000082136">
  u_assign([fib, 1], 1).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( u_assign([fib,N],Assign) :-
%~                              u_assign([-,N,1],Assign1) ,
%~                              Assign1=_101138 ,
%~                              u_assign([fib,_101138],Assign2) ,
%~                              Assign2=_101162 ,
%~                              u_assign([-,N,2],Assign3) ,
%~                              Assign3=_101192 ,
%~                              u_assign([fib,_101192],Assign4) ,
%~                              Assign4=_101216 ,
%~                              u_assign([+,_101162,_101216],Assign))]
%~ [convert(_2410),head_preconds_into_body((u_assign([fib,N],_2374):-((((u_assign([-,N,1],_2474),_2474=_2470),u_assign([fib,_2470],_2448)),_2448=_2444),((u_assign([-,N,2],_2562),_2562=_2558),u_assign([fib,_2558],_2536)),_2536=_2532),u_assign([+,_2444,_2532],_2374)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,N],[+,[fib,[-,N,1]],[fib,[-,N,2]]])
</span><span class="ansi38-255165000">  (= 
    (fib $N) 
    (+ 
      (fib 
        (- $N 1)) 
      (fib 
        (- $N 2))))
</span><span class="ansi38-000082136">
  u_assign([fib, N], A) :-
    ( ( u_assign([-, N, 1], B),
        B=C
      ),
      u_assign([fib, C], D),
      D=E
    ),
    ( u_assign([-, N, 2], F),
      F=G,
      u_assign([fib, G], H)
    ),
    H=I,
    u_assign([+, E, I], A).

</span>

; Tail-Recursive Fibonacci
%~ [ convert(Convert),
%~   head_preconds_into_body( u_assign(['fib-tail',N],Assign) :-
%~                              u_assign(['fib-tail-helper',N,0,1],Assign))]
%~ [convert(_135876),head_preconds_into_body((u_assign(['fib-tail',N],_134710):-u_assign(['fib-tail-helper',N,0,1],_134710)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail',N],['fib-tail-helper',N,0,1])
</span><span class="ansi38-255165000">  (= 
    (fib-tail $N) 
    (fib-tail-helper $N 0 1))
</span><span class="ansi38-000082136">
  u_assign(['fib-tail', N], A) :-
    u_assign(['fib-tail-helper', N, 0, 1], A).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( u_assign(['fib-tail-helper',0,A,_],A) :-
%~                              true)]
%~ [convert(_200966),head_preconds_into_body((u_assign(['fib-tail-helper',0,A,_],A):-true))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail-helper',0,A,_],A)
</span><span class="ansi38-255165000">  (= 
    (fib-tail-helper 0 $A $_) $A)
</span><span class="ansi38-000082136">
  u_assign(['fib-tail-helper', 0, A, _], A).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( u_assign(['fib-tail-helper',N,A,B],Assign) :-
%~                              u_assign([-,N,1],Assign1) ,
%~                              Assign1=_354772 ,
%~                              u_assign([+,A,B],Assign2) ,
%~                              Assign2=_354790 ,
%~                              u_assign(['fib-tail-helper',_354772,B,_354790],Assign))]
%~ [convert(_261832),head_preconds_into_body((u_assign(['fib-tail-helper',N,A,B],_260526):-((u_assign([-,N,1],_262138),_262138=_262128),u_assign([+,A,B],_262354),_262354=_262344),u_assign(['fib-tail-helper',_262128,B,_262344],_260526)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail-helper',N,A,B],['fib-tail-helper',[-,N,1],B,[+,A,B]])
</span><span class="ansi38-255165000">  (= 
    (fib-tail-helper $N $A $B) 
    (fib-tail-helper 
      (- $N 1) $B 
      (+ $A $B)))
</span><span class="ansi38-000082136">
  u_assign(['fib-tail-helper', N, A, B], A) :-
    ( u_assign([-, N, 1], B),
      B=C
    ),
    u_assign([+, A, B], D),
    D=E,
    u_assign(['fib-tail-helper', C, B, E], A).

</span>

; Fibonacci Using Accumulators
%~ [ convert(Convert),
%~   head_preconds_into_body( u_assign(['fib-acc',N],Assign) :-
%~                              u_assign([',',0,1],Assign1) ,
%~                              Assign1=_450158 ,
%~                              u_assign(['fib-acc-helper',N,_450158],Assign))]
%~ [convert(_386874),head_preconds_into_body((u_assign(['fib-acc',N],_385708):-(u_assign([',',0,1],_387236),_387236=_387226),u_assign(['fib-acc-helper',N,_387226],_385708)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc',N],['fib-acc-helper',N,[',',0,1]])
</span><span class="ansi38-255165000">  (= 
    (fib-acc $N) 
    (fib-acc-helper $N 
      (and 0 1)))
</span><span class="ansi38-000082136">
  u_assign(['fib-acc', N], A) :-
    u_assign([',', 0, 1], B),
    B=C,
    u_assign(['fib-acc-helper', N, C], A).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( u_assign(['fib-acc-helper',0,_33546],A) :-
%~                              u_assign([',',A,_],Assign) ,
%~                              Assign=_18840)]
%~ [convert(_2300),head_preconds_into_body((u_assign(['fib-acc-helper',0,_2244],A):-u_assign([',',A,_],_2248),_2248=_2244))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc-helper',0,[',',A,_]],A)
</span><span class="ansi38-255165000">  (= 
    (fib-acc-helper 0 
      (and $A $_)) $A)
</span><span class="ansi38-000082136">
  u_assign(['fib-acc-helper', 0, A], A) :-
    u_assign([',', A, _], B),
    B=A.

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( u_assign(['fib-acc-helper',N,_210760],Assign) :-
%~                              u_assign([',',A,B],Assign1) ,
%~                              Assign1=_195584 ,
%~                              u_assign([-,N,1],Assign2) ,
%~                              Assign2=_195640 ,
%~                              u_assign([+,A,B],Assign3) ,
%~                              Assign3=_195670 ,
%~                              u_assign([',',B,_195670],Assign4) ,
%~                              Assign4=_195700 ,
%~                              u_assign(['fib-acc-helper',_195640,_195700],Assign))]
%~ [convert(_59718),head_preconds_into_body((u_assign(['fib-acc-helper',N,_58680],_58344):-(u_assign([',',A,B],_58690),_58690=_58680),((u_assign([-,N,1],_60024),_60024=_60014),((u_assign([+,A,B],_60282),_60282=_60272),u_assign([',',B,_60272],_60184)),_60184=_60174),u_assign(['fib-acc-helper',_60014,_60174],_58344)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc-helper',N,[',',A,B]],['fib-acc-helper',[-,N,1],[',',B,[+,A,B]]])
</span><span class="ansi38-255165000">  (= 
    (fib-acc-helper $N 
      (and $A $B)) 
    (fib-acc-helper 
      (- $N 1) 
      (and $B 
        (+ $A $B))))
</span><span class="ansi38-000082136">
  u_assign(['fib-acc-helper', N, A], B) :-
    u_assign([',', A, B], C),
    C=A,
    ( u_assign([-, N, 1], D),
      D=E
    ),
    ( u_assign([+, A, B], F),
      F=G,
      u_assign([',', B, G], H)
    ),
    H=I,
    u_assign(['fib-acc-helper', E, I], B).

</span>

;!(assertEqual (fib 0) 0)
;!(assertEqual (fib-tail 0) 0)
;!(assertEqual (fib-acc 0) 0)
;!(assertEqual (fib 1) 1)
;!(assertEqual (fib-tail 1) 1)
;!(assertEqual (fib-acc 1) 1)
;!(assertEqual (fib 2) 1)
;!(assertEqual (fib-tail 2) 1)
;!(assertEqual (fib-acc 2) 1)
<span class="ansi38-000068000">!(assertEqual (fib 3) 2)

</span><span class="ansi38-017068017">exec(Exec) :- 
  Src_1 =  
    [ assertEqual, 
      [fib,3], 
      2] , 
  loonit_assert_source_tf( Src_1, 
      ((
       (findall(FA_1,(true,u_assign([fib,3],FA_1)),FARL_1)),
       (findall(FA_2,FA_2=2,FARL_2))  )), equal_enough(FARL_1,FARL_2),_236784)
</span>
<h3 id="EXAMPLES.FIBO.01">;; EXAMPLES.FIBO.01</h3><span class="ansi31">
(@ loonit_failureR 
  (equal_enough  () 
    (2)))
</span>equal_enough([],[2])
; Evaluation took 0.602 ms. (601.80 microseconds) 
<span class="ansi33"> False
</span><span class="ansi32">['FARL_2'=[2],'FA_2'=_240202,'FARL_1'=[],'FA_1'=_239122,'Src_1'=[assertEqual,[fib,3],2]]
</span>

<span class="ansi32">% 4,485,197 inferences, 0.642 CPU in 0.642 seconds (100% CPU, 6981620 Lips)
</span> (@ = "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.metta" 0)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 0
</span><span class="ansi31">Failures: 1
</span><br/><a href="https://github.com/logicmoo/vspace-metta/blob/main/MeTTaLog.md">Return to Summaries</a><br/>
doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.html" )

</pre>
</body>

</html>
