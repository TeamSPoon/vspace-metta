<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi36 { color: #00aaaa; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.metta")
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.metta')
:- dynamic file_answers/3.


;;!(extend-py! metta_learner)
; these examples actually need the compiler!
<span class="ansi38-000068000">!(pragma! compile full)

</span>; Evaluation took 0.085 ms. (85.20 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-pass False)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_325142):-u_assign('pragma!'('trace-on-pass','False'),_325142)))]
exec(A) :-
    u_assign('pragma!'('trace-on-pass', 'False'), A).

subst_vars(u_assign('pragma!'('trace-on-pass','False'),L38),[],[L38])
; Evaluation took 0.084 ms. (84.30 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-False True)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_400856):-u_assign('pragma!'('trace-on-fail','True'),_400856)))]
exec(A) :-
    u_assign('pragma!'('trace-on-fail', 'True'), A).

subst_vars(u_assign('pragma!'('trace-on-fail','True'),L38),[],[L38])
; Evaluation took 0.076 ms. (75.50 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-overflow True)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_459594):-u_assign('pragma!'('trace-on-overflow','True'),_459594)))]
exec(A) :-
    u_assign('pragma!'('trace-on-overflow', 'True'), A).

subst_vars(u_assign('pragma!'('trace-on-overflow','True'),L38),[],[L38])
; Evaluation took 0.073 ms. (73.30 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-on-error True)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_1912):-u_assign('pragma!'('trace-on-error','True'),_1912)))]
exec(A) :-
    u_assign('pragma!'('trace-on-error', 'True'), A).

subst_vars(u_assign('pragma!'('trace-on-error','True'),L38),[],[L38])
; Evaluation took 0.074 ms. (73.90 microseconds) 
<span class="ansi33"> Empty

</span><span class="ansi38-000068000">!(pragma! trace-length 2)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body((exec(_56828):-u_assign('pragma!'('trace-length',2),_56828)))]
exec(A) :-
    u_assign('pragma!'('trace-length', 2), A).

subst_vars(u_assign('pragma!'('trace-length',2),L38),[],[L38])
; Evaluation took 0.127 ms. (127.10 microseconds) 
<span class="ansi33"> Empty

</span>; Recursive Fibonacci
%~ [ convert(Convert),
%~   head_preconds_into_body((fib(0,0):-true))]
%~ [convert(_104970),head_preconds_into_body((fib(0,0):-true))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,0],0)
</span><span class="ansi38-255165000">  (= 
    (fib 0) 0)
</span><span class="ansi38-000082136">  :- dynamic fib/2.

  fib(0, 0).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body((fib(1,1):-true))]
%~ [convert(_152042),head_preconds_into_body((fib(1,1):-true))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,1],1)
</span><span class="ansi38-255165000">  (= 
    (fib 1) 1)
</span><span class="ansi38-000082136">
  fib(1, 1).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( fib(N,Assign_Fib_N) :-
%~                              u_assign([-,N,2],Assign) ,
%~                              u_assign([fib,Assign],Assign3) ,
%~                              u_assign([-,N,1],Assign4) ,
%~                              u_assign([fib,Assign4],Assign5) ,
%~                              u_assign(Assign5+Assign3,Assign_Fib_N))]
%~ [convert(_202352),head_preconds_into_body((fib(N,_200940):-u_assign([-,N,2],_203222),u_assign([fib,_203222],_204282),u_assign([-,N,1],_205306),u_assign([fib,_205306],_206166),u_assign(_206166+_204282,_200940)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[fib,N],[+,[fib,[-,N,1]],[fib,[-,N,2]]])
</span><span class="ansi38-255165000">  (= 
    (fib $N) 
    (+ 
      (fib 
        (- $N 1)) 
      (fib 
        (- $N 2))))
</span><span class="ansi38-000082136">
  fib(N, A) :-
    u_assign([-, N, 2], B),
    u_assign([fib, B], C),
    u_assign([-, N, 1], D),
    u_assign([fib, D], E),
    u_assign(E+C, A).

</span>

; Tail-Recursive Fibonacci
%~ [ convert(Convert),
%~   head_preconds_into_body(('fib-tail'(N,_312560):-u_assign('fib-tail-helper'(N,0,1),_312560)))]
%~ [convert(_313980),head_preconds_into_body(('fib-tail'(N,_312560):-u_assign('fib-tail-helper'(N,0,1),_312560)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail',N],['fib-tail-helper',N,0,1])
</span><span class="ansi38-255165000">  (= 
    (fib-tail $N) 
    (fib-tail-helper $N 0 1))
</span><span class="ansi38-000082136">  :- dynamic'fib-tail'/2.

  'fib-tail'(N, A) :-
    u_assign('fib-tail-helper'(N, 0, 1), A).

</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail-helper',0,A,_],A)
</span><span class="ansi38-255165000">  (= 
    (fib-tail-helper 0 $A $_) $A)
</span><span class="ansi38-000082136">  :- dynamic'fib-tail-helper'/4.

  'fib-tail-helper'(0, A, _, A) :-
    u_assign(A, A).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( 'fib-tail-helper'(N,A,B,Assign_B) :-
%~                              u_assign([+,A,B],Fib_tail_helper_Assign) ,
%~                              u_assign([-,N,1],Assign_B1) ,
%~                              u_assign('fib-tail-helper'(Assign_B1,B,Fib_tail_helper_Assign),Assign_B))]
%~ [convert(_404156),head_preconds_into_body(('fib-tail-helper'(N,A,B,_402634):-u_assign([+,A,B],_405038),u_assign([-,N,1],_406062),u_assign('fib-tail-helper'(_406062,B,_405038),_402634)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-tail-helper',N,A,B],['fib-tail-helper',[-,N,1],B,[+,A,B]])
</span><span class="ansi38-255165000">  (= 
    (fib-tail-helper $N $A $B) 
    (fib-tail-helper 
      (- $N 1) $B 
      (+ $A $B)))
</span><span class="ansi38-000082136">
  'fib-tail-helper'(N, A, B, A) :-
    u_assign([+, A, B], B),
    u_assign([-, N, 1], C),
    u_assign('fib-tail-helper'(C, B, B), A).

</span>

; Fibonacci Using Accumulators
%~ [ convert(Convert),
%~   head_preconds_into_body(('fib-acc'(N,_2318):-u_assign('fib-acc-helper'(N,(0,1)),_2318)))]
%~ [convert(_2340),head_preconds_into_body(('fib-acc'(N,_2318):-u_assign('fib-acc-helper'(N,(0,1)),_2318)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc',N],['fib-acc-helper',N,[',',0,1]])
</span><span class="ansi38-255165000">  (= 
    (fib-acc $N) 
    (fib-acc-helper $N 
      (and 0 1)))
</span><span class="ansi38-000082136">  :- dynamic'fib-acc'/2.

  'fib-acc'(N, A) :-
    u_assign('fib-acc-helper'(N, (0, 1)), A).

</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc-helper',0,[',',A,_]],A)
</span><span class="ansi38-255165000">  (= 
    (fib-acc-helper 0 
      (and $A $_)) $A)
</span><span class="ansi38-000082136">  :- dynamic'fib-acc-helper'/3.

  'fib-acc-helper'(0, (A, _), A) :-
    u_assign(A, A).

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body( 'fib-acc-helper'(N,(A,B),Fib_acc_helper) :-
%~                              u_assign([+,A,B],Assign_B) ,
%~                              u_assign([-,N,1],Assign) ,
%~                              u_assign('fib-acc-helper'(Assign,(B,Assign_B)),Fib_acc_helper))]
%~ [convert(_72496),head_preconds_into_body(('fib-acc-helper'(N,(A,B),_70936):-u_assign([+,A,B],_73442),u_assign([-,N,1],_74522),u_assign('fib-acc-helper'(_74522,(B,_73442)),_70936)))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['fib-acc-helper',N,[',',A,B]],['fib-acc-helper',[-,N,1],[',',B,[+,A,B]]])
</span><span class="ansi38-255165000">  (= 
    (fib-acc-helper $N 
      (and $A $B)) 
    (fib-acc-helper 
      (- $N 1) 
      (and $B 
        (+ $A $B))))
</span><span class="ansi38-000082136">
  'fib-acc-helper'(N, (A, B), A) :-
    u_assign([+, A, B], B),
    u_assign([-, N, 1], C),
    u_assign('fib-acc-helper'(C, (B, B)), A).

</span>

;!(assertEqual (fib 0) 0)
;!(assertEqual (fib-tail 0) 0)
;!(assertEqual (fib-acc 0) 0)
;!(assertEqual (fib 1) 1)
;!(assertEqual (fib-tail 1) 1)
;!(assertEqual (fib-acc 1) 1)
;!(assertEqual (fib 2) 1)
;!(assertEqual (fib-tail 2) 1)
;!(assertEqual (fib-acc 2) 1)
<span class="ansi38-000068000">!(assertEqual 
  (fib 3) 2)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_1 =
%~                                [ assertEqual,
%~                                  [fib,3],
%~                                  2] ,
%~                              loonit_assert_source_tf( Src_1,
%~                                  ((
%~                                   (findall(FA_1,u_assign(fib(3),FA_1),FARL_1)),
%~                                   (findall(FA_2,u_assign(FA_2,2),FARL_2))  )),
%~                                equal_enough(FARL_1,FARL_2),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_1=[assertEqual, [fib, 3], 2],
    loonit_assert_source_tf(Src_1,
                            (findall(FA_1, u_assign(fib(3), FA_1), FARL_1), findall(FA_2, u_assign(FA_2, 2), FARL_2)),
                            equal_enough(FARL_1, FARL_2),
                            A).

subst_vars((L38=[ assertEqual, 
                  [fib,3], 
                  2],loonit_assert_source_tf(L38,(findall(M38,u_assign(fib(3),M38),N38),findall(O38,u_assign(O38,2),P38)),equal_enough(N38,P38),Q38)),[ 'FARL_2'=P38, 
                                                                                                                                                        'FA_2'=O38, 'FARL_1'=N38,'FA_1'=M38, 
                                                                                                                                                        'Src_1'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                       P38,Q38])
<h3 id="EXAMPLES.FIBO.01">;; EXAMPLES.FIBO.01</h3>
; 
; EVAL TEST
; took 0.095 ms. (95.10 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (2) 
    (2)))
</span>; Evaluation took 1.06 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_2'=[2],'FA_2'=_251768,'FARL_1'=[2],'FA_1'=_250750,'Src_1'=[assertEqual,[fib,3],2]]
</span>

<span class="ansi32">% 2,417,233 inferences, 0.629 CPU in 0.629 seconds (100% CPU, 3842874 Lips)
</span> (@ = "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.metta" 0)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 1
</span><span class="ansi32">Failures: 0
</span>doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/fibo.html" )

</pre>
</body>

</html>
