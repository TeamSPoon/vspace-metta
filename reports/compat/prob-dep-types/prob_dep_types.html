<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi36 { color: #00aaaa; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "examples/compat/prob-dep-types/prob_dep_types.metta")
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Distribution',[->,'Type','Type']])
</span><span class="ansi38-255165000">  (: Distribution 
    (-> Type Type))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Union',[->,'Type','Type','Type']])
</span><span class="ansi38-255165000">  (: Union 
    (-> Type Type Type))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['Union',T1,T2],T1)
</span><span class="ansi38-255165000">  (= 
    (Union $T1 $T2) $T1)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['Union',T1,T2],T2)
</span><span class="ansi38-255165000">  (= 
    (Union $T1 $T2) $T2)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,random,[->,T1,T2,['Union',T1,T2]]])
</span><span class="ansi38-255165000">  (: random 
    (-> $T1 $T2 
      (Union $T1 $T2)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[random,A,B],A)
</span><span class="ansi38-255165000">  (= 
    (random $A $B) $A)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[random,A,B],B)
</span><span class="ansi38-255165000">  (= 
    (random $A $B) $B)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,sample,[->,['Distribution',T1],T1]])
</span><span class="ansi38-255165000">  (: sample 
    (-> 
      (Distribution $T1) $T1))
</span>

;(: thunk (-> $t1 (Distribution $t1)))
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,thunk,[->,'Atom',['Distribution',T1]]])
</span><span class="ansi38-255165000">  (: thunk 
    (-> Atom 
      (Distribution $T1)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[sample,[thunk,A]],A)
</span><span class="ansi38-255165000">  (= 
    (sample 
      (thunk $A)) $A)
</span>

;;; Bernoulli example
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Bool','Type'])
</span><span class="ansi38-255165000">  (: Bool Type)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'True','Bool'])
</span><span class="ansi38-255165000">  (: True Bool)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'False','Bool'])
</span><span class="ansi38-255165000">  (: False Bool)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Bernoulli',['Distribution','Bool']])
</span><span class="ansi38-255165000">  (: Bernoulli 
    (Distribution Bool))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['Bernoulli'],[thunk,[random,'True','False']])
</span><span class="ansi38-255165000">  (= 
    (Bernoulli) 
    (thunk 
      (random True False)))
</span>

<span class="ansi38-000068000">!(sample (Bernoulli))

</span><span class="ansi33"> True

</span><span class="ansi33"> False

</span><span class="ansi38-000068000">!(assertEqualToResult (sample (Bernoulli)) (True False))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.01">;; PROB-DEP-TYPES.PROB-DEP-TYPES.01</h3><span class="ansi36">
(@ loonit_success 
  (equal_enough  
    (False True) 
    (False True)))
</span>        -->(0,'&self',[sample,['Bernoulli']],depth(2))
            -->(1,'&self',['Bernoulli'],depth(4))
              -->(2,'&self',[thunk,[random,'True','False']],depth(5))
                  -->(3,'&self',[random,'True','False'],depth(7))
                  -->(4,'&self',[thunk,'True'],depth(7))
                -->(5,'&self',[thunk,'True'],depth(6))
            -->(6,'&self',[sample,[thunk,'True']],depth(4))
                -->(7,'&self',[thunk,'True'],depth(6))
            <--(6,retval('True'))
                  -->(8,'&self',[thunk,'False'],depth(7))
                -->(9,'&self',[thunk,'False'],depth(6))
            -->(10,'&self',[sample,[thunk,'False']],depth(4))
                -->(11,'&self',[thunk,'False'],depth(6))
            <--(10,retval('False'))
                  <--(3,retval('False'))
                  -->(12,'&self',[random,'True','False'],depth(7))
                  <--(12,retval('False'))
              <--(2,retval([thunk,'False']))
            <--(1,retval([thunk,[random,'True','False']]))
            -->(13,'&self',['Bernoulli'],depth(4))
              -->(14,'&self',[thunk,[random,'True','False']],depth(5))
                  -->(15,'&self',[random,'True','False'],depth(7))
                  -->(16,'&self',[thunk,'True'],depth(7))
                -->(17,'&self',[thunk,'True'],depth(6))
                  -->(18,'&self',[thunk,'False'],depth(7))
                -->(19,'&self',[thunk,'False'],depth(6))
                  <--(15,retval('False'))
                  -->(20,'&self',[random,'True','False'],depth(7))
                  <--(20,retval('False'))
              <--(14,retval([thunk,'False']))
            <--(13,retval([thunk,[random,'True','False']]))
        <--(0,retval('False'))
<span class="ansi33"> True

</span>;;; Colors example
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Color','Type'])
</span><span class="ansi38-255165000">  (: Color Type)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Red','Color'])
</span><span class="ansi38-255165000">  (: Red Color)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Green','Color'])
</span><span class="ansi38-255165000">  (: Green Color)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Blue','Color'])
</span><span class="ansi38-255165000">  (: Blue Color)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'ColDist',['Distribution','Color']])
</span><span class="ansi38-255165000">  (: ColDist 
    (Distribution Color))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['ColDist'],[thunk,[random,'Red',[random,'Green','Blue']]])
</span><span class="ansi38-255165000">  (= 
    (ColDist) 
    (thunk 
      (random Red 
        (random Green Blue))))
</span>

<span class="ansi38-000068000">!(sample (ColDist))

</span><span class="ansi33"> Red

</span><span class="ansi33"> Green

</span><span class="ansi33"> Blue

</span><span class="ansi38-000068000">!(assertEqualToResult (sample (ColDist)) (Red Green Red Blue))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.02">;; PROB-DEP-TYPES.PROB-DEP-TYPES.02</h3><span class="ansi36">
(@ loonit_success 
  (equal_enough  
    (Blue Green Red) 
    (Blue Green Red)))
</span>        -->(0,'&self',[sample,['ColDist']],depth(2))
            -->(1,'&self',['ColDist'],depth(4))
              -->(2,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(5))
                  -->(3,'&self',[random,'Green','Blue'],depth(7))
                  -->(4,'&self',[thunk,[random,'Red','Green']],depth(7))
                      -->(5,'&self',[random,'Red','Green'],depth(9))
                      -->(6,'&self',[thunk,'Red'],depth(9))
                    -->(7,'&self',[thunk,'Red'],depth(8))
                -->(8,'&self',[thunk,'Red'],depth(6))
            -->(9,'&self',[sample,[thunk,'Red']],depth(4))
                -->(10,'&self',[thunk,'Red'],depth(6))
            <--(9,retval('Red'))
                      -->(11,'&self',[thunk,'Green'],depth(9))
                    -->(12,'&self',[thunk,'Green'],depth(8))
                -->(13,'&self',[thunk,'Green'],depth(6))
            -->(14,'&self',[sample,[thunk,'Green']],depth(4))
                -->(15,'&self',[thunk,'Green'],depth(6))
            <--(14,retval('Green'))
                      <--(5,retval('Green'))
                      -->(16,'&self',[random,'Red','Green'],depth(9))
                      <--(16,retval('Green'))
                  <--(4,retval([thunk,'Green']))
                  -->(17,'&self',[thunk,[random,'Red','Blue']],depth(7))
                      -->(18,'&self',[random,'Red','Blue'],depth(9))
                      -->(19,'&self',[thunk,'Red'],depth(9))
                    -->(20,'&self',[thunk,'Red'],depth(8))
                      -->(21,'&self',[thunk,'Blue'],depth(9))
                    -->(22,'&self',[thunk,'Blue'],depth(8))
                -->(23,'&self',[thunk,'Blue'],depth(6))
            -->(24,'&self',[sample,[thunk,'Blue']],depth(4))
                -->(25,'&self',[thunk,'Blue'],depth(6))
            <--(24,retval('Blue'))
                      <--(18,retval('Blue'))
                      -->(26,'&self',[random,'Red','Blue'],depth(9))
                      <--(26,retval('Blue'))
                  <--(17,retval([thunk,'Blue']))
                  <--(3,retval('Blue'))
                  -->(27,'&self',[random,'Green','Blue'],depth(7))
                  -->(28,'&self',[random,'Red','Green'],depth(7))
                  <--(28,retval('Green'))
                  -->(29,'&self',[random,'Red','Blue'],depth(7))
                  <--(29,retval('Blue'))
                  <--(27,retval('Blue'))
              <--(2,retval([thunk,'Blue']))
            <--(1,retval([thunk,[random,'Red',[random,'Green','Blue']]]))
            -->(30,'&self',['ColDist'],depth(4))
              -->(31,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(5))
                  -->(32,'&self',[random,'Green','Blue'],depth(7))
                  -->(33,'&self',[thunk,[random,'Red','Green']],depth(7))
                      -->(34,'&self',[random,'Red','Green'],depth(9))
                      -->(35,'&self',[thunk,'Red'],depth(9))
                    -->(36,'&self',[thunk,'Red'],depth(8))
                -->(37,'&self',[thunk,'Red'],depth(6))
                      -->(38,'&self',[thunk,'Green'],depth(9))
                    -->(39,'&self',[thunk,'Green'],depth(8))
                -->(40,'&self',[thunk,'Green'],depth(6))
                      <--(34,retval('Green'))
                      -->(41,'&self',[random,'Red','Green'],depth(9))
                      <--(41,retval('Green'))
                  <--(33,retval([thunk,'Green']))
                  -->(42,'&self',[thunk,[random,'Red','Blue']],depth(7))
                      -->(43,'&self',[random,'Red','Blue'],depth(9))
                      -->(44,'&self',[thunk,'Red'],depth(9))
                    -->(45,'&self',[thunk,'Red'],depth(8))
                      -->(46,'&self',[thunk,'Blue'],depth(9))
                    -->(47,'&self',[thunk,'Blue'],depth(8))
                -->(48,'&self',[thunk,'Blue'],depth(6))
                      <--(43,retval('Blue'))
                      -->(49,'&self',[random,'Red','Blue'],depth(9))
                      <--(49,retval('Blue'))
                  <--(42,retval([thunk,'Blue']))
                  <--(32,retval('Blue'))
                  -->(50,'&self',[random,'Green','Blue'],depth(7))
                  -->(51,'&self',[random,'Red','Green'],depth(7))
                  <--(51,retval('Green'))
                  -->(52,'&self',[random,'Red','Blue'],depth(7))
                  <--(52,retval('Blue'))
                  <--(50,retval('Blue'))
              <--(31,retval([thunk,'Blue']))
            <--(30,retval([thunk,[random,'Red',[random,'Green','Blue']]]))
        <--(0,retval('Blue'))
<span class="ansi33"> True

</span>;;; Hybrid example
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[f,'True'],[sample,['Bernoulli']])
</span><span class="ansi38-255165000">  (= 
    (f True) 
    (sample 
      (Bernoulli)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',[f,'False'],[sample,['ColDist']])
</span><span class="ansi38-255165000">  (= 
    (f False) 
    (sample 
      (ColDist)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Bool_U_Color','Type'])
</span><span class="ansi38-255165000">  (: Bool_U_Color Type)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['Bool_U_Color'],['Union','Bool','Color'])
</span><span class="ansi38-255165000">  (= 
    (Bool_U_Color) 
    (Union Bool Color))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'HybridDist',['Distribution',['Bool_U_Color']]])
</span><span class="ansi38-255165000">  (: HybridDist 
    (Distribution 
      (Bool_U_Color)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['HybridDist'],[thunk,[f,[sample,['Bernoulli']]]])
</span><span class="ansi38-255165000">  (= 
    (HybridDist) 
    (thunk 
      (f 
        (sample 
          (Bernoulli)))))
</span>

<span class="ansi38-000068000">!(sample (HybridDist))

</span><span class="ansi33"> True

</span><span class="ansi33"> False

</span><span class="ansi33"> Red

</span><span class="ansi33"> Green

</span><span class="ansi33"> Blue

</span><span class="ansi38-000068000">!(assertEqualToResult (sample (HybridDist)) (True False Red Green Red Blue))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.03">;; PROB-DEP-TYPES.PROB-DEP-TYPES.03</h3><span class="ansi36">
(@ loonit_success 
  (equal_enough  
    (Blue False Green Red True) 
    (Blue False Green Red True)))
</span>        -->(0,'&self',[sample,['HybridDist']],depth(2))
            -->(1,'&self',['HybridDist'],depth(4))
              -->(2,'&self',[thunk,[f,[sample,['Bernoulli']]]],depth(5))
                  -->(3,'&self',['Bernoulli'],depth(7))
                    -->(4,'&self',[thunk,[random,'True','False']],depth(8))
                        -->(5,'&self',[random,'True','False'],depth(10))
                        -->(6,'&self',[thunk,'True'],depth(10))
                      -->(7,'&self',[thunk,'True'],depth(9))
                  -->(8,'&self',[thunk,[f,[sample,[thunk,'True']]]],depth(7))
                      -->(9,'&self',[thunk,'True'],depth(9))
                      -->(10,'&self',[thunk,'True'],depth(9))
                      -->(11,'&self',[f,[sample,[thunk,'True']]],depth(9))
                          -->(12,'&self',[thunk,'True'],depth(11))
                          -->(13,'&self',[thunk,'True'],depth(11))
                          -->(14,'&self',[sample,[thunk,'True']],depth(11))
                              -->(15,'&self',[thunk,'True'],depth(13))
                        -->(16,'&self',[f,'True'],depth(10))
                          -->(17,'&self',[sample,['Bernoulli']],depth(11))
                              -->(18,'&self',['Bernoulli'],depth(13))
                                -->(19,'&self',[thunk,[random,'True','False']],depth(14))
                                    -->(20,'&self',[random,'True','False'],depth(16))
                                    -->(21,'&self',[thunk,'True'],depth(16))
                                  -->(22,'&self',[thunk,'True'],depth(15))
                              -->(23,'&self',[sample,[thunk,'True']],depth(13))
                                  -->(24,'&self',[thunk,'True'],depth(15))
                    -->(25,'&self',[thunk,'True'],depth(8))
                -->(26,'&self',[thunk,'True'],depth(6))
            -->(27,'&self',[sample,[thunk,'True']],depth(4))
                -->(28,'&self',[thunk,'True'],depth(6))
            <--(27,retval('True'))
                              <--(23,retval('True'))
                                    -->(29,'&self',[thunk,'False'],depth(16))
                                  -->(30,'&self',[thunk,'False'],depth(15))
                              -->(31,'&self',[sample,[thunk,'False']],depth(13))
                                  -->(32,'&self',[thunk,'False'],depth(15))
                    -->(33,'&self',[thunk,'False'],depth(8))
                -->(34,'&self',[thunk,'False'],depth(6))
            -->(35,'&self',[sample,[thunk,'False']],depth(4))
                -->(36,'&self',[thunk,'False'],depth(6))
            <--(35,retval('False'))
                              <--(31,retval('False'))
                                    <--(20,retval('False'))
                                    -->(37,'&self',[random,'True','False'],depth(16))
                                    <--(37,retval('False'))
                                <--(19,retval([thunk,'False']))
                              <--(18,retval([thunk,[random,'True','False']]))
                              -->(38,'&self',['Bernoulli'],depth(13))
                                -->(39,'&self',[thunk,[random,'True','False']],depth(14))
                                    -->(40,'&self',[random,'True','False'],depth(16))
                                    -->(41,'&self',[thunk,'True'],depth(16))
                                  -->(42,'&self',[thunk,'True'],depth(15))
                                    -->(43,'&self',[thunk,'False'],depth(16))
                                  -->(44,'&self',[thunk,'False'],depth(15))
                                    <--(40,retval('False'))
                                    -->(45,'&self',[random,'True','False'],depth(16))
                                    <--(45,retval('False'))
                                <--(39,retval([thunk,'False']))
                              <--(38,retval([thunk,[random,'True','False']]))
                          <--(17,retval('False'))
                        <--(16,retval([sample,['Bernoulli']]))
                          <--(14,retval('True'))
                      <--(11,retval([f,'True']))
                  <--(8,retval([thunk,'False']))
                        -->(46,'&self',[thunk,'False'],depth(10))
                      -->(47,'&self',[thunk,'False'],depth(9))
                  -->(48,'&self',[thunk,[f,[sample,[thunk,'False']]]],depth(7))
                      -->(49,'&self',[thunk,'False'],depth(9))
                      -->(50,'&self',[thunk,'False'],depth(9))
                      -->(51,'&self',[f,[sample,[thunk,'False']]],depth(9))
                          -->(52,'&self',[thunk,'False'],depth(11))
                          -->(53,'&self',[thunk,'False'],depth(11))
                          -->(54,'&self',[sample,[thunk,'False']],depth(11))
                              -->(55,'&self',[thunk,'False'],depth(13))
                        -->(56,'&self',[f,'False'],depth(10))
                          -->(57,'&self',[sample,['ColDist']],depth(11))
                              -->(58,'&self',['ColDist'],depth(13))
                                -->(59,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(14))
                                    -->(60,'&self',[random,'Green','Blue'],depth(16))
                                    -->(61,'&self',[thunk,[random,'Red','Green']],depth(16))
                                        -->(62,'&self',[random,'Red','Green'],depth(18))
                                        -->(63,'&self',[thunk,'Red'],depth(18))
                                      -->(64,'&self',[thunk,'Red'],depth(17))
                                  -->(65,'&self',[thunk,'Red'],depth(15))
                              -->(66,'&self',[sample,[thunk,'Red']],depth(13))
                                  -->(67,'&self',[thunk,'Red'],depth(15))
                    -->(68,'&self',[thunk,'Red'],depth(8))
                -->(69,'&self',[thunk,'Red'],depth(6))
            -->(70,'&self',[sample,[thunk,'Red']],depth(4))
                -->(71,'&self',[thunk,'Red'],depth(6))
            <--(70,retval('Red'))
                              <--(66,retval('Red'))
                                        -->(72,'&self',[thunk,'Green'],depth(18))
                                      -->(73,'&self',[thunk,'Green'],depth(17))
                                  -->(74,'&self',[thunk,'Green'],depth(15))
                              -->(75,'&self',[sample,[thunk,'Green']],depth(13))
                                  -->(76,'&self',[thunk,'Green'],depth(15))
                    -->(77,'&self',[thunk,'Green'],depth(8))
                -->(78,'&self',[thunk,'Green'],depth(6))
            -->(79,'&self',[sample,[thunk,'Green']],depth(4))
                -->(80,'&self',[thunk,'Green'],depth(6))
            <--(79,retval('Green'))
                              <--(75,retval('Green'))
                                        <--(62,retval('Green'))
                                        -->(81,'&self',[random,'Red','Green'],depth(18))
                                        <--(81,retval('Green'))
                                    <--(61,retval([thunk,'Green']))
                                    -->(82,'&self',[thunk,[random,'Red','Blue']],depth(16))
                                        -->(83,'&self',[random,'Red','Blue'],depth(18))
                                        -->(84,'&self',[thunk,'Red'],depth(18))
                                      -->(85,'&self',[thunk,'Red'],depth(17))
                                        -->(86,'&self',[thunk,'Blue'],depth(18))
                                      -->(87,'&self',[thunk,'Blue'],depth(17))
                                  -->(88,'&self',[thunk,'Blue'],depth(15))
                              -->(89,'&self',[sample,[thunk,'Blue']],depth(13))
                                  -->(90,'&self',[thunk,'Blue'],depth(15))
                    -->(91,'&self',[thunk,'Blue'],depth(8))
                -->(92,'&self',[thunk,'Blue'],depth(6))
            -->(93,'&self',[sample,[thunk,'Blue']],depth(4))
                -->(94,'&self',[thunk,'Blue'],depth(6))
            <--(93,retval('Blue'))
                              <--(89,retval('Blue'))
                                        <--(83,retval('Blue'))
                                        -->(95,'&self',[random,'Red','Blue'],depth(18))
                                        <--(95,retval('Blue'))
                                    <--(82,retval([thunk,'Blue']))
                                    <--(60,retval('Blue'))
                                    -->(96,'&self',[random,'Green','Blue'],depth(16))
                                    -->(97,'&self',[random,'Red','Green'],depth(16))
                                    <--(97,retval('Green'))
                                    -->(98,'&self',[random,'Red','Blue'],depth(16))
                                    <--(98,retval('Blue'))
                                    <--(96,retval('Blue'))
                                <--(59,retval([thunk,'Blue']))
                              <--(58,retval([thunk,[random,'Red',[random,'Green','Blue']]]))
                              -->(99,'&self',['ColDist'],depth(13))
                                -->(100,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(14))
Switched off tracing. For a longer trace !(pragma! tracelen 101))<span class="ansi33">
 True

</span>;;; Permutation example
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'Not',[->,'Bool','Bool']])
</span><span class="ansi38-255165000">  (: Not 
    (-> Bool Bool))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['Not','True'],'False')
</span><span class="ansi38-255165000">  (= 
    (Not True) False)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['Not','False'],'True')
</span><span class="ansi38-255165000">  (= 
    (Not False) True)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'ColPerm',[->,'Color','Color']])
</span><span class="ansi38-255165000">  (: ColPerm 
    (-> Color Color))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['ColPerm','Red'],'Green')
</span><span class="ansi38-255165000">  (= 
    (ColPerm Red) Green)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['ColPerm','Green'],'Blue')
</span><span class="ansi38-255165000">  (= 
    (ColPerm Green) Blue)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['ColPerm','Blue'],'Red')
</span><span class="ansi38-255165000">  (= 
    (ColPerm Blue) Red)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'HybridPerm',[->,['Bool_U_Color'],['Bool_U_Color']]])
</span><span class="ansi38-255165000">  (: HybridPerm 
    (-> 
      (Bool_U_Color) 
      (Bool_U_Color)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['HybridPerm',A],['Not',A])
</span><span class="ansi38-255165000">  (= 
    (HybridPerm $A) 
    (Not $A))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['HybridPerm',A],['ColPerm',A])
</span><span class="ansi38-255165000">  (= 
    (HybridPerm $A) 
    (ColPerm $A))
</span>

<span class="ansi38-000068000">!(HybridPerm (sample (HybridDist)))

</span><span class="ansi33"> False

</span><span class="ansi33">  (ColPerm True)

</span><span class="ansi33"> True

</span><span class="ansi33">  (ColPerm False)

</span><span class="ansi33">  (Not Red)

</span><span class="ansi33"> Green

</span><span class="ansi33">  (Not Green)

</span><span class="ansi33"> Blue

</span><span class="ansi33">  (Not Blue)

</span><span class="ansi33"> Red

</span><span class="ansi38-000068000">!(assertEqualToResult (HybridPerm (sample (HybridDist))) (False True Green Blue Green Red))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.04">;; PROB-DEP-TYPES.PROB-DEP-TYPES.04</h3><span class="ansi31">
(@ loonit_failureR 
  (equal_enough  
    (Blue False Green Red True 
      (ColPerm False) 
      (ColPerm True) 
      (Not Blue) 
      (Not Green) 
      (Not Red)) 
    (Blue False Green Red True)))
</span>        -->(0,'&self',['HybridPerm',[sample,['HybridDist']]],depth(2))
            -->(1,'&self',['HybridDist'],depth(4))
              -->(2,'&self',[thunk,[f,[sample,['Bernoulli']]]],depth(5))
                  -->(3,'&self',['Bernoulli'],depth(7))
                    -->(4,'&self',[thunk,[random,'True','False']],depth(8))
                        -->(5,'&self',[random,'True','False'],depth(10))
                        -->(6,'&self',[thunk,'True'],depth(10))
                      -->(7,'&self',[thunk,'True'],depth(9))
                  -->(8,'&self',[thunk,[f,[sample,[thunk,'True']]]],depth(7))
                      -->(9,'&self',[thunk,'True'],depth(9))
                      -->(10,'&self',[thunk,'True'],depth(9))
                      -->(11,'&self',[f,[sample,[thunk,'True']]],depth(9))
                          -->(12,'&self',[thunk,'True'],depth(11))
                          -->(13,'&self',[thunk,'True'],depth(11))
                          -->(14,'&self',[sample,[thunk,'True']],depth(11))
                              -->(15,'&self',[thunk,'True'],depth(13))
                        -->(16,'&self',[f,'True'],depth(10))
                          -->(17,'&self',[sample,['Bernoulli']],depth(11))
                              -->(18,'&self',['Bernoulli'],depth(13))
                                -->(19,'&self',[thunk,[random,'True','False']],depth(14))
                                    -->(20,'&self',[random,'True','False'],depth(16))
                                    -->(21,'&self',[thunk,'True'],depth(16))
                                  -->(22,'&self',[thunk,'True'],depth(15))
                              -->(23,'&self',[sample,[thunk,'True']],depth(13))
                                  -->(24,'&self',[thunk,'True'],depth(15))
                    -->(25,'&self',[thunk,'True'],depth(8))
                -->(26,'&self',[thunk,'True'],depth(6))
            -->(27,'&self',['HybridPerm',[sample,[thunk,'True']]],depth(4))
                -->(28,'&self',[thunk,'True'],depth(6))
              -->(29,'&self',['Not',[sample,[thunk,'True']]],depth(5))
                  -->(30,'&self',[thunk,'True'],depth(7))
                  -->(31,'&self',[thunk,'True'],depth(7))
                  -->(32,'&self',[sample,[thunk,'True']],depth(7))
                      -->(33,'&self',[thunk,'True'],depth(9))
                -->(34,'&self',['Not','True'],depth(6))
                <--(34,retval('False'))
                  <--(32,retval('True'))
              <--(29,retval(['Not','True']))
              -->(35,'&self',['ColPerm',[sample,[thunk,'True']]],depth(5))
                  -->(36,'&self',[thunk,'True'],depth(7))
                  -->(37,'&self',[thunk,'True'],depth(7))
                  -->(38,'&self',[sample,[thunk,'True']],depth(7))
                      -->(39,'&self',[thunk,'True'],depth(9))
                -->(40,'&self',['ColPerm','True'],depth(6))
          -->(41,'&self',['ColPerm','True'],depth(3))
                  <--(38,retval('True'))
              <--(35,retval(['ColPerm','True']))
            <--(27,retval(['ColPerm',[sample,[thunk,'True']]]))
                              <--(23,retval('True'))
                                    -->(42,'&self',[thunk,'False'],depth(16))
                                  -->(43,'&self',[thunk,'False'],depth(15))
                              -->(44,'&self',[sample,[thunk,'False']],depth(13))
                                  -->(45,'&self',[thunk,'False'],depth(15))
                    -->(46,'&self',[thunk,'False'],depth(8))
                -->(47,'&self',[thunk,'False'],depth(6))
            -->(48,'&self',['HybridPerm',[sample,[thunk,'False']]],depth(4))
                -->(49,'&self',[thunk,'False'],depth(6))
              -->(50,'&self',['Not',[sample,[thunk,'False']]],depth(5))
                  -->(51,'&self',[thunk,'False'],depth(7))
                  -->(52,'&self',[thunk,'False'],depth(7))
                  -->(53,'&self',[sample,[thunk,'False']],depth(7))
                      -->(54,'&self',[thunk,'False'],depth(9))
                -->(55,'&self',['Not','False'],depth(6))
                <--(55,retval('True'))
                  <--(53,retval('False'))
              <--(50,retval(['Not','False']))
              -->(56,'&self',['ColPerm',[sample,[thunk,'False']]],depth(5))
                  -->(57,'&self',[thunk,'False'],depth(7))
                  -->(58,'&self',[thunk,'False'],depth(7))
                  -->(59,'&self',[sample,[thunk,'False']],depth(7))
                      -->(60,'&self',[thunk,'False'],depth(9))
                -->(61,'&self',['ColPerm','False'],depth(6))
          -->(62,'&self',['ColPerm','False'],depth(3))
                  <--(59,retval('False'))
              <--(56,retval(['ColPerm','False']))
            <--(48,retval(['ColPerm',[sample,[thunk,'False']]]))
                              <--(44,retval('False'))
                                    <--(20,retval('False'))
                                    -->(63,'&self',[random,'True','False'],depth(16))
                                    <--(63,retval('False'))
                                <--(19,retval([thunk,'False']))
                              <--(18,retval([thunk,[random,'True','False']]))
                              -->(64,'&self',['Bernoulli'],depth(13))
                                -->(65,'&self',[thunk,[random,'True','False']],depth(14))
                                    -->(66,'&self',[random,'True','False'],depth(16))
                                    -->(67,'&self',[thunk,'True'],depth(16))
                                  -->(68,'&self',[thunk,'True'],depth(15))
                                    -->(69,'&self',[thunk,'False'],depth(16))
                                  -->(70,'&self',[thunk,'False'],depth(15))
                                    <--(66,retval('False'))
                                    -->(71,'&self',[random,'True','False'],depth(16))
                                    <--(71,retval('False'))
                                <--(65,retval([thunk,'False']))
                              <--(64,retval([thunk,[random,'True','False']]))
                          <--(17,retval('False'))
                        <--(16,retval([sample,['Bernoulli']]))
                          <--(14,retval('True'))
                      <--(11,retval([f,'True']))
                  <--(8,retval([thunk,'False']))
                        -->(72,'&self',[thunk,'False'],depth(10))
                      -->(73,'&self',[thunk,'False'],depth(9))
                  -->(74,'&self',[thunk,[f,[sample,[thunk,'False']]]],depth(7))
                      -->(75,'&self',[thunk,'False'],depth(9))
                      -->(76,'&self',[thunk,'False'],depth(9))
                      -->(77,'&self',[f,[sample,[thunk,'False']]],depth(9))
                          -->(78,'&self',[thunk,'False'],depth(11))
                          -->(79,'&self',[thunk,'False'],depth(11))
                          -->(80,'&self',[sample,[thunk,'False']],depth(11))
                              -->(81,'&self',[thunk,'False'],depth(13))
                        -->(82,'&self',[f,'False'],depth(10))
                          -->(83,'&self',[sample,['ColDist']],depth(11))
                              -->(84,'&self',['ColDist'],depth(13))
                                -->(85,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(14))
                                    -->(86,'&self',[random,'Green','Blue'],depth(16))
                                    -->(87,'&self',[thunk,[random,'Red','Green']],depth(16))
                                        -->(88,'&self',[random,'Red','Green'],depth(18))
                                        -->(89,'&self',[thunk,'Red'],depth(18))
                                      -->(90,'&self',[thunk,'Red'],depth(17))
                                  -->(91,'&self',[thunk,'Red'],depth(15))
                              -->(92,'&self',[sample,[thunk,'Red']],depth(13))
                                  -->(93,'&self',[thunk,'Red'],depth(15))
                    -->(94,'&self',[thunk,'Red'],depth(8))
                -->(95,'&self',[thunk,'Red'],depth(6))
            -->(96,'&self',['HybridPerm',[sample,[thunk,'Red']]],depth(4))
                -->(97,'&self',[thunk,'Red'],depth(6))
              -->(98,'&self',['Not',[sample,[thunk,'Red']]],depth(5))
                  -->(99,'&self',[thunk,'Red'],depth(7))
                  -->(100,'&self',[thunk,'Red'],depth(7))
Switched off tracing. For a longer trace !(pragma! tracelen 101))<span class="ansi33">
 False

</span>;;; Second-order color example
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'ColDistPermuted',['Distribution','Color']])
</span><span class="ansi38-255165000">  (: ColDistPermuted 
    (Distribution Color))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['ColDistPermuted'],[thunk,['ColPerm',[sample,['ColDist']]]])
</span><span class="ansi38-255165000">  (= 
    (ColDistPermuted) 
    (thunk 
      (ColPerm 
        (sample 
          (ColDist)))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'SecondOrderColDist',['Distribution',['Distribution','Color']]])
</span><span class="ansi38-255165000">  (: SecondOrderColDist 
    (Distribution 
      (Distribution Color)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['SecondOrderColDist'],[thunk,[random,['ColDist'],['ColDistPermuted']]])
</span><span class="ansi38-255165000">  (= 
    (SecondOrderColDist) 
    (thunk 
      (random 
        (ColDist) 
        (ColDistPermuted))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'FlattenedColDist',['Distribution','Color']])
</span><span class="ansi38-255165000">  (: FlattenedColDist 
    (Distribution Color))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['FlattenedColDist'],[thunk,[sample,[sample,['SecondOrderColDist']]]])
</span><span class="ansi38-255165000">  (= 
    (FlattenedColDist) 
    (thunk 
      (sample 
        (sample 
          (SecondOrderColDist)))))
</span>

<span class="ansi38-000068000">!(sample (SecondOrderColDist))

</span><span class="ansi33">  (thunk Red)

</span><span class="ansi33">  (thunk Green)

</span><span class="ansi33">  (thunk Blue)

</span><span class="ansi38-000068000">!(assertEqualToResult (sample (SecondOrderColDist)) ((thunk (random Red (random Green Blue))) (thunk (ColPerm (sample (ColDist))))))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.05">;; PROB-DEP-TYPES.PROB-DEP-TYPES.05</h3><span class="ansi31">
(@ loonit_failureR 
  (equal_enough  
    ( (thunk Blue) 
      (thunk Green) 
      (thunk Red)) 
    ( (thunk 
        (ColPerm 
          (sample 
            (ColDist)))) 
      (thunk 
        (random Red 
          (random Green Blue))))))
</span>        -->(0,'&self',[sample,['SecondOrderColDist']],depth(2))
            -->(1,'&self',['SecondOrderColDist'],depth(4))
              -->(2,'&self',[thunk,[random,['ColDist'],['ColDistPermuted']]],depth(5))
                  -->(3,'&self',['ColDist'],depth(7))
                    -->(4,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(8))
                        -->(5,'&self',[random,'Green','Blue'],depth(10))
                        -->(6,'&self',[thunk,[random,'Red','Green']],depth(10))
                            -->(7,'&self',[random,'Red','Green'],depth(12))
                            -->(8,'&self',[thunk,'Red'],depth(12))
                          -->(9,'&self',[thunk,'Red'],depth(11))
                      -->(10,'&self',[thunk,'Red'],depth(9))
                  -->(11,'&self',[thunk,[random,[thunk,'Red'],['ColDistPermuted']]],depth(7))
                      -->(12,'&self',[thunk,'Red'],depth(9))
                      -->(13,'&self',[thunk,'Red'],depth(9))
                      -->(14,'&self',['ColDistPermuted'],depth(9))
                        -->(15,'&self',[thunk,['ColPerm',[sample,['ColDist']]]],depth(10))
                            -->(16,'&self',['ColDist'],depth(12))
                              -->(17,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(13))
                                  -->(18,'&self',[random,'Green','Blue'],depth(15))
                                  -->(19,'&self',[thunk,[random,'Red','Green']],depth(15))
                                      -->(20,'&self',[random,'Red','Green'],depth(17))
                                      -->(21,'&self',[thunk,'Red'],depth(17))
                                    -->(22,'&self',[thunk,'Red'],depth(16))
                                -->(23,'&self',[thunk,'Red'],depth(14))
                            -->(24,'&self',[thunk,['ColPerm',[sample,[thunk,'Red']]]],depth(12))
                                -->(25,'&self',[thunk,'Red'],depth(14))
                                -->(26,'&self',[thunk,'Red'],depth(14))
                                -->(27,'&self',['ColPerm',[sample,[thunk,'Red']]],depth(14))
                                    -->(28,'&self',[thunk,'Red'],depth(16))
                                    -->(29,'&self',[thunk,'Red'],depth(16))
                                    -->(30,'&self',[sample,[thunk,'Red']],depth(16))
                                        -->(31,'&self',[thunk,'Red'],depth(18))
                                  -->(32,'&self',['ColPerm','Red'],depth(15))
                              -->(33,'&self',[thunk,'Green'],depth(13))
                          -->(34,'&self',[thunk,'Green'],depth(11))
                      -->(35,'&self',[thunk,'Red'],depth(9))
                      -->(36,'&self',[thunk,'Green'],depth(9))
                                  <--(32,retval('Green'))
                                    <--(30,retval('Red'))
                                <--(27,retval(['ColPerm','Red']))
                            <--(24,retval([thunk,'Green']))
                                      -->(37,'&self',[thunk,'Green'],depth(17))
                                    -->(38,'&self',[thunk,'Green'],depth(16))
                                -->(39,'&self',[thunk,'Green'],depth(14))
                            -->(40,'&self',[thunk,['ColPerm',[sample,[thunk,'Green']]]],depth(12))
                                -->(41,'&self',[thunk,'Green'],depth(14))
                                -->(42,'&self',[thunk,'Green'],depth(14))
                                -->(43,'&self',['ColPerm',[sample,[thunk,'Green']]],depth(14))
                                    -->(44,'&self',[thunk,'Green'],depth(16))
                                    -->(45,'&self',[thunk,'Green'],depth(16))
                                    -->(46,'&self',[sample,[thunk,'Green']],depth(16))
                                        -->(47,'&self',[thunk,'Green'],depth(18))
                                  -->(48,'&self',['ColPerm','Green'],depth(15))
                              -->(49,'&self',[thunk,'Blue'],depth(13))
                          -->(50,'&self',[thunk,'Blue'],depth(11))
                      -->(51,'&self',[thunk,'Red'],depth(9))
                      -->(52,'&self',[thunk,'Blue'],depth(9))
                                  <--(48,retval('Blue'))
                                    <--(46,retval('Green'))
                                <--(43,retval(['ColPerm','Green']))
                            <--(40,retval([thunk,'Blue']))
                                      <--(20,retval('Green'))
                                      -->(53,'&self',[random,'Red','Green'],depth(17))
                                      <--(53,retval('Green'))
                                  <--(19,retval([thunk,'Green']))
                                  -->(54,'&self',[thunk,[random,'Red','Blue']],depth(15))
                                      -->(55,'&self',[random,'Red','Blue'],depth(17))
                                      -->(56,'&self',[thunk,'Red'],depth(17))
                                    -->(57,'&self',[thunk,'Red'],depth(16))
                                      -->(58,'&self',[thunk,'Blue'],depth(17))
                                    -->(59,'&self',[thunk,'Blue'],depth(16))
                                -->(60,'&self',[thunk,'Blue'],depth(14))
                            -->(61,'&self',[thunk,['ColPerm',[sample,[thunk,'Blue']]]],depth(12))
                                -->(62,'&self',[thunk,'Blue'],depth(14))
                                -->(63,'&self',[thunk,'Blue'],depth(14))
                                -->(64,'&self',['ColPerm',[sample,[thunk,'Blue']]],depth(14))
                                    -->(65,'&self',[thunk,'Blue'],depth(16))
                                    -->(66,'&self',[thunk,'Blue'],depth(16))
                                    -->(67,'&self',[sample,[thunk,'Blue']],depth(16))
                                        -->(68,'&self',[thunk,'Blue'],depth(18))
                                  -->(69,'&self',['ColPerm','Blue'],depth(15))
                              -->(70,'&self',[thunk,'Red'],depth(13))
                          -->(71,'&self',[thunk,'Red'],depth(11))
                      -->(72,'&self',[thunk,'Red'],depth(9))
                      -->(73,'&self',[thunk,'Red'],depth(9))
                                  <--(69,retval('Red'))
                                    <--(67,retval('Blue'))
                                <--(64,retval(['ColPerm','Blue']))
                            <--(61,retval([thunk,'Red']))
                                      <--(55,retval('Blue'))
                                      -->(74,'&self',[random,'Red','Blue'],depth(17))
                                      <--(74,retval('Blue'))
                                  <--(54,retval([thunk,'Blue']))
                                  <--(18,retval('Blue'))
                                  -->(75,'&self',[random,'Green','Blue'],depth(15))
                                  -->(76,'&self',[random,'Red','Green'],depth(15))
                                  <--(76,retval('Green'))
                                  -->(77,'&self',[random,'Red','Blue'],depth(15))
                                  <--(77,retval('Blue'))
                                  <--(75,retval('Blue'))
                              <--(17,retval([thunk,'Blue']))
                            <--(16,retval([thunk,[random,'Red',[random,'Green','Blue']]]))
                            -->(78,'&self',['ColDist'],depth(12))
                              -->(79,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(13))
                                  -->(80,'&self',[random,'Green','Blue'],depth(15))
                                  -->(81,'&self',[thunk,[random,'Red','Green']],depth(15))
                                      -->(82,'&self',[random,'Red','Green'],depth(17))
                                      -->(83,'&self',[thunk,'Red'],depth(17))
                                    -->(84,'&self',[thunk,'Red'],depth(16))
                                -->(85,'&self',[thunk,'Red'],depth(14))
                            -->(86,'&self',[thunk,'Red'],depth(12))
                                      -->(87,'&self',[thunk,'Green'],depth(17))
                                    -->(88,'&self',[thunk,'Green'],depth(16))
                                -->(89,'&self',[thunk,'Green'],depth(14))
                            -->(90,'&self',[thunk,'Green'],depth(12))
                                      <--(82,retval('Green'))
                                      -->(91,'&self',[random,'Red','Green'],depth(17))
                                      <--(91,retval('Green'))
                                  <--(81,retval([thunk,'Green']))
                                  -->(92,'&self',[thunk,[random,'Red','Blue']],depth(15))
                                      -->(93,'&self',[random,'Red','Blue'],depth(17))
                                      -->(94,'&self',[thunk,'Red'],depth(17))
                                    -->(95,'&self',[thunk,'Red'],depth(16))
                                      -->(96,'&self',[thunk,'Blue'],depth(17))
                                    -->(97,'&self',[thunk,'Blue'],depth(16))
                                -->(98,'&self',[thunk,'Blue'],depth(14))
                            -->(99,'&self',[thunk,'Blue'],depth(12))
                                      <--(93,retval('Blue'))
                                      -->(100,'&self',[random,'Red','Blue'],depth(17))
                                      <--(100,retval('Blue'))
                                  <--(92,retval([thunk,'Blue']))
                                  <--(80,retval('Blue'))
Switched off tracing. For a longer trace !(pragma! tracelen 101))<span class="ansi33">
 False

</span><span class="ansi38-000068000">!(sample (FlattenedColDist))

</span><span class="ansi33"> Red

</span><span class="ansi33"> Green

</span><span class="ansi33"> Blue

</span><span class="ansi38-000068000">!(assertEqualToResult (sample (FlattenedColDist)) (Red Green Red Blue Green Blue Green Red))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.06">;; PROB-DEP-TYPES.PROB-DEP-TYPES.06</h3><span class="ansi36">
(@ loonit_success 
  (equal_enough  
    (Blue Green Red) 
    (Blue Green Red)))
</span>        -->(0,'&self',[sample,['FlattenedColDist']],depth(2))
            -->(1,'&self',['FlattenedColDist'],depth(4))
              -->(2,'&self',[thunk,[sample,[sample,['SecondOrderColDist']]]],depth(5))
                  -->(3,'&self',['SecondOrderColDist'],depth(7))
                    -->(4,'&self',[thunk,[random,['ColDist'],['ColDistPermuted']]],depth(8))
                        -->(5,'&self',['ColDist'],depth(10))
                          -->(6,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(11))
                              -->(7,'&self',[random,'Green','Blue'],depth(13))
                              -->(8,'&self',[thunk,[random,'Red','Green']],depth(13))
                                  -->(9,'&self',[random,'Red','Green'],depth(15))
                                  -->(10,'&self',[thunk,'Red'],depth(15))
                                -->(11,'&self',[thunk,'Red'],depth(14))
                            -->(12,'&self',[thunk,'Red'],depth(12))
                        -->(13,'&self',[thunk,[random,[thunk,'Red'],['ColDistPermuted']]],depth(10))
                            -->(14,'&self',[thunk,'Red'],depth(12))
                            -->(15,'&self',[thunk,'Red'],depth(12))
                            -->(16,'&self',['ColDistPermuted'],depth(12))
                              -->(17,'&self',[thunk,['ColPerm',[sample,['ColDist']]]],depth(13))
                                  -->(18,'&self',['ColDist'],depth(15))
                                    -->(19,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(16))
                                        -->(20,'&self',[random,'Green','Blue'],depth(18))
                                        -->(21,'&self',[thunk,[random,'Red','Green']],depth(18))
                                            -->(22,'&self',[random,'Red','Green'],depth(20))
                                            -->(23,'&self',[thunk,'Red'],depth(20))
                                          -->(24,'&self',[thunk,'Red'],depth(19))
                                      -->(25,'&self',[thunk,'Red'],depth(17))
                                  -->(26,'&self',[thunk,['ColPerm',[sample,[thunk,'Red']]]],depth(15))
                                      -->(27,'&self',[thunk,'Red'],depth(17))
                                      -->(28,'&self',[thunk,'Red'],depth(17))
                                      -->(29,'&self',['ColPerm',[sample,[thunk,'Red']]],depth(17))
                                          -->(30,'&self',[thunk,'Red'],depth(19))
                                          -->(31,'&self',[thunk,'Red'],depth(19))
                                          -->(32,'&self',[sample,[thunk,'Red']],depth(19))
                                              -->(33,'&self',[thunk,'Red'],depth(21))
                                        -->(34,'&self',['ColPerm','Red'],depth(18))
                                    -->(35,'&self',[thunk,'Green'],depth(16))
                                -->(36,'&self',[thunk,'Green'],depth(14))
                            -->(37,'&self',[thunk,'Red'],depth(12))
                            -->(38,'&self',[thunk,'Green'],depth(12))
                                        <--(34,retval('Green'))
                                          <--(32,retval('Red'))
                                      <--(29,retval(['ColPerm','Red']))
                                  <--(26,retval([thunk,'Green']))
                                            -->(39,'&self',[thunk,'Green'],depth(20))
                                          -->(40,'&self',[thunk,'Green'],depth(19))
                                      -->(41,'&self',[thunk,'Green'],depth(17))
                                  -->(42,'&self',[thunk,['ColPerm',[sample,[thunk,'Green']]]],depth(15))
                                      -->(43,'&self',[thunk,'Green'],depth(17))
                                      -->(44,'&self',[thunk,'Green'],depth(17))
                                      -->(45,'&self',['ColPerm',[sample,[thunk,'Green']]],depth(17))
                                          -->(46,'&self',[thunk,'Green'],depth(19))
                                          -->(47,'&self',[thunk,'Green'],depth(19))
                                          -->(48,'&self',[sample,[thunk,'Green']],depth(19))
                                              -->(49,'&self',[thunk,'Green'],depth(21))
                                        -->(50,'&self',['ColPerm','Green'],depth(18))
                                    -->(51,'&self',[thunk,'Blue'],depth(16))
                                -->(52,'&self',[thunk,'Blue'],depth(14))
                            -->(53,'&self',[thunk,'Red'],depth(12))
                            -->(54,'&self',[thunk,'Blue'],depth(12))
                                        <--(50,retval('Blue'))
                                          <--(48,retval('Green'))
                                      <--(45,retval(['ColPerm','Green']))
                                  <--(42,retval([thunk,'Blue']))
                                            <--(22,retval('Green'))
                                            -->(55,'&self',[random,'Red','Green'],depth(20))
                                            <--(55,retval('Green'))
                                        <--(21,retval([thunk,'Green']))
                                        -->(56,'&self',[thunk,[random,'Red','Blue']],depth(18))
                                            -->(57,'&self',[random,'Red','Blue'],depth(20))
                                            -->(58,'&self',[thunk,'Red'],depth(20))
                                          -->(59,'&self',[thunk,'Red'],depth(19))
                                            -->(60,'&self',[thunk,'Blue'],depth(20))
                                          -->(61,'&self',[thunk,'Blue'],depth(19))
                                      -->(62,'&self',[thunk,'Blue'],depth(17))
                                  -->(63,'&self',[thunk,['ColPerm',[sample,[thunk,'Blue']]]],depth(15))
                                      -->(64,'&self',[thunk,'Blue'],depth(17))
                                      -->(65,'&self',[thunk,'Blue'],depth(17))
                                      -->(66,'&self',['ColPerm',[sample,[thunk,'Blue']]],depth(17))
                                          -->(67,'&self',[thunk,'Blue'],depth(19))
                                          -->(68,'&self',[thunk,'Blue'],depth(19))
                                          -->(69,'&self',[sample,[thunk,'Blue']],depth(19))
                                              -->(70,'&self',[thunk,'Blue'],depth(21))
                                        -->(71,'&self',['ColPerm','Blue'],depth(18))
                                    -->(72,'&self',[thunk,'Red'],depth(16))
                                -->(73,'&self',[thunk,'Red'],depth(14))
                            -->(74,'&self',[thunk,'Red'],depth(12))
                            -->(75,'&self',[thunk,'Red'],depth(12))
                                        <--(71,retval('Red'))
                                          <--(69,retval('Blue'))
                                      <--(66,retval(['ColPerm','Blue']))
                                  <--(63,retval([thunk,'Red']))
                                            <--(57,retval('Blue'))
                                            -->(76,'&self',[random,'Red','Blue'],depth(20))
                                            <--(76,retval('Blue'))
                                        <--(56,retval([thunk,'Blue']))
                                        <--(20,retval('Blue'))
                                        -->(77,'&self',[random,'Green','Blue'],depth(18))
                                        -->(78,'&self',[random,'Red','Green'],depth(18))
                                        <--(78,retval('Green'))
                                        -->(79,'&self',[random,'Red','Blue'],depth(18))
                                        <--(79,retval('Blue'))
                                        <--(77,retval('Blue'))
                                    <--(19,retval([thunk,'Blue']))
                                  <--(18,retval([thunk,[random,'Red',[random,'Green','Blue']]]))
                                  -->(80,'&self',['ColDist'],depth(15))
                                    -->(81,'&self',[thunk,[random,'Red',[random,'Green','Blue']]],depth(16))
                                        -->(82,'&self',[random,'Green','Blue'],depth(18))
                                        -->(83,'&self',[thunk,[random,'Red','Green']],depth(18))
                                            -->(84,'&self',[random,'Red','Green'],depth(20))
                                            -->(85,'&self',[thunk,'Red'],depth(20))
                                          -->(86,'&self',[thunk,'Red'],depth(19))
                                      -->(87,'&self',[thunk,'Red'],depth(17))
                                  -->(88,'&self',[thunk,'Red'],depth(15))
                                            -->(89,'&self',[thunk,'Green'],depth(20))
                                          -->(90,'&self',[thunk,'Green'],depth(19))
                                      -->(91,'&self',[thunk,'Green'],depth(17))
                                  -->(92,'&self',[thunk,'Green'],depth(15))
                                            <--(84,retval('Green'))
                                            -->(93,'&self',[random,'Red','Green'],depth(20))
                                            <--(93,retval('Green'))
                                        <--(83,retval([thunk,'Green']))
                                        -->(94,'&self',[thunk,[random,'Red','Blue']],depth(18))
                                            -->(95,'&self',[random,'Red','Blue'],depth(20))
                                            -->(96,'&self',[thunk,'Red'],depth(20))
                                          -->(97,'&self',[thunk,'Red'],depth(19))
                                            -->(98,'&self',[thunk,'Blue'],depth(20))
                                          -->(99,'&self',[thunk,'Blue'],depth(19))
                                      -->(100,'&self',[thunk,'Blue'],depth(17))
Switched off tracing. For a longer trace !(pragma! tracelen 101))<span class="ansi33">
 True

</span>;;; Second-order hybrid example
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'HybridDistPermuted',['Distribution',['Bool_U_Color']]])
</span><span class="ansi38-255165000">  (: HybridDistPermuted 
    (Distribution 
      (Bool_U_Color)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['HybridDistPermuted'],[thunk,['HybridPerm',[sample,['HybridDist']]]])
</span><span class="ansi38-255165000">  (= 
    (HybridDistPermuted) 
    (thunk 
      (HybridPerm 
        (sample 
          (HybridDist)))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'SecondOrderHybridDist',['Distribution',['Distribution',['Bool_U_Color']]]])
</span><span class="ansi38-255165000">  (: SecondOrderHybridDist 
    (Distribution 
      (Distribution 
        (Bool_U_Color))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['SecondOrderHybridDist'],[thunk,[random,['HybridDist'],['HybridDistPermuted']]])
</span><span class="ansi38-255165000">  (= 
    (SecondOrderHybridDist) 
    (thunk 
      (random 
        (HybridDist) 
        (HybridDistPermuted))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',[:,'FlattenedHybridDist',['Distribution',['Bool_U_Color']]])
</span><span class="ansi38-255165000">  (: FlattenedHybridDist 
    (Distribution 
      (Bool_U_Color)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_defn('&self',['FlattenedHybridDist'],[thunk,[sample,[sample,['SecondOrderHybridDist']]]])
</span><span class="ansi38-255165000">  (= 
    (FlattenedHybridDist) 
    (thunk 
      (sample 
        (sample 
          (SecondOrderHybridDist)))))
</span>

<span class="ansi38-000068000">!(sample (SecondOrderHybridDist))

</span><span class="ansi33">  (thunk True)

</span><span class="ansi33">  (thunk False)

</span><span class="ansi33">  (thunk 
    (ColPerm True))

</span><span class="ansi33">  (thunk 
    (ColPerm False))

</span><span class="ansi33">  (thunk 
    (Not Red))

</span><span class="ansi33">  (thunk Green)

</span><span class="ansi33">  (thunk 
    (Not Green))

</span><span class="ansi33">  (thunk Blue)

</span><span class="ansi33">  (thunk 
    (Not Blue))

</span><span class="ansi33">  (thunk Red)

</span><span class="ansi38-000068000">!(assertEqualToResult (sample (SecondOrderHybridDist)) ((thunk (f (sample (Bernoulli)))) (thunk (HybridPerm (sample (HybridDist))))))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.07">;; PROB-DEP-TYPES.PROB-DEP-TYPES.07</h3><span class="ansi31">
(@ loonit_failureR 
  (equal_enough  
    ( (thunk Blue) 
      (thunk False) 
      (thunk Green) 
      (thunk Red) 
      (thunk True) 
      (thunk 
        (ColPerm False)) 
      (thunk 
        (ColPerm True)) 
      (thunk 
        (Not Blue)) 
      (thunk 
        (Not Green)) 
      (thunk 
        (Not Red))) 
    ( (thunk 
        (HybridPerm 
          (sample 
            (HybridDist)))) 
      (thunk 
        (f 
          (sample 
            (Bernoulli)))))))
</span>        -->(0,'&self',[sample,['SecondOrderHybridDist']],depth(2))
            -->(1,'&self',['SecondOrderHybridDist'],depth(4))
              -->(2,'&self',[thunk,[random,['HybridDist'],['HybridDistPermuted']]],depth(5))
                  -->(3,'&self',['HybridDist'],depth(7))
                    -->(4,'&self',[thunk,[f,[sample,['Bernoulli']]]],depth(8))
                        -->(5,'&self',['Bernoulli'],depth(10))
                          -->(6,'&self',[thunk,[random,'True','False']],depth(11))
                              -->(7,'&self',[random,'True','False'],depth(13))
                              -->(8,'&self',[thunk,'True'],depth(13))
                            -->(9,'&self',[thunk,'True'],depth(12))
                        -->(10,'&self',[thunk,[f,[sample,[thunk,'True']]]],depth(10))
                            -->(11,'&self',[thunk,'True'],depth(12))
                            -->(12,'&self',[thunk,'True'],depth(12))
                            -->(13,'&self',[f,[sample,[thunk,'True']]],depth(12))
                                -->(14,'&self',[thunk,'True'],depth(14))
                                -->(15,'&self',[thunk,'True'],depth(14))
                                -->(16,'&self',[sample,[thunk,'True']],depth(14))
                                    -->(17,'&self',[thunk,'True'],depth(16))
                              -->(18,'&self',[f,'True'],depth(13))
                                -->(19,'&self',[sample,['Bernoulli']],depth(14))
                                    -->(20,'&self',['Bernoulli'],depth(16))
                                      -->(21,'&self',[thunk,[random,'True','False']],depth(17))
                                          -->(22,'&self',[random,'True','False'],depth(19))
                                          -->(23,'&self',[thunk,'True'],depth(19))
                                        -->(24,'&self',[thunk,'True'],depth(18))
                                    -->(25,'&self',[sample,[thunk,'True']],depth(16))
                                        -->(26,'&self',[thunk,'True'],depth(18))
                          -->(27,'&self',[thunk,'True'],depth(11))
                      -->(28,'&self',[thunk,'True'],depth(9))
                  -->(29,'&self',[thunk,[random,[thunk,'True'],['HybridDistPermuted']]],depth(7))
                      -->(30,'&self',[thunk,'True'],depth(9))
                      -->(31,'&self',[thunk,'True'],depth(9))
                      -->(32,'&self',['HybridDistPermuted'],depth(9))
                        -->(33,'&self',[thunk,['HybridPerm',[sample,['HybridDist']]]],depth(10))
                            -->(34,'&self',['HybridDist'],depth(12))
                              -->(35,'&self',[thunk,[f,[sample,['Bernoulli']]]],depth(13))
                                  -->(36,'&self',['Bernoulli'],depth(15))
                                    -->(37,'&self',[thunk,[random,'True','False']],depth(16))
                                        -->(38,'&self',[random,'True','False'],depth(18))
                                        -->(39,'&self',[thunk,'True'],depth(18))
                                      -->(40,'&self',[thunk,'True'],depth(17))
                                  -->(41,'&self',[thunk,[f,[sample,[thunk,'True']]]],depth(15))
                                      -->(42,'&self',[thunk,'True'],depth(17))
                                      -->(43,'&self',[thunk,'True'],depth(17))
                                      -->(44,'&self',[f,[sample,[thunk,'True']]],depth(17))
                                          -->(45,'&self',[thunk,'True'],depth(19))
                                          -->(46,'&self',[thunk,'True'],depth(19))
                                          -->(47,'&self',[sample,[thunk,'True']],depth(19))
                                              -->(48,'&self',[thunk,'True'],depth(21))
                                        -->(49,'&self',[f,'True'],depth(18))
                                          -->(50,'&self',[sample,['Bernoulli']],depth(19))
                                              -->(51,'&self',['Bernoulli'],depth(21))
                                                -->(52,'&self',[thunk,[random,'True','False']],depth(22))
                                                    -->(53,'&self',[random,'True','False'],depth(24))
                                                    -->(54,'&self',[thunk,'True'],depth(24))
                                                  -->(55,'&self',[thunk,'True'],depth(23))
                                              -->(56,'&self',[sample,[thunk,'True']],depth(21))
                                                  -->(57,'&self',[thunk,'True'],depth(23))
                                    -->(58,'&self',[thunk,'True'],depth(16))
                                -->(59,'&self',[thunk,'True'],depth(14))
                            -->(60,'&self',[thunk,['HybridPerm',[sample,[thunk,'True']]]],depth(12))
                                -->(61,'&self',[thunk,'True'],depth(14))
                                -->(62,'&self',[thunk,'True'],depth(14))
                                -->(63,'&self',['HybridPerm',[sample,[thunk,'True']]],depth(14))
                                    -->(64,'&self',[thunk,'True'],depth(16))
                                  -->(65,'&self',['Not',[sample,[thunk,'True']]],depth(15))
                                      -->(66,'&self',[thunk,'True'],depth(17))
                                      -->(67,'&self',[thunk,'True'],depth(17))
                                      -->(68,'&self',[sample,[thunk,'True']],depth(17))
                                          -->(69,'&self',[thunk,'True'],depth(19))
                                    -->(70,'&self',['Not','True'],depth(16))
                              -->(71,'&self',[thunk,'False'],depth(13))
                          -->(72,'&self',[thunk,'False'],depth(11))
                      -->(73,'&self',[thunk,'True'],depth(9))
                      -->(74,'&self',[thunk,'False'],depth(9))
                                    <--(70,retval('False'))
                                      <--(68,retval('True'))
                                  <--(65,retval(['Not','True']))
                                  -->(75,'&self',['ColPerm',[sample,[thunk,'True']]],depth(15))
                                      -->(76,'&self',[thunk,'True'],depth(17))
                                      -->(77,'&self',[thunk,'True'],depth(17))
                                      -->(78,'&self',[sample,[thunk,'True']],depth(17))
                                          -->(79,'&self',[thunk,'True'],depth(19))
                                    -->(80,'&self',['ColPerm','True'],depth(16))
                              -->(81,'&self',[thunk,['ColPerm','True']],depth(13))
                                  -->(82,'&self',['ColPerm','True'],depth(15))
                                  -->(83,'&self',['ColPerm','True'],depth(15))
                                  -->(84,'&self',['ColPerm','True'],depth(15))
                          -->(85,'&self',[thunk,['ColPerm','True']],depth(11))
                              -->(86,'&self',['ColPerm','True'],depth(13))
                              -->(87,'&self',['ColPerm','True'],depth(13))
                              -->(88,'&self',['ColPerm','True'],depth(13))
                      -->(89,'&self',[thunk,'True'],depth(9))
                      -->(90,'&self',['ColPerm','True'],depth(9))
                                      <--(78,retval('True'))
                                  <--(75,retval(['ColPerm','True']))
                                <--(63,retval(['ColPerm',[sample,[thunk,'True']]]))
                            <--(60,retval([thunk,['ColPerm','True']]))
                                              <--(56,retval('True'))
                                                    -->(91,'&self',[thunk,'False'],depth(24))
                                                  -->(92,'&self',[thunk,'False'],depth(23))
                                              -->(93,'&self',[sample,[thunk,'False']],depth(21))
                                                  -->(94,'&self',[thunk,'False'],depth(23))
                                    -->(95,'&self',[thunk,'False'],depth(16))
                                -->(96,'&self',[thunk,'False'],depth(14))
                            -->(97,'&self',[thunk,['HybridPerm',[sample,[thunk,'False']]]],depth(12))
                                -->(98,'&self',[thunk,'False'],depth(14))
                                -->(99,'&self',[thunk,'False'],depth(14))
                                -->(100,'&self',['HybridPerm',[sample,[thunk,'False']]],depth(14))
Switched off tracing. For a longer trace !(pragma! tracelen 101))<span class="ansi33">
 False

</span><span class="ansi38-000068000">!(sample (FlattenedHybridDist))

</span><span class="ansi33"> True

</span><span class="ansi33"> False

</span><span class="ansi33">  (ColPerm True)

</span><span class="ansi33">  (ColPerm False)

</span><span class="ansi33">  (Not Red)

</span><span class="ansi33"> Green

</span><span class="ansi33">  (Not Green)

</span><span class="ansi33"> Blue

</span><span class="ansi33">  (Not Blue)

</span><span class="ansi33"> Red

</span><span class="ansi38-000068000">!(assertEqualToResult (sample (FlattenedHybridDist)) (True False Red Green Red Blue False True Green Blue Green Red))

</span><h3 id="PROB-DEP-TYPES.PROB-DEP-TYPES.08">;; PROB-DEP-TYPES.PROB-DEP-TYPES.08</h3><span class="ansi31">
(@ loonit_failureR 
  (equal_enough  
    (Blue False Green Red True 
      (ColPerm False) 
      (ColPerm True) 
      (Not Blue) 
      (Not Green) 
      (Not Red)) 
    (Blue False Green Red True)))
</span>        -->(0,'&self',[sample,['FlattenedHybridDist']],depth(2))
            -->(1,'&self',['FlattenedHybridDist'],depth(4))
              -->(2,'&self',[thunk,[sample,[sample,['SecondOrderHybridDist']]]],depth(5))
                  -->(3,'&self',['SecondOrderHybridDist'],depth(7))
                    -->(4,'&self',[thunk,[random,['HybridDist'],['HybridDistPermuted']]],depth(8))
                        -->(5,'&self',['HybridDist'],depth(10))
                          -->(6,'&self',[thunk,[f,[sample,['Bernoulli']]]],depth(11))
                              -->(7,'&self',['Bernoulli'],depth(13))
                                -->(8,'&self',[thunk,[random,'True','False']],depth(14))
                                    -->(9,'&self',[random,'True','False'],depth(16))
                                    -->(10,'&self',[thunk,'True'],depth(16))
                                  -->(11,'&self',[thunk,'True'],depth(15))
                              -->(12,'&self',[thunk,[f,[sample,[thunk,'True']]]],depth(13))
                                  -->(13,'&self',[thunk,'True'],depth(15))
                                  -->(14,'&self',[thunk,'True'],depth(15))
                                  -->(15,'&self',[f,[sample,[thunk,'True']]],depth(15))
                                      -->(16,'&self',[thunk,'True'],depth(17))
                                      -->(17,'&self',[thunk,'True'],depth(17))
                                      -->(18,'&self',[sample,[thunk,'True']],depth(17))
                                          -->(19,'&self',[thunk,'True'],depth(19))
                                    -->(20,'&self',[f,'True'],depth(16))
                                      -->(21,'&self',[sample,['Bernoulli']],depth(17))
                                          -->(22,'&self',['Bernoulli'],depth(19))
                                            -->(23,'&self',[thunk,[random,'True','False']],depth(20))
                                                -->(24,'&self',[random,'True','False'],depth(22))
                                                -->(25,'&self',[thunk,'True'],depth(22))
                                              -->(26,'&self',[thunk,'True'],depth(21))
                                          -->(27,'&self',[sample,[thunk,'True']],depth(19))
                                              -->(28,'&self',[thunk,'True'],depth(21))
                                -->(29,'&self',[thunk,'True'],depth(14))
                            -->(30,'&self',[thunk,'True'],depth(12))
                        -->(31,'&self',[thunk,[random,[thunk,'True'],['HybridDistPermuted']]],depth(10))
                            -->(32,'&self',[thunk,'True'],depth(12))
                            -->(33,'&self',[thunk,'True'],depth(12))
                            -->(34,'&self',['HybridDistPermuted'],depth(12))
                              -->(35,'&self',[thunk,['HybridPerm',[sample,['HybridDist']]]],depth(13))
                                  -->(36,'&self',['HybridDist'],depth(15))
                                    -->(37,'&self',[thunk,[f,[sample,['Bernoulli']]]],depth(16))
                                        -->(38,'&self',['Bernoulli'],depth(18))
                                          -->(39,'&self',[thunk,[random,'True','False']],depth(19))
                                              -->(40,'&self',[random,'True','False'],depth(21))
                                              -->(41,'&self',[thunk,'True'],depth(21))
                                            -->(42,'&self',[thunk,'True'],depth(20))
                                        -->(43,'&self',[thunk,[f,[sample,[thunk,'True']]]],depth(18))
                                            -->(44,'&self',[thunk,'True'],depth(20))
                                            -->(45,'&self',[thunk,'True'],depth(20))
                                            -->(46,'&self',[f,[sample,[thunk,'True']]],depth(20))
                                                -->(47,'&self',[thunk,'True'],depth(22))
                                                -->(48,'&self',[thunk,'True'],depth(22))
                                                -->(49,'&self',[sample,[thunk,'True']],depth(22))
                                                    -->(50,'&self',[thunk,'True'],depth(24))
                                              -->(51,'&self',[f,'True'],depth(21))
                                                -->(52,'&self',[sample,['Bernoulli']],depth(22))
                                                    -->(53,'&self',['Bernoulli'],depth(24))
                                                      -->(54,'&self',[thunk,[random,'True','False']],depth(25))
                                                          -->(55,'&self',[random,'True','False'],depth(27))
                                                          -->(56,'&self',[thunk,'True'],depth(27))
                                                        -->(57,'&self',[thunk,'True'],depth(26))
                                                    -->(58,'&self',[sample,[thunk,'True']],depth(24))
                                                        -->(59,'&self',[thunk,'True'],depth(26))
                                          -->(60,'&self',[thunk,'True'],depth(19))
                                      -->(61,'&self',[thunk,'True'],depth(17))
                                  -->(62,'&self',[thunk,['HybridPerm',[sample,[thunk,'True']]]],depth(15))
                                      -->(63,'&self',[thunk,'True'],depth(17))
                                      -->(64,'&self',[thunk,'True'],depth(17))
                                      -->(65,'&self',['HybridPerm',[sample,[thunk,'True']]],depth(17))
                                          -->(66,'&self',[thunk,'True'],depth(19))
                                        -->(67,'&self',['Not',[sample,[thunk,'True']]],depth(18))
                                            -->(68,'&self',[thunk,'True'],depth(20))
                                            -->(69,'&self',[thunk,'True'],depth(20))
                                            -->(70,'&self',[sample,[thunk,'True']],depth(20))
                                                -->(71,'&self',[thunk,'True'],depth(22))
                                          -->(72,'&self',['Not','True'],depth(19))
                                    -->(73,'&self',[thunk,'False'],depth(16))
                                -->(74,'&self',[thunk,'False'],depth(14))
                            -->(75,'&self',[thunk,'True'],depth(12))
                            -->(76,'&self',[thunk,'False'],depth(12))
                                          <--(72,retval('False'))
                                            <--(70,retval('True'))
                                        <--(67,retval(['Not','True']))
                                        -->(77,'&self',['ColPerm',[sample,[thunk,'True']]],depth(18))
                                            -->(78,'&self',[thunk,'True'],depth(20))
                                            -->(79,'&self',[thunk,'True'],depth(20))
                                            -->(80,'&self',[sample,[thunk,'True']],depth(20))
                                                -->(81,'&self',[thunk,'True'],depth(22))
                                          -->(82,'&self',['ColPerm','True'],depth(19))
                                    -->(83,'&self',[thunk,['ColPerm','True']],depth(16))
                                        -->(84,'&self',['ColPerm','True'],depth(18))
                                        -->(85,'&self',['ColPerm','True'],depth(18))
                                        -->(86,'&self',['ColPerm','True'],depth(18))
                                -->(87,'&self',[thunk,['ColPerm','True']],depth(14))
                                    -->(88,'&self',['ColPerm','True'],depth(16))
                                    -->(89,'&self',['ColPerm','True'],depth(16))
                                    -->(90,'&self',['ColPerm','True'],depth(16))
                            -->(91,'&self',[thunk,'True'],depth(12))
                            -->(92,'&self',['ColPerm','True'],depth(12))
                                            <--(80,retval('True'))
                                        <--(77,retval(['ColPerm','True']))
                                      <--(65,retval(['ColPerm',[sample,[thunk,'True']]]))
                                  <--(62,retval([thunk,['ColPerm','True']]))
                                                    <--(58,retval('True'))
                                                          -->(93,'&self',[thunk,'False'],depth(27))
                                                        -->(94,'&self',[thunk,'False'],depth(26))
                                                    -->(95,'&self',[sample,[thunk,'False']],depth(24))
                                                        -->(96,'&self',[thunk,'False'],depth(26))
                                          -->(97,'&self',[thunk,'False'],depth(19))
                                      -->(98,'&self',[thunk,'False'],depth(17))
                                  -->(99,'&self',[thunk,['HybridPerm',[sample,[thunk,'False']]]],depth(15))
                                      -->(100,'&self',[thunk,'False'],depth(17))
Switched off tracing. For a longer trace !(pragma! tracelen 101))<span class="ansi33">
 False

</span><span class="ansi32">% 41,472,812 inferences, 6.044 CPU in 6.044 seconds (100% CPU, 6862310 Lips)
</span> (@ = "examples/compat/prob-dep-types/prob_dep_types.metta" 0)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 4
</span><span class="ansi31">Failures: 4
</span>doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "examples/compat/prob-dep-types/prob_dep_types.html" )

</pre>
</body>

</html>
