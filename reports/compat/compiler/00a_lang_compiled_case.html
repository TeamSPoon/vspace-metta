<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi36 { color: #00aaaa; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000082136 { color: #005288; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (@ track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta")
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta')
1=[]
2=[]
3=[]
4=[]
5=[]
6=[]
7=[]
8=[]
9=[]
10=[]
11=[]
12=[]
13=[]
14=0.14user 0.01system 0:00.15elapsed 99%CPU (0avgtext+0avgdata 28792maxresident)k
14=0inputs+0outputs (0major+3286minor)pagefaults 0swaps
:- dynamic file_answers/3.

file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 1, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 2, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 3, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 4, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 5, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 6, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 7, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 8, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 9, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 10, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 11, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 12, []).
file_answers('/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta', 13, []).

<span class="ansi38-000068000">!(pragma! compile full)

</span>; Evaluation took 0.100 ms. (99.60 microseconds) 
<span class="ansi33"> Empty

</span>; cases are processed sequentially
<span class="ansi38-000068000">!(assertEqual 
  (+ 1 
    (superpose 
      (1 2 3))) 
  (+ 1 
    (superpose 
      (1 2 3))))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_1 =
%~                                [ assertEqual,
%~                                  [ +,
%~                                    1,
%~                                    [ superpose,
%~                                      [1,2,3]]],
%~                                  [ +,
%~                                    1,
%~                                    [ superpose,
%~                                      [1,2,3]]]] ,
%~                              loonit_assert_source_tf( Src_1,
%~                                  ((
%~                                   (findall(FA_1,((_96200=1;_96200=2;_96200=3),+(1,_96200,FA_1)),FARL_1)),
%~                                   (findall(FA_2,((_96252=1;_96252=2;_96252=3),+(1,_96252,FA_2)),FARL_2))  )),
%~                                equal_enough(FARL_1,FARL_2),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_1=[assertEqual, [+, 1, [superpose, [1, 2, 3]]], [+, 1, [superpose, [1, 2, 3]]]],
    loonit_assert_source_tf(Src_1,
                            (findall(FA_1, ((B=1;B=2;B=3), +(1, B, FA_1)), FARL_1), findall(FA_2, ((C=1;C=2;C=3), +(1, C, FA_2)), FARL_2)),
                            equal_enough(FARL_1, FARL_2),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ +, 
                    1, 
                    [ superpose, 
                      [1,2,3]]], 
                  [ +, 
                    1, 
                    [ superpose, 
                      [1,2,3]]]],loonit_assert_source_tf(L38,(findall(M38,((N38=1;N38=2;N38=3),+(1,N38,M38)),O38),findall(P38,((Q38=1;Q38=2;Q38=3),+(1,Q38,P38)),R38)),equal_enough(O38,R38),S38)),[ 'FARL_2'=R38, 
                                                                                                                                                                                                     'FA_2'=P38, 'FARL_1'=O38,'FA_1'=M38, 
                                                                                                                                                                                                     'Src_1'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                    P38,Q38,R38, 
                                                                                                                                                                                                                    S38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.01">;; COMPILER.00A-LANG-COMPILED-CASE.01</h3>
; 
; EVAL TEST
; took 0.028 ms. (27.90 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (2 3 4) 
    (2 3 4)))
</span>; Trace took 0.018 ms. (18.30 microseconds) 
; Evaluation took 1.24 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_2'=[2,3,4],'FA_2'=_100538,'FARL_1'=[2,3,4],'FA_1'=_99288,'Src_1'=[assertEqual,[+,1,[superpose,[1,2,3]]],[+,1,[superpose,[1,2,3]]]]]
</span>

<span class="ansi38-000068000">!(assertEqual 
  (+ 1 
    (superpose 
      (1 2 3))) 
  (+ 1 
    (superpose 
      (1 
        (superpose 
          (2 3))))))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_2 =
%~                                [ assertEqual,
%~                                  [ +,
%~                                    1,
%~                                    [ superpose,
%~                                      [1,2,3]]],
%~                                  [ +,
%~                                    1,
%~                                    [ superpose,
%~                                      [ 1,
%~                                        [ superpose,
%~                                          [2,3]]]]]] ,
%~                              loonit_assert_source_tf( Src_2,
%~                                  ((
%~                                   (findall( FA_3,
%~                                      (_435702=1;_435702=2;_435702=3),+(1,_435702,FA_3),
%~                                      FARL_3)),
%~                                   (findall( FA_4,
%~                                      (_447516=1;(_447534=2;_447534=3),_447534=_447516),+(1,_447516,FA_4),
%~                                      FARL_4))  )),
%~                                equal_enough(FARL_3,FARL_4),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_2=[assertEqual, [+, 1, [superpose, [1, 2, 3]]], [+, 1, [superpose, [1, [superpose, [2, 3]]]]]],
    loonit_assert_source_tf(Src_2,
                            (findall(FA_3, ((B=1;B=2;B=3), +(1, B, FA_3)), FARL_3), findall(FA_4, ((C=1;(D=2;D=3), D=C), +(1, C, FA_4)), FARL_4)),
                            equal_enough(FARL_3, FARL_4),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ +, 
                    1, 
                    [ superpose, 
                      [1,2,3]]], 
                  [ +, 
                    1, 
                    [ superpose, 
                      [ 1, 
                        [ superpose, 
                          [2,3]]]]]],loonit_assert_source_tf(L38,(findall(M38,((N38=1;N38=2;N38=3),+(1,N38,M38)),O38),findall(P38,((Q38=1;(R38=2;R38=3),R38=Q38),+(1,Q38,P38)),S38)),equal_enough(O38,S38),T38)),[ 'FARL_4'=S38, 
                                                                                                                                                                                                                   'FA_4'=P38, 'FARL_3'=O38,'FA_3'=M38, 
                                                                                                                                                                                                                   'Src_2'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                  P38,Q38,R38, 
                                                                                                                                                                                                                                  S38,T38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.02">;; COMPILER.00A-LANG-COMPILED-CASE.02</h3>
; 
; EVAL TEST
; took 0.022 ms. (21.80 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (2 3 4) 
    (2 3 4)))
</span>; Trace took 0.018 ms. (18.20 microseconds) 
; Evaluation took 1.20 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_4'=[2,3,4],'FA_4'=_454520,'FARL_3'=[2,3,4],'FA_3'=_453270,'Src_2'=[assertEqual,[+,1,[superpose,[1,2,3]]],[+,1,[superpose,[1,[superpose,[2,3]]]]]]]
</span>

<span class="ansi38-000068000">!(assertEqual 
  ( (superpose 
      (1 2 3))) 
  ( (superpose 
      (1 
        (superpose 
          ( (+ 1 1) 3))))))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_3 =
%~                                [ assertEqual,
%~                                  [ [ superpose,
%~                                      [1,2,3]]],
%~                                  [ [ superpose,
%~                                      [ 1,
%~                                        [ superpose,
%~                                          [ [+,1,1],
%~                                            3]]]]]] ,
%~                              loonit_assert_source_tf( Src_3,
%~                                  ((
%~                                   (findall( FA_5,
%~                                      ( _361740=1;_361740=2;_361740=3  ,
%~                                        _353820=_353846 ,
%~                                        u_assign([_353846],FA_5)),
%~                                      FARL_5)),
%~                                   (findall( FA_6,
%~                                      (   ((
%~                                           (_387160=1);
%~                                           (  ((
%~                                               (u_assign(1+1,Assign),Assign=VAR_Assign;VAR_Assign=3),
%~                                               (VAR_Assign=_387160)  )))  ))  ,
%~                                        _378580=_378600 ,
%~                                        u_assign([_378600],FA_6)),
%~                                      FARL_6))  )),
%~                                equal_enough(FARL_5,FARL_6),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_3=[assertEqual, [[superpose, [1, 2, 3]]], [[superpose, [1, [superpose, [[+, 1, 1], 3]]]]]],
    loonit_assert_source_tf(Src_3,
                            (findall(FA_5, (((B=1;B=2;B=3), B=C), u_assign([C], FA_5)), FARL_5), findall(FA_6, (((D=1;(u_assign(1+1, E), E=F;F=3), F=D), D=G), u_assign([G], FA_6)), FARL_6)),
                            equal_enough(FARL_5, FARL_6),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ [ superpose, 
                      [1,2,3]]], 
                  [ [ superpose, 
                      [ 1, 
                        [ superpose, 
                          [ [+,1,1], 
                            3]]]]]],loonit_assert_source_tf(L38,(findall(M38,(((N38=1;N38=2;N38=3),N38=O38),u_assign([O38],M38)),P38),findall(Q38,(((R38=1;(u_assign(1+1,S38),S38=T38;T38=3),T38=R38),R38=U38),u_assign([U38],Q38)),V38)),equal_enough(P38,V38),W38)),[ 'FARL_6'=V38, 
                                                                                                                                                                                                                                                                        'FA_6'=Q38, 'FARL_5'=P38,'FA_5'=M38, 
                                                                                                                                                                                                                                                                        'Src_3'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                                                       P38,Q38,R38, 
                                                                                                                                                                                                                                                                                       S38,T38,U38, 
                                                                                                                                                                                                                                                                                       V38,W38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.03">;; COMPILER.00A-LANG-COMPILED-CASE.03</h3>
; 
; EVAL TEST
; took 1.57 ms.
<span class="ansi36">(@ loonit_success 
  (equal_enough  () ()))
</span>; Trace took 0.688 ms. (687.80 microseconds) 
; Evaluation took 3.39 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_6'=[],'FA_6'=_398252,'FARL_5'=[],'FA_5'=_396930,'Src_3'=[assertEqual,[[superpose,[1,2,3]]],[[superpose,[1,[superpose,[[+,1,1],3]]]]]]]
</span>

; cases are processed sequentially
<span class="ansi38-000068000">!(assertEqual 
  (case 
    (+ 1 5) 
    ( (5 Error) 
      (6 OK) 
      (6 Error))) OK)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_4 =
%~                                [ assertEqual,
%~                                  [ case,
%~                                    [+,1,5],
%~                                    [ [    5   ,'Error'],
%~                                      [    6   , 'OK'  ],
%~                                      [    6   ,'Error']]],
%~                                  'OK'] ,
%~                              loonit_assert_source_tf( Src_4,
%~                                  ((
%~                                   (findall( FA_7,
%~                                        ((
%~                                         (u_assign(1+5,CASE_EVAL_1)),
%~                                         (( unify_enough(CASE_EVAL_1,5)->FA_7='Error'  ;
%~                                            unify_enough(CASE_EVAL_1,6)->FA_7='OK' ;
%~                                            unify_enough(CASE_EVAL_1,6)->FA_7='Error' ;
%~                                            fail,FA_7=[]))  )),
%~                                      FARL_7)),
%~                                   (findall(FA_8,FA_8='OK',FARL_8))  )),
%~                                equal_enough(FARL_7,FARL_8),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_4=[assertEqual, [case, [+, 1, 5], [[5, 'Error'], [6, 'OK'], [6, 'Error']]], 'OK'],
    loonit_assert_source_tf(Src_4,
                            (findall(FA_7, (u_assign(1+5, CASE_EVAL_1), (unify_enough(CASE_EVAL_1, 5)->FA_7='Error';unify_enough(CASE_EVAL_1, 6)->FA_7='OK';unify_enough(CASE_EVAL_1, 6)->FA_7='Error';fail, FA_7=[])), FARL_7), findall(FA_8, FA_8='OK', FARL_8)),
                            equal_enough(FARL_7, FARL_8),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ case, 
                    [+,1,5], 
                    [ [    5   ,'Error'],
                      [    6   , 'OK'  ],
                      [    6   ,'Error']]], 
                  'OK'],loonit_assert_source_tf(L38,(findall(M38,(u_assign(1+5,N38),(unify_enough(N38,5)->M38='Error';unify_enough(N38,6)->M38='OK';unify_enough(N38,6)->M38='Error';fail,M38=[])),O38),findall(P38,P38='OK',Q38)),equal_enough(O38,Q38),R38)),[ 'FARL_8'=Q38, 'FA_8'=P38,'FARL_7'=O38, 
                                                                                                                                                                                                                                                                 'CASE_EVAL_1'=N38,'FA_7'=M38, 
                                                                                                                                                                                                                                                                 'Src_4'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                                                P38,Q38,R38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.04">;; COMPILER.00A-LANG-COMPILED-CASE.04</h3>
; 
; EVAL TEST
; took 0.033 ms. (32.70 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (OK) 
    (OK)))
</span>; Trace took 0.022 ms. (21.90 microseconds) 
; Evaluation took 1.21 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_8'=['OK'],'FA_8'=_117314,'FARL_7'=['OK'],'CASE_EVAL_1'=_113880,'FA_7'=_113478,'Src_4'=[assertEqual,[case,[+,1,5],[[5,'Error'],[6,'OK'],[6,'Error']]],'OK']]
</span>

; we can use variables as cases
<span class="ansi38-000068000">!(assertEqual 
  (case 
    (+ 1 5) 
    ( ($X 
        (+ 1 $X)))) 7)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_5 =
%~                                [ assertEqual,
%~                                  [ case,
%~                                    [+,1,5],
%~                                    [ [ X,
%~                                        [+,1,X]]]],
%~                                  7] ,
%~                              loonit_assert_source_tf( Src_5,
%~                                  ((
%~                                   (findall( FA_9,
%~                                        ((
%~                                         (u_assign(1+5,CASE_EVAL_2)),
%~                                         (  ((
%~                                             (unify_enough(CASE_EVAL_2,X) ->
%~                                                u_assign(1+X,FA_9));
%~                                             (fail,FA_9=[])  )))  )),
%~                                      FARL_9)),
%~                                   (findall(FA_10,u_assign(FA_10,7),FARL_10))  )),
%~                                equal_enough(FARL_9,FARL_10),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_5=[assertEqual, [case, [+, 1, 5], [[X, [+, 1, X]]]], 7],
    loonit_assert_source_tf(Src_5,
                            (findall(FA_9, (u_assign(1+5, CASE_EVAL_2), (unify_enough(CASE_EVAL_2, X)->u_assign(1+X, FA_9);fail, FA_9=[])), FARL_9), findall(FA_10, u_assign(FA_10, 7), FARL_10)),
                            equal_enough(FARL_9, FARL_10),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ case, 
                    [+,1,5], 
                    [ [ M38, 
                        [+,1,M38]]]], 
                  7],loonit_assert_source_tf(L38,(findall(N38,(u_assign(1+5,O38),(unify_enough(O38,M38)->u_assign(1+M38,N38);fail,N38=[])),P38),findall(Q38,u_assign(Q38,7),R38)),equal_enough(P38,R38),S38)),[ 'FARL_10'=R38, 'FA_10'=Q38,'FARL_9'=P38, 
                                                                                                                                                                                                                'CASE_EVAL_2'=O38, 'FA_9'=N38,'X'=M38, 
                                                                                                                                                                                                                'Src_5'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                               P38,Q38,R38, 
                                                                                                                                                                                                                               S38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.05">;; COMPILER.00A-LANG-COMPILED-CASE.05</h3>
; 
; EVAL TEST
; took 0.038 ms. (38.10 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (7) 
    (7)))
</span>; Trace took 0.044 ms. (43.70 microseconds) 
; Evaluation took 1.04 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_10'=[7],'FA_10'=_322788,'FARL_9'=[7],'CASE_EVAL_2'=_320334,'FA_9'=_319932,'X'=_318930,'Src_5'=[assertEqual,[case,[+,1,5],[[_318930,[+,1,_318930]]]],7]]
</span>

; cases are not necessarily exhaustive,
; and the result can be empty
<span class="ansi38-000068000">!(assertEqual 
  (case 5 
    ( (6 OK))) 
  (superpose ()))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_6 =
%~                                [ assertEqual,
%~                                  [ case,
%~                                    5,
%~                                    [ [  6  ,'OK']]],
%~                                  [superpose,[]]] ,
%~                              loonit_assert_source_tf( Src_6,
%~                                  ((
%~                                   (findall( FA_11,
%~                                        ((
%~                                         (u_assign(CASE_EVAL_3,5)),
%~                                         (unify_enough(CASE_EVAL_3,6)->FA_11='OK';fail,FA_11=[])  )),
%~                                      FARL_11)),
%~                                   (findall(FA_12,false,FARL_12))  )),
%~                                equal_enough(FARL_11,FARL_12),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_6=[assertEqual, [case, 5, [[6, 'OK']]], [superpose, []]],
    loonit_assert_source_tf(Src_6,
                            (findall(FA_11, (u_assign(CASE_EVAL_3, 5), (unify_enough(CASE_EVAL_3, 6)->FA_11='OK';fail, FA_11=[])), FARL_11), findall(FA_12, false, FARL_12)),
                            equal_enough(FARL_11, FARL_12),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ case, 
                    5, 
                    [ [  6  ,'OK']]], 
                  [superpose,[]]],loonit_assert_source_tf(L38,(findall(M38,(u_assign(N38,5),(unify_enough(N38,6)->M38='OK';fail,M38=[])),O38),findall(P38,false,Q38)),equal_enough(O38,Q38),R38)),[ 'FARL_12'=Q38, 'FA_12'=P38,'FARL_11'=O38, 
                                                                                                                                                                                                    'CASE_EVAL_3'=N38, 'FA_11'=M38,'Src_6'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                  P38,Q38,R38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.06">;; COMPILER.00A-LANG-COMPILED-CASE.06</h3>
; 
; EVAL TEST
; took 0.021 ms. (20.70 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  () ()))
</span>; Trace took 0.014 ms. (14.50 microseconds) 
; Evaluation took 1.07 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_12'=[],'FA_12'=_2248,'FARL_11'=[],'CASE_EVAL_3'=_2164,'FA_11'=_2150,'Src_6'=[assertEqual,[case,5,[[6,'OK']]],[superpose,[]]]]
</span>

; it is non-deterministic: each value is matched against all cases
<span class="ansi38-000068000">!(assertEqual 
  (case 
    (+ 1 
      (superpose 
        (1 2 3))) 
    ( (3 OK-3) 
      (4 OK-4))) 
  (superpose 
    (OK-3 OK-4)))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_7 =
%~                                [ assertEqual,
%~                                  [ case,
%~                                    [ +,
%~                                      1,
%~                                      [ superpose,
%~                                        [1,2,3]]],
%~                                    [ [   3   ,'OK-3'],
%~                                      [   4   ,'OK-4']]],
%~                                  [ superpose,
%~                                    ['OK-3','OK-4']]] ,
%~                              loonit_assert_source_tf( Src_7,
%~                                  ((
%~                                   (findall( FA_13,
%~                                      ( _275292=1;_275292=2;_275292=3  ,
%~                                        +(1,_267382,CASE_EVAL_4) ,
%~                                        ( unify_enough(CASE_EVAL_4,3)->FA_13='OK-3'  ;
%~                                          unify_enough(CASE_EVAL_4,4)->FA_13='OK-4' ;
%~                                          fail,FA_13=[])),
%~                                      FARL_13)),
%~                                   (findall(FA_14,(FA_14='OK-3';FA_14='OK-4'),FARL_14))  )),
%~                                equal_enough(FARL_13,FARL_14),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_7=[assertEqual, [case, [+, 1, [superpose, [1, 2, 3]]], [[3, 'OK-3'], [4, 'OK-4']]], [superpose, ['OK-3', 'OK-4']]],
    loonit_assert_source_tf(Src_7,
                            (findall(FA_13, (((B=1;B=2;B=3), +(1, B, CASE_EVAL_4)), (unify_enough(CASE_EVAL_4, 3)->FA_13='OK-3';unify_enough(CASE_EVAL_4, 4)->FA_13='OK-4';fail, FA_13=[])), FARL_13), findall(FA_14, (FA_14='OK-3';FA_14='OK-4'), FARL_14)),
                            equal_enough(FARL_13, FARL_14),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ case, 
                    [ +, 
                      1, 
                      [ superpose, 
                        [1,2,3]]], 
                    [ [   3   ,'OK-3'],
                      [   4   ,'OK-4']]], 
                  [ superpose, 
                    ['OK-3','OK-4']]],loonit_assert_source_tf(L38,(findall(M38,(((N38=1;N38=2;N38=3),+(1,N38,O38)),(unify_enough(O38,3)->M38='OK-3';unify_enough(O38,4)->M38='OK-4';fail,M38=[])),P38),findall(Q38,(Q38='OK-3';Q38='OK-4'),R38)),equal_enough(P38,R38),S38)),[ 'FARL_14'=R38, 'FA_14'=Q38,'FARL_13'=P38, 
                                                                                                                                                                                                                                                                               'CASE_EVAL_4'=O38, 'FA_13'=M38,'Src_7'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                                                                                             P38,Q38,R38, 
                                                                                                                                                                                                                                                                                                                             S38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.07">;; COMPILER.00A-LANG-COMPILED-CASE.07</h3>
; 
; EVAL TEST
; took 0.027 ms. (27.50 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (OK-3 OK-4) 
    (OK-3 OK-4)))
</span>; Trace took 0.019 ms. (19.40 microseconds) 
; Evaluation took 1.38 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_14'=['OK-3','OK-4'],'FA_14'=_290042,'FARL_13'=['OK-3','OK-4'],'CASE_EVAL_4'=_287358,'FA_13'=_286742,'Src_7'=[assertEqual,[case,[+,1,[superpose,[1,2,3]]],[[3,'OK-3'],[4,'OK-4']]],[superpose,['OK-3','OK-4']]]]
</span>

; one case can produce multiple results
<span class="ansi38-000068000">!(assertEqual 
  (case 
    (+ 1 
      (superpose 
        (1 2 3))) 
    ( ($X 
        (+ 1 $X)))) 
  (superpose 
    (3 4 5)))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_8 =
%~                                [ assertEqual,
%~                                  [ case,
%~                                    [ +,
%~                                      1,
%~                                      [ superpose,
%~                                        [1,2,3]]],
%~                                    [ [ X,
%~                                        [+,1,X]]]],
%~                                  [ superpose,
%~                                    [3,4,5]]] ,
%~                              loonit_assert_source_tf( Src_8,
%~                                  ((
%~                                   (findall( FA_15,
%~                                      ( _84810=1;_84810=2;_84810=3  ,
%~                                        +(1,_76900,CASE_EVAL_5) ,
%~                                          ((
%~                                           (unify_enough(CASE_EVAL_5,X) ->
%~                                              u_assign(1+X,FA_15));
%~                                           (fail,FA_15=[])  ))),
%~                                      FARL_15)),
%~                                   (findall(FA_16,(FA_16=3;FA_16=4;FA_16=5),FARL_16))  )),
%~                                equal_enough(FARL_15,FARL_16),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_8=[assertEqual, [case, [+, 1, [superpose, [1, 2, 3]]], [[X, [+, 1, X]]]], [superpose, [3, 4, 5]]],
    loonit_assert_source_tf(Src_8,
                            (findall(FA_15, (((B=1;B=2;B=3), +(1, B, CASE_EVAL_5)), (unify_enough(CASE_EVAL_5, X)->u_assign(1+X, FA_15);fail, FA_15=[])), FARL_15), findall(FA_16, (FA_16=3;FA_16=4;FA_16=5), FARL_16)),
                            equal_enough(FARL_15, FARL_16),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ case, 
                    [ +, 
                      1, 
                      [ superpose, 
                        [1,2,3]]], 
                    [ [ M38, 
                        [+,1,M38]]]], 
                  [ superpose, 
                    [3,4,5]]],loonit_assert_source_tf(L38,(findall(N38,(((O38=1;O38=2;O38=3),+(1,O38,P38)),(unify_enough(P38,M38)->u_assign(1+M38,N38);fail,N38=[])),Q38),findall(R38,(R38=3;R38=4;R38=5),S38)),equal_enough(Q38,S38),T38)),[ 'FARL_16'=S38, 'FA_16'=R38,'FARL_15'=Q38, 
                                                                                                                                                                                                                                              'CASE_EVAL_5'=P38, 'FA_15'=N38,'X'=M38, 
                                                                                                                                                                                                                                              'Src_8'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                             P38,Q38,R38, 
                                                                                                                                                                                                                                                             S38,T38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.08">;; COMPILER.00A-LANG-COMPILED-CASE.08</h3>
; 
; EVAL TEST
; took 0.039 ms. (39.10 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (3 4 5) 
    (3 4 5)))
</span>; Trace took 0.056 ms. (55.90 microseconds) 
; Evaluation took 1.14 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_16'=[3,4,5],'FA_16'=_100944,'FARL_15'=[3,4,5],'CASE_EVAL_5'=_98464,'FA_15'=_97848,'X'=_96806,'Src_8'=[assertEqual,[case,[+,1,[superpose,[1,2,3]]],[[_96806,[+,1,_96806]]]],[superpose,[3,4,5]]]]
</span>

%~ [ convert(Convert),
%~   head_preconds_into_body(('Rel-P'('A','B',_169670):-_169670='True'))]
%~ [convert(_171054),head_preconds_into_body(('Rel-P'('A','B',_169670):-_169670='True'))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',['Rel-P','A','B'])
</span><span class="ansi38-255165000">  (Rel-P A B)
</span><span class="ansi38-000082136">  :- dynamic'Rel-P'/3.

  'Rel-P'('A', 'B', A) :-
    A='True'.

</span>

%~ [ convert(Convert),
%~   head_preconds_into_body(('Rel-Q'('A','C',_214332):-_214332='True'))]
%~ [convert(_215716),head_preconds_into_body(('Rel-Q'('A','C',_214332):-_214332='True'))]
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',['Rel-Q','A','C'])
</span><span class="ansi38-255165000">  (Rel-Q A C)
</span><span class="ansi38-000082136">  :- dynamic'Rel-Q'/3.

  'Rel-Q'('A', 'C', A) :-
    A='True'.

</span>

; Basic Match
<span class="ansi38-000068000">!(assertEqual 
  (match &self 
    ($Rel A $X) 
    ($Rel $X)) 
  (superpose 
    ( (Rel-P B) 
      (Rel-Q C))))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_9 =
%~                                [ assertEqual,
%~                                  [ match,
%~                                    '&self',
%~                                    [Rel,'A',X],
%~                                    [Rel,X]],
%~                                  [ superpose,
%~                                    [ [ 'Rel-P',  'B'  ],
%~                                      [ 'Rel-Q',  'C'  ]]]] ,
%~                              loonit_assert_source_tf( Src_9,
%~                                  ((
%~                                   (findall( FA_17,
%~                                      ( VAR_Rel=Rel  ,
%~                                        A='A' ,
%~                                        VAR_X=X ,
%~                                        u_assign([VAR_Rel,A,VAR_X],Assign) ,
%~                                        VAR_Rel3=Rel ,
%~                                        VAR_X4=X ,
%~                                        u_assign([VAR_Rel3,VAR_X4],FA_17)),
%~                                      FARL_17)),
%~                                   (findall( FA_18,
%~                                        ((
%~                                         (u_assign('Rel-P'('B'),VAR_FA_18_Rel_P),VAR_FA_18_Rel_P=FA_18);
%~                                         (u_assign('Rel-Q'('C'),VAR_FA_18_Rel_Q),VAR_FA_18_Rel_Q=FA_18)  )),
%~                                      FARL_18))  )),
%~                                equal_enough(FARL_17,FARL_18),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_9=[assertEqual, [match, '&self', [Rel, 'A', X], [Rel, X]], [superpose, [['Rel-P', 'B'], ['Rel-Q', 'C']]]],
    loonit_assert_source_tf(Src_9,
                            (findall(FA_17, (((B=Rel, C='A', D=X), u_assign([B, C, D], _)), (E=Rel, F=X), u_assign([E, F], FA_17)), FARL_17), findall(FA_18, (u_assign('Rel-P'('B'), G), G=FA_18;u_assign('Rel-Q'('C'), H), H=FA_18), FARL_18)),
                            equal_enough(FARL_17, FARL_18),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ match, 
                    '&self', 
                    [M38,'A',N38], 
                    [M38,N38]], 
                  [ superpose, 
                    [ [ 'Rel-P',  'B'  ],
                      [ 'Rel-Q',  'C'  ]]]],loonit_assert_source_tf(L38,(findall(O38,(((P38=M38,Q38='A',R38=N38),u_assign([P38,Q38,R38],S38)),(T38=M38,U38=N38),u_assign([T38,U38],O38)),V38),findall(W38,(u_assign('Rel-P'('B'),X38),X38=W38;u_assign('Rel-Q'('C'),Y38),Y38=W38),Z38)),equal_enough(V38,Z38),A39)),[ 'FARL_18'=Z38, 
                                                                                                                                                                                                                                                                                                                      'FA_18'=W38, 
                                                                                                                                                                                                                                                                                                                      'FARL_17'=V38, 'FA_17'=O38,'X'=N38, 
                                                                                                                                                                                                                                                                                                                      'Rel'=M38,'Src_9'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                                                                                                               P38,Q38,R38, 
                                                                                                                                                                                                                                                                                                                                               S38,T38,U38, 
                                                                                                                                                                                                                                                                                                                                               V38,W38,X38, 
                                                                                                                                                                                                                                                                                                                                               Y38,Z38,A39])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.09">;; COMPILER.00A-LANG-COMPILED-CASE.09</h3>
%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook(
%~          error(existence_error(source_sink,'A'),Existence_error),
%~          error,
%~          ['~w `~p\' does not exist'-[source_sink,'A']]).
<span class="ansi1 ansi31">ERROR: source_sink `'A'' does not exist
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>; 
; EVAL TEST
; took 77.12 ms.
<span class="ansi31">(@ loonit_failureR 
  (equal_enough  
    (True) 
    ( (Rel-P B) 
      (Rel-Q C))))
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook(
%~          error(existence_error(source_sink,'A'),Existence_error),
%~          error,
%~          ['~w `~p\' does not exist'-[source_sink,'A']]).
<span class="ansi1 ansi31">ERROR: source_sink `'A'' does not exist
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>; Trace took 53.23 ms.
; Evaluation took 131.75 ms.
<span class="ansi33"> False
</span><span class="ansi32">['FARL_18'=[['Rel-P','B'],['Rel-Q','C']],'FA_18'=_2630,'FARL_17'=['True'],'FA_17'=_2486,'X'=_2392,'Rel'=_2368,'Src_9'=[assertEqual,[match,'&self',[_2368,'A',_2392],[_2368,_2392]],[superpose,[['Rel-P','B'],['Rel-Q','C']]]]]
</span>

; Basic superpose
<span class="ansi38-000068000">!(assertEqualToResult 
  (superpose 
    ( (Rel-P B) 
      (Rel-Q C))) 
  ( (Rel-P B) 
    (Rel-Q C)))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              loonit_assert_source_tf(
%~                                 [ assertEqualToResult,
%~                                   [ superpose,
%~                                     [ [ 'Rel-P',  'B'  ],
%~                                       [ 'Rel-Q',  'C'  ]]],
%~                                   [ [ 'Rel-P',  'B'  ],
%~                                     [ 'Rel-Q',  'C'  ]]],
%~                                 findall( VAR_Assign_Rel_P,
%~                                     ((
%~                                      (u_assign('Rel-P'('B'),Assign_Rel_P),Assign_Rel_P=VAR_Assign_Rel_P);
%~                                      (u_assign('Rel-Q'('C'),Assign_Rel_Q),Assign_Rel_Q=VAR_Assign_Rel_P)  )),
%~                                   Findall),
%~                                 equal_enough(Findall,[['Rel-P','B'],['Rel-Q','C']]),
%~                                 Exec_Equal_enough))]
exec(A) :-
    loonit_assert_source_tf([ assertEqualToResult,
                              [superpose, [['Rel-P', 'B'], ['Rel-Q', 'C']]],
                              [['Rel-P', 'B'], ['Rel-Q', 'C']]
                            ],
                            findall(B,
                                    (u_assign('Rel-P'('B'), C), C=B;u_assign('Rel-Q'('C'), D), D=B),
                                    E),
                            equal_enough(E, [['Rel-P', 'B'], ['Rel-Q', 'C']]),
                            A).

subst_vars(loonit_assert_source_tf([ assertEqualToResult, 
                                     [ superpose, 
                                       [ [ 'Rel-P',  'B'  ],
                                         [ 'Rel-Q',  'C'  ]]], 
                                     [ [ 'Rel-P',  'B'  ],
                                       [ 'Rel-Q',  'C'  ]]],findall(L38,(u_assign('Rel-P'('B'),M38),M38=L38;u_assign('Rel-Q'('C'),N38),N38=L38),O38),equal_enough(O38,[ [ 'Rel-P',  'B'  ],
                                                                                                                                                                        [ 'Rel-Q',  'C'  ]]),P38),[],[ L38, M38,N38,O38, 
                                                                                                                                                                                                       P38])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.10">;; COMPILER.00A-LANG-COMPILED-CASE.10</h3>
; 
; EVAL TEST
; took 0.237 ms. (236.80 microseconds) 
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    ( (Rel-P B) 
      (Rel-Q C)) 
    ( (Rel-P B) 
      (Rel-Q C))))
</span>; Trace took 0.162 ms. (161.60 microseconds) 
; Evaluation took 1.79 ms.
<span class="ansi33"> True

</span>; cases can be used for deconstruction
<span class="ansi38-000068000">!(assertEqual 
  (superpose 
    ( (P B) 
      (Q C))) 
  (case 
    (match &self 
      ($Rel A $X) 
      ($Rel $X)) 
    ( ( (Rel-P $Y) 
        (P $Y)) 
      ( (Rel-Q $Y) 
        (Q $Y)))))

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_10 =
%~                                [ assertEqual,
%~                                  [ superpose,
%~                                    [ [ 'P','B'],
%~                                      [ 'Q','C']]],
%~                                  [ case,
%~                                    [ match,
%~                                      '&self',
%~                                      [Rel,'A',X],
%~                                      [Rel,X]],
%~                                    [ [ [ 'Rel-P',   Y   ],
%~                                        [   'P'  ,   Y   ]],
%~                                      [ [ 'Rel-Q',   Y   ],
%~                                        [   'Q'  ,   Y   ]]]]] ,
%~                              loonit_assert_source_tf( Src_10,
%~                                  ((
%~                                   (findall( FA_19,
%~                                        ((
%~                                         (u_assign('P'('B'),VAR_FA_19_P),VAR_FA_19_P=FA_19);
%~                                         (u_assign('Q'('C'),VAR_FA_19_Q),VAR_FA_19_Q=FA_19)  )),
%~                                      FARL_19)),
%~                                   (findall( FA_20,
%~                                      ( VAR_Rel=Rel  ,
%~                                        A='A' ,
%~                                        VAR_X=X ,
%~                                        u_assign([VAR_Rel,A,VAR_X],Assign) ,
%~                                        VAR_Rel7=Rel ,
%~                                        VAR_X8=X ,
%~                                        u_assign([VAR_Rel7,VAR_X8],CASE_EVAL_6) ,
%~                                        (   ((
%~                                             (u_assign('Rel-P'(Y),CASE_EVAL_6_Rel_P)),
%~                                             (unify_enough(CASE_EVAL_6,CASE_EVAL_6_Rel_P))  )) ->
%~                                            u_assign('P'(Y),FA_20)  ;
%~                                            ((
%~                                             (u_assign('Rel-Q'(Y),CASE_EVAL_6_Rel_Q)),
%~                                             (unify_enough(CASE_EVAL_6,CASE_EVAL_6_Rel_Q))  )) ->
%~                                            u_assign('Q'(Y),FA_20) ;
%~                                          fail,FA_20=[])),
%~                                      FARL_20))  )),
%~                                equal_enough(FARL_19,FARL_20),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_10=[assertEqual, [superpose, [['P', 'B'], ['Q', 'C']]], [case, [match, '&self', [Rel, 'A', X], [Rel, X]], [[['Rel-P', Y], ['P', Y]], [['Rel-Q', Y], ['Q', Y]]]]],
    loonit_assert_source_tf(Src_10,
                            (findall(FA_19, (u_assign('P'('B'), B), B=FA_19;u_assign('Q'('C'), C), C=FA_19), FARL_19), findall(FA_20, ((((D=Rel, E='A', F=X), u_assign([D, E, F], _)), (G=Rel, H=X), u_assign([G, H], CASE_EVAL_6)), (u_assign('Rel-P'(Y), I), unify_enough(CASE_EVAL_6, I)->u_assign('P'(Y), FA_20);u_assign('Rel-Q'(Y), J), unify_enough(CASE_EVAL_6, J)->u_assign('Q'(Y), FA_20);fail, FA_20=[])), FARL_20)),
                            equal_enough(FARL_19, FARL_20),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ superpose, 
                    [ [ 'P','B'],
                      [ 'Q','C']]], 
                  [ case, 
                    [ match, 
                      '&self', 
                      [M38,'A',N38], 
                      [M38,N38]], 
                    [ [ [ 'Rel-P',  O38  ],
                        [   'P'  ,  O38  ]], 
                      [ [ 'Rel-Q',  O38  ],
                        [   'Q'  ,  O38  ]]]]],loonit_assert_source_tf(L38,(findall(P38,(u_assign('P'('B'),Q38),Q38=P38;u_assign('Q'('C'),R38),R38=P38),S38),findall(T38,((((U38=M38,V38='A',W38=N38),u_assign([U38,V38,W38],X38)),(Y38=M38,Z38=N38),u_assign([Y38,Z38],A39)),(u_assign('Rel-P'(O38),B39),unify_enough(A39,B39)->u_assign('P'(O38),T38);u_assign('Rel-Q'(O38),C39),unify_enough(A39,C39)->u_assign('Q'(O38),T38);fail,T38=[])),D39)),equal_enough(S38,D39),E39)),[ 'FARL_20'=D39, 'CASE_EVAL_6'=A39,'FA_20'=T38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   'FARL_19'=S38, 'FA_19'=P38,'Y'=O38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   'X'=N38,'Rel'=M38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   'Src_10'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   P38,Q38,R38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   S38,T38,U38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   V38,W38,X38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Y38,Z38,A39, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   B39,C39,D39, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   E39])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.11">;; COMPILER.00A-LANG-COMPILED-CASE.11</h3>
%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook(
%~          error(existence_error(source_sink,'A'),Existence_error),
%~          error,
%~          ['~w `~p\' does not exist'-[source_sink,'A']]).
<span class="ansi1 ansi31">ERROR: source_sink `'A'' does not exist
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>; 
; EVAL TEST
; took 58.34 ms.
<span class="ansi31">(@ loonit_failureR 
  (equal_enough  
    ( (P B) 
      (Q C)) ()))
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook(
%~          error(existence_error(source_sink,'A'),Existence_error),
%~          error,
%~          ['~w `~p\' does not exist'-[source_sink,'A']]).
<span class="ansi1 ansi31">ERROR: source_sink `'A'' does not exist
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>; Trace took 62.16 ms.
; Evaluation took 122.39 ms.
<span class="ansi33"> False
</span><span class="ansi32">['FARL_20'=[],'CASE_EVAL_6'=_3228,'FA_20'=_3124,'FARL_19'=[['P','B'],['Q','C']],'FA_19'=_3038,'Y'=_2956,'X'=_2896,'Rel'=_2872,'Src_10'=[assertEqual,[superpose,[['P','B'],['Q','C']]],[case,[match,'&self',[_2872,'A',_2896],[_2872,_2896]],[[['Rel-P',_2956],['P',_2956]],[['Rel-Q',_2956],['Q',_2956]]]]]]
</span>

; %void% can be used to capture empty results
<span class="ansi38-000068000">!(assertEqual 
  (case 
    (match &self 
      ($Rel B $X) 
      ($Rel $X)) 
    ( ( (Rel-P $Y) 
        (P $Y)) 
      ( (Rel-Q $Y) 
        (Q $Y)) 
      (%void% no-match))) no-match)

</span>%~ [ convert(Convert),
%~   head_preconds_into_body( exec(Exec_Equal_enough) :-
%~                              Src_11 =
%~                                [ assertEqual,
%~                                  [ case,
%~                                    [ match,
%~                                      '&self',
%~                                      [Rel,'B',X],
%~                                      [Rel,X]],
%~                                    [ [ [ 'Rel-P',   Y   ],
%~                                        [   'P'  ,   Y   ]],
%~                                      [ [ 'Rel-Q',   Y   ],
%~                                        [   'Q'  ,   Y   ]],
%~                                      ['%void%','no-match']]],
%~                                  'no-match'] ,
%~                              loonit_assert_source_tf( Src_11,
%~                                  ((
%~                                   (findall( FA_21,
%~                                      ( VAR_Rel=Rel  ,
%~                                        B='B' ,
%~                                        VAR_X=X ,
%~                                        u_assign([VAR_Rel,B,VAR_X],Assign) ,
%~                                        VAR_Rel3=Rel ,
%~                                        VAR_X4=X ,
%~                                        u_assign([VAR_Rel3,VAR_X4],CASE_EVAL_7) ,
%~                                        (   ((
%~                                             (u_assign('Rel-P'(Y),CASE_EVAL_7_Rel_P)),
%~                                             (unify_enough(CASE_EVAL_7,CASE_EVAL_7_Rel_P))  )) ->
%~                                            u_assign('P'(Y),FA_21)  ;
%~                                            ((
%~                                             (u_assign('Rel-Q'(Y),CASE_EVAL_7_Rel_Q)),
%~                                             (unify_enough(CASE_EVAL_7,CASE_EVAL_7_Rel_Q))  )) ->
%~                                            u_assign('Q'(Y),FA_21) ;
%~                                          true->FA_21='no-match' ;
%~                                          fail,FA_21=[])),
%~                                      FARL_21)),
%~                                   (findall(FA_22,FA_22='no-match',FARL_22))  )),
%~                                equal_enough(FARL_21,FARL_22),
%~                                Exec_Equal_enough))]
exec(A) :-
    Src_11=[assertEqual, [case, [match, '&self', [Rel, 'B', X], [Rel, X]], [[['Rel-P', Y], ['P', Y]], [['Rel-Q', Y], ['Q', Y]], ['%void%', 'no-match']]], 'no-match'],
    loonit_assert_source_tf(Src_11,
                            (findall(FA_21, ((((B=Rel, C='B', D=X), u_assign([B, C, D], _)), (E=Rel, F=X), u_assign([E, F], CASE_EVAL_7)), (u_assign('Rel-P'(Y), G), unify_enough(CASE_EVAL_7, G)->u_assign('P'(Y), FA_21);u_assign('Rel-Q'(Y), H), unify_enough(CASE_EVAL_7, H)->u_assign('Q'(Y), FA_21);true->FA_21='no-match';fail, FA_21=[])), FARL_21), findall(FA_22, FA_22='no-match', FARL_22)),
                            equal_enough(FARL_21, FARL_22),
                            A).

subst_vars((L38=[ assertEqual, 
                  [ case, 
                    [ match, 
                      '&self', 
                      [M38,'B',N38], 
                      [M38,N38]], 
                    [ [ [ 'Rel-P',  O38  ],
                        [   'P'  ,  O38  ]], 
                      [ [ 'Rel-Q',  O38  ],
                        [   'Q'  ,  O38  ]], 
                      ['%void%','no-match']]], 
                  'no-match'],loonit_assert_source_tf(L38,(findall(P38,((((Q38=M38,R38='B',S38=N38),u_assign([Q38,R38,S38],T38)),(U38=M38,V38=N38),u_assign([U38,V38],W38)),(u_assign('Rel-P'(O38),X38),unify_enough(W38,X38)->u_assign('P'(O38),P38);u_assign('Rel-Q'(O38),Y38),unify_enough(W38,Y38)->u_assign('Q'(O38),P38);true->P38='no-match';fail,P38=[])),Z38),findall(A39,A39='no-match',B39)),equal_enough(Z38,B39),C39)),[ 'FARL_22'=B39, 'FA_22'=A39,'FARL_21'=Z38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                      'CASE_EVAL_7'=W38, 'FA_21'=P38,'Y'=O38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                      'X'=N38,'Rel'=M38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                      'Src_11'=L38],[ L38, M38,N38,O38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                      P38,Q38,R38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                      S38,T38,U38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                      V38,W38,X38, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                      Y38,Z38,A39, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                      B39,C39])
<h3 id="COMPILER.00A-LANG-COMPILED-CASE.12">;; COMPILER.00A-LANG-COMPILED-CASE.12</h3>
%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook(
%~          error(existence_error(source_sink,'B'),Existence_error),
%~          error,
%~          ['~w `~p\' does not exist'-[source_sink,'B']]).
<span class="ansi1 ansi31">ERROR: source_sink `'B'' does not exist
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>; 
; EVAL TEST
; took 49.56 ms.
<span class="ansi36">(@ loonit_success 
  (equal_enough  
    (no-match) 
    (no-match)))
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook(
%~          error(existence_error(source_sink,'B'),Existence_error),
%~          error,
%~          ['~w `~p\' does not exist'-[source_sink,'B']]).
<span class="ansi1 ansi31">ERROR: source_sink `'B'' does not exist
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>%~ user: message_hook( error(instantiation_error,Instantiation_error),
%~         error,
%~         ['Arguments are not sufficiently instantiated']).
<span class="ansi1 ansi31">ERROR: Arguments are not sufficiently instantiated
</span>; Trace took 55.35 ms.
; Evaluation took 106.32 ms.
<span class="ansi33"> True
</span><span class="ansi32">['FARL_22'=['no-match'],'FA_22'=_28648,'FARL_21'=['no-match'],'CASE_EVAL_7'=_24200,'FA_21'=_22212,'Y'=_20588,'X'=_19692,'Rel'=_19388,'Src_11'=[assertEqual,[case,[match,'&self',[_19388,'B',_19692],[_19388,_19692]],[[['Rel-P',_20588],['P',_20588]],[['Rel-Q',_20588],['Q',_20588]],['%void%','no-match']]],'no-match']]
</span>

<span class="ansi32">% 16,361,710 inferences, 3.908 CPU in 3.908 seconds (100% CPU, 4186449 Lips)
</span> (@ = "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.metta" 0)
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 10
</span><span class="ansi31">Failures: 2
</span>doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/compiler/00a_lang_compiled_case.html" )

</pre>
</body>

</html>
