<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
Script started on 2023-09-23 20:21:43-07:00 [COMMAND="timeout --foreground --preserve-status -s 5 -k 15 20 swipl --debug=true -l /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/metta_vspace/pyswip/metta_interp.pl -- --python=enable /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/test_scripts/d5_auto_types.metta --repl=false --args --timeout=20 --html" TERM="xterm" TTY="/dev/pts/0" COLUMNS="191" LINES="197"]
% init_phase(after_load).
% dot_cfg:using_dot_type(core,user)
:- time_factorials(61111).
:- time_fibonaccis(30000)
 --python=enable

  (load_metta  &amp;self "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/test_scripts/d5_auto_types.metta")
  (track_load_into_file  "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/test_scripts/d5_auto_types.metta")
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  (unknown_do_metta  &amp;self load Auto)
  (unknown_do_metta  &amp;self load type-checking)
  (unknown_do_metta  &amp;self load can)
  (unknown_do_metta  &amp;self load be)
  (unknown_do_metta  &amp;self load enabled)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
<span class="ansi38-000068000">!(pragma! type-check auto)
</span>
<span class="ansi33">  (pragma! type-check auto)

</span>; checking grounded types
<span class="ansi38-000068000">!(assertEqualToResult (+ 5 "S") ((Error "S" BadType)))
</span>
<span class="ansi31">  (loonit_failureR  
    (=@=  
      (88) 
      ( (Error "S" BadType))))
</span><span class="ansi33"> False

</span><span class="ansi38-000068000">!(assertEqualToResult (== 5 "S") ((Error "S" BadType)))
</span>
<span class="ansi31">  (loonit_failureR  
    (=@=  
      (False) 
      ( (Error "S" BadType))))
</span><span class="ansi33"> False

</span>; declaring some custom types
<span class="ansi38-255165000">  (metta_type  &amp;self Entity Type)
</span>  (metta_arity  &amp;self Entity 0)<span class="ansi38-255165000">
  (metta_atom  &amp;self 
    (: Entity Type))
</span><span class="ansi38-255165000">  (metta_type  &amp;self Socrates Entity)
</span>  (metta_arity  &amp;self Socrates 0)<span class="ansi38-255165000">
  (metta_atom  &amp;self 
    (: Socrates Entity))
</span><span class="ansi38-255165000">  (metta_type  &amp;self Human 
    (-&gt; Entity Type))
</span>  (metta_arity  &amp;self Human 2)
  (metta_params  &amp;self Human 
    (Entity Type))
  (metta_last  &amp;self Human Type)
  (metta_last  &amp;self Human Type)  ; 10 
<span class="ansi38-255165000">  (metta_type  &amp;self Mortal 
    (-&gt; Entity Type))
  (metta_type  &amp;self Mortal 
    (-&gt; Entity Type))  ; 11 

</span>  (metta_arity  &amp;self Mortal 2)
  (metta_arity  &amp;self Mortal 2)  ; 12 
  (metta_params  &amp;self Mortal 
    (Entity Type))
  (metta_params  &amp;self Mortal 
    (Entity Type))  ; 13 
  (metta_last  &amp;self Mortal Type)
<span class="ansi38-255165000">  (metta_type  &amp;self HumansAreMortal 
    (-&gt; 
      (Human $T) 
      (Mortal $T)))
</span>  (metta_arity  &amp;self HumansAreMortal 2)
  (metta_params  &amp;self HumansAreMortal 
    ( (Human $T) 
      (Mortal $T)))
  (metta_last  &amp;self HumansAreMortal T)<span class="ansi38-255165000">
  (metta_type  &amp;self SocratesIsHuman 
    (Human Socrates))
</span>  (metta_arity  &amp;self SocratesIsHuman 1)
  (metta_params  &amp;self SocratesIsHuman 
    (Human Socrates))
  (metta_last  &amp;self SocratesIsHuman Socrates)<span class="ansi38-255165000">
  (metta_type  &amp;self SamIsMortal 
    (Mortal Sam))
</span>  (metta_arity  &amp;self SamIsMortal 1)
  (metta_params  &amp;self SamIsMortal 
    (Mortal Sam))
  (metta_last  &amp;self SamIsMortal Sam)
; well typed
<span class="ansi38-255165000">  (metta_atom  &amp;self 
    (HumansAreMortal SocratesIsHuman))
</span><span class="ansi38-255165000">  (metta_atom  &amp;self 
    (== Mortal Human))
</span>; badly typed examples produce `Error` grounded values describing the issue:
<span class="ansi38-000068000">!(assertEqualToResult (== SocratesIsHuman SamIsMortal) ((Error SamIsMortal BadType)))
</span>
<span class="ansi31">  (loonit_failureR  
    (=@=  
      (False) 
      ( (Error SamIsMortal BadType))))
</span><span class="ansi33"> False

</span><span class="ansi38-000068000">!(assertEqualToResult (HumansAreMortal (Human Socrates)) ((Error (Human Socrates) BadType)))
</span>
<span class="ansi31">  (loonit_failureR  
    (=@=  
      ( (HumansAreMortal 
          (Human Socrates))) 
      ( (Error 
          (Human Socrates) BadType))))
</span><span class="ansi33"> False

</span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; `collapse` evaluates its argument, so it shows a type error
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
<span class="ansi38-000068000">!(assertEqualToResult (collapse (+ 5 "S")) (((Error "S" BadType))))
</span>
<span class="ansi31">  (loonit_failureR  
    (=@=  
      ( (88)) 
      ( ( (Error "S" BadType)))))
</span><span class="ansi33"> False

</span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; `match` does not perform type checking on its pattern,
; so it accepts a badly typed expression, which is expected.
; It can be useful to deal with "wrong" MeTTa programs on
; a meta-level in MeTTa itself, so this behavior of `match`
; allows us to write code that analyzes badly typed expressions
; within MeTTa (e.g. for self-reflective genetic programming).
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
<span class="ansi38-255165000">  (metta_atom  &amp;self 
    (match &amp;self 
      (== SocratesIsHuman SamIsMortal) Really?))
</span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; internal call doesn't pass type check even if wrapped
; by a function with type parameter:
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; let binds without type checking, but errors when used
<span class="ansi38-255165000">  (metta_atom  &amp;self 
    (let $X 
      (+ 5 "S") $X))
</span><span class="ansi38-255165000">  (metta_type  &amp;self f 
    (-&gt; $T Number))
</span>  (metta_arity  &amp;self f 2)
  (metta_params  &amp;self f 
    ($T Number))
  (metta_last  &amp;self f Number)
<span class="ansi38-000068000">!(assertEqualToResult (f (+ 5 "S")) ((Error "S" BadType)))
</span>
<span class="ansi31">  (loonit_failureR  
    (=@=  
      ( (f 88)) 
      ( (Error "S" BadType))))
</span><span class="ansi33"> False

</span><span class="ansi32">% 154,906 inferences, 0.098 CPU in 0.098 seconds (100% CPU, 1585159 Lips)
</span>  (=  "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/test_scripts/d5_auto_types.metta" 34)
 --repl=false
 --args
 --timeout=20
<span class="ansi1">LoonIt Report
</span>------------
<span class="ansi32">Successes: 0
</span><span class="ansi31">Failures: 6
</span>
Script done on 2023-09-23 20:21:45-07:00 [COMMAND_EXIT_CODE="7"]

</pre>
</body>

</html>
