<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi35 { color: #E850A8; }
.ansi38-000068000 { color: #004400; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-015015015 { color: #0F0F0F; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-000068000 { color: #004400; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
 (track_load_into_file "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/neurospace/test_assist.metta")
%~ load_answer_file( '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/neurospace/test_assist.metta.answers',
%~   '/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/neurospace/test_assist.metta')
1=[(Error (extend-py! llm_gate) Exception caught:
1=KeyError: 'OPENAI_API_KEY'
1=
1=At:
1=  <frozen os>(679): __getitem__
1=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/neurospace/llm_gate.py(6): <module>
1=  <frozen importlib._bootstrap>(241): _call_with_frames_removed
1=  <frozen importlib._bootstrap_external>(940): exec_module
1=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/runner.py(165): load_py_module_from_path
1=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/runner.py(154): load_py_module_from_mod_or_file
1=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/runner.py(78): <lambda>
1=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/atoms.py(320): execute
1=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/atoms.py(167): _priv_call_execute_on_grounded_atom
1=  /opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/hyperon-experimental/python/hyperon/runner.py(31): run_step
1=  (18): run_step
1=)]
1=0.36user 0.04system 0:00.52elapsed 78%CPU (0avgtext+0avgdata 67592maxresident)k
1=43024inputs+16outputs (150major+9771minor)pagefaults 0swaps
:- dynamic file_answers/3.


<span class="ansi38-000068000">!(extend-py! llm_gate)

</span>; Evaluation took 0.132 ms. (131.60 microseconds) 
<span class="ansi33">Deterministic: </span><span class="ansi33">(extend-py! llm_gate)
</span>
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,['append-expr',Xs,X],[collapse,[superpose,[[superpose,Xs],X]]])
</span><span class="ansi38-255165000">(= 
  (append-expr $Xs $X) 
  (collapse 
    (superpose 
      ( (superpose $Xs) $X))))
</span>

;; We could use $_, so this message would be automatically added to any prompt,
;; but in this case it would be difficult to avoid its duplication
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[message,init],[system,'You are the SingularityNet AI platform and marketplace assistant'])
</span><span class="ansi38-255165000">(= 
  (message init) 
  (system "You are the SingularityNet AI platform and marketplace assistant"))
</span>

;; We need to duplicate this message
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[message,'platform-desc'],[message,init])
</span><span class="ansi38-255165000">(= 
  (message platform-desc) 
  (message init))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[message,'platform-desc'],[system,'SingularityNET (SNET) is an open and decentralized network of AI services made accessible through the Blockchain. Developers publish their services to the SingularityNET network, where they can be used by anyone with an internet connection. Developers are able to charge for the use of their services using the native AGIX token.\nServices can span the entire gamut of offerings in artificial intelligence and machine learning. Services can provide inference or model training across myriad domains such as image/video, speech, text, time-series, bio-AI, network analysis, etc. The services can be as simple as wrapping a well-known algorithm such as A* path planning, a complete end-to-end solution for an industry problem, or a standalone AI application. Developers can also deploy autonomous AI agents that interoperate with other services on the network.\nThe SingularityNET platform contains a number of critical components that work together to enable a decentralized network of AI services to flourish. The core components are designed to allow for a functional, scalable, and extensible system. We arrived at the current architecture through a careful process, guided by a few key decisions governing Blockchain interactions, AI service integration, and abstraction and by the goal of building an AI marketplace that is both open and compliant with regulatory and legal requirements.\nFirst, we made the conscious choice to minimize our dependence on our current Blockchain, Ethereum. Both conceptual and practical issues motivated this decision. Conceptually, we desire to be Blockchain-agnostic and, if necessary, will consider building our own consensus algorithm based on reputation. The speed, reliability, and costs of Ethereum Blockchain interactions dictate that any scalable system built on top of it must minimize gas costs and the delays introduced by block-mining time. These decisions are reflected in our use of tools to abstract away all Blockchain interactions (the daemon, CLI, and SDK) and in our use of a multi-party escrow contract and atomic unidirectional channels for payments.\nSecond, on AI services integration, we wanted to abstract away as much of the network as possible, in order to reduce the learning curve and minimize the overhead associated with providing AI services via the network. This abstraction is achieved with a single flexible tool, the daemon, that will help us provide scalability, robustness, distribution, and management features to the entire community.\nFinally, to make our marketplace compliant with regulations without compromising on openness, we implemented it separately from our fully decentralized registry of AI services currently available on the Blockchain.'])
</span><span class="ansi38-255165000">(= 
  (message platform-desc) 
  (system "SingularityNET (SNET) is an open and decentralized network of AI services made accessible through the Blockchain. Developers publish their services to the SingularityNET network, where they can be used by anyone with an internet connection. Developers are able to charge for the use of their services using the native AGIX token.\nServices can span the entire gamut of offerings in artificial intelligence and machine learning. Services can provide inference or model training across myriad domains such as image/video, speech, text, time-series, bio-AI, network analysis, etc. The services can be as simple as wrapping a well-known algorithm such as A* path planning, a complete end-to-end solution for an industry problem, or a standalone AI application. Developers can also deploy autonomous AI agents that interoperate with other services on the network.\nThe SingularityNET platform contains a number of critical components that work together to enable a decentralized network of AI services to flourish. The core components are designed to allow for a functional, scalable, and extensible system. We arrived at the current architecture through a careful process, guided by a few key decisions governing Blockchain interactions, AI service integration, and abstraction and by the goal of building an AI marketplace that is both open and compliant with regulatory and legal requirements.\nFirst, we made the conscious choice to minimize our dependence on our current Blockchain, Ethereum. Both conceptual and practical issues motivated this decision. Conceptually, we desire to be Blockchain-agnostic and, if necessary, will consider building our own consensus algorithm based on reputation. The speed, reliability, and costs of Ethereum Blockchain interactions dictate that any scalable system built on top of it must minimize gas costs and the delays introduced by block-mining time. These decisions are reflected in our use of tools to abstract away all Blockchain interactions (the daemon, CLI, and SDK) and in our use of a multi-party escrow contract and atomic unidirectional channels for payments.\nSecond, on AI services integration, we wanted to abstract away as much of the network as possible, in order to reduce the learning curve and minimize the overhead associated with providing AI services via the network. This abstraction is achieved with a single flexible tool, the daemon, that will help us provide scalability, robustness, distribution, and management features to the entire community.\nFinally, to make our marketplace compliant with regulations without compromising on openness, we implemented it separately from our fully decentralized registry of AI services currently available on the Blockchain."))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[message,'service-list'],[system,'Select the service, which is most relevant to the user question. The list of services with descriptions\n     style-transfer : Provide two images and use this service to transfer the artistic-style of one image to the second image provided.\n     image2text-handwritten : The service receives an image of a English-language handwritten text line and outputs the result of  image recognition as a text sequence.\n     speech-emotions : Submit a WAV file (up to 4 MB and no longer than 90 seconds) with English speech and get an emotion label from the provided WAV file.\n     super-resolution : The service takes a low-resolution image in binary format, uses it as input for a pre-trained model, and outputs the result as a higher-quality image.\n   '])
</span><span class="ansi38-255165000">(= 
  (message service-list) 
  (system "Select the service, which is most relevant to the user question. The list of services with descriptions\n     style-transfer : Provide two images and use this service to transfer the artistic-style of one image to the second image provided.\n     image2text-handwritten : The service receives an image of a English-language handwritten text line and outputs the result of  image recognition as a text sequence.\n     speech-emotions : Submit a WAV file (up to 4 MB and no longer than 90 seconds) with English speech and get an emotion label from the provided WAV file.\n     super-resolution : The service takes a low-resolution image in binary format, uses it as input for a pre-trained model, and outputs the result as a higher-quality image.\n   "))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[function,init],set_subgoal)
</span><span class="ansi38-255165000">(= 
  (function init) set_subgoal)
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[doc,set_subgoal],['Doc',[description,'You should always call this function to answer the user'],[parameters,[goal,'The goal of the user',[greeting,'general question about platform','search for particular service','service list']]]])
</span><span class="ansi38-255165000">(= 
  (doc set_subgoal) 
  (Doc 
    (description "You should always call this function to answer the user") 
    (parameters 
      (goal "The goal of the user" 
        (greeting "general question about platform" "search for particular service" "service list")))))
</span>

;; We suppose that the second argument has a certain structure built by compose-prompt
;; so it can be deconstructed by the corresponding argument pattern
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[set_subgoal,['general question about platform'],['Messages',History,Prev_state_msg,User_msg]],[llm,['compose-prompt','platform-desc',History,User_msg]])
</span><span class="ansi38-255165000">(= 
  (set_subgoal 
    ("general question about platform") 
    (Messages $History $Prev_state_msg $User_msg)) 
  (llm 
    (compose-prompt platform-desc $History $User_msg)))
</span>

;; (llm (append-expr $msgs (message platform-desc))
;; Extracting components of input messages, ignoring $prev-state-msg and calling
;; compose-prompt is a standard pattern to keep the user message at the end
;; of the message list inserting new system messages in-between
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[set_subgoal,['search for particular service'],['Messages',History,Prev_state_msg,User_msg]],[llm,['compose-prompt','service-list',History,User_msg],['Functions',describe_service]])
</span><span class="ansi38-255165000">(= 
  (set_subgoal 
    ("search for particular service") 
    (Messages $History $Prev_state_msg $User_msg)) 
  (llm 
    (compose-prompt service-list $History $User_msg) 
    (Functions describe_service)))
</span>

;; In this example, we just append the list of messages with the new system message
;; for further elaboration on the service.
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[describe_service,[Args],Msgs],[llm,['append-expr',Msgs,[system,['You selected the service ',Args,' Please describe it.']]]])
</span><span class="ansi38-255165000">(= 
  (describe_service 
    ($Args) $Msgs) 
  (llm 
    (append-expr $Msgs 
      (system 
        ("You selected the service " $Args " Please describe it.")))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[doc,describe_service],['Doc',[description,'You should call this function to describe the service.'],[parameters,[service,'The service to be described',['style-transfer','image2text-handwritten','speech-emotions','super-resolution']]]])
</span><span class="ansi38-255165000">(= 
  (doc describe_service) 
  (Doc 
    (description "You should call this function to describe the service.") 
    (parameters 
      (service "The service to be described" 
        (style-transfer image2text-handwritten speech-emotions super-resolution)))))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,['compose-prompt',State,History,New_msg],[let,Msgs_state,[collapse,[message,State]],['Messages',History,['cons-atom','Messages',Msgs_state],New_msg]])
</span><span class="ansi38-255165000">(= 
  (compose-prompt $State $History $New_msg) 
  (let $Msgs_state 
    (collapse 
      (message $State)) 
    (Messages $History 
      (cons-atom Messages $Msgs_state) $New_msg)))
</span>

<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,['compose-functions',State],[let,Fn_calls,[collapse,[function,State]],['cons-atom','Functions',Fn_calls]])
</span><span class="ansi38-255165000">(= 
  (compose-functions $State) 
  (let $Fn_calls 
    (collapse 
      (function $State)) 
    (cons-atom Functions $Fn_calls)))
</span>

;; TODO? Assuming that $user-msg is not wrapped into (user ...) is convenient
;; for the first call, but not convenient for using `respond` from functional calls
<span class="ansi38-255165000"></span><span class="ansi38-015015015">  ; Action: load=metta_atom('&self',=,[respond,State,History,User_msg],[llm,['compose-prompt',State,History,[user,User_msg]],['compose-functions',State]])
</span><span class="ansi38-255165000">(= 
  (respond $State $History $User_msg) 
  (llm 
    (compose-prompt $State $History 
      (user $User_msg)) 
    (compose-functions $State)))
</span>

;; !(compose-prompt init () (user "What services do you have on the platform?"))
;; !(compose-functions init)
;;!(respond init () "What services do you have on the platform?")
;;!(respond init () "What can I use for style transfer?")
;;!(respond init () "Hello. What can you do?")
<span class="ansi38-000068000">!(respond init () "What is the SingularityNET platform?")

</span>; Evaluation took 3.02 milliseconds.
<span class="ansi33">NDet Result(1): </span><span class="ansi33">(llm 
  (Messages () 
    (cons-atom Messages 
      ( (system "You are the SingularityNet AI platform and marketplace assistant"))) 
    (user "What is the SingularityNET platform?")) 
  (cons-atom Functions 
    (set_subgoal)))
</span>
More Solutions? <span class="ansi35"> l

</span><span class="ansi32">% 249,252 inferences, 0.579 CPU in 0.579 seconds (100% CPU, 430303 Lips)
</span> (= "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/neurospace/test_assist.metta" 0)
<br/><a href="https://github.com/logicmoo/vspace-metta/blob/main/MeTTaLog.md">Return to Summaries</a><br/>
doing(ansi2html -u < "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/TEE.ansi" > "/opt/logicmoo_workspace/packs_sys/logicmoo_opencog/MeTTa/vspace-metta/examples/compat/hyperon-experimental/python/sandbox/neurospace/test_assist.html" )

</pre>
</body>

</html>
